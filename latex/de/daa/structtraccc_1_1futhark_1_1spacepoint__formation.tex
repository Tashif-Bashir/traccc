\hypertarget{structtraccc_1_1futhark_1_1spacepoint__formation}{}\doxysection{traccc\+::futhark\+::spacepoint\+\_\+formation Struct Reference}
\label{structtraccc_1_1futhark_1_1spacepoint__formation}\index{traccc::futhark::spacepoint\_formation@{traccc::futhark::spacepoint\_formation}}


{\ttfamily \#include $<$spacepoint\+\_\+formation.\+hpp$>$}



Inheritance diagram for traccc\+::futhark\+::spacepoint\+\_\+formation\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=251pt]{d1/df6/structtraccc_1_1futhark_1_1spacepoint__formation__inherit__graph}
\end{center}
\end{figure}


Collaboration diagram for traccc\+::futhark\+::spacepoint\+\_\+formation\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=251pt]{df/de6/structtraccc_1_1futhark_1_1spacepoint__formation__coll__graph}
\end{center}
\end{figure}
\doxysubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{structtraccc_1_1futhark_1_1spacepoint__formation_a45e3cab1cce5814ffaf3a267ade97c4e}{spacepoint\+\_\+formation}} (vecmem\+::memory\+\_\+resource \&)
\item 
output\+\_\+type \mbox{\hyperlink{structtraccc_1_1futhark_1_1spacepoint__formation_ace345b79adb9ba30b85663fa75ba2f9b}{operator()}} (const std\+::vector$<$ std\+::pair$<$ \mbox{\hyperlink{namespacetraccc_a394d22a5b5acbd46fadc0da0491c6913}{geometry\+\_\+id}}, \mbox{\hyperlink{namespacetraccc_a7d1f91ecd225f32ea85349bf0bc8adb8}{transform3}} $>$$>$ \&, const \mbox{\hyperlink{structtraccc_1_1container__types_a9585c833c648097a3bdc8f228a78954e}{measurement\+\_\+container\+\_\+types\+::host}} \&cells) const
\end{DoxyCompactItemize}
\doxysubsection*{Private Attributes}
\begin{DoxyCompactItemize}
\item 
vecmem\+::memory\+\_\+resource \& \mbox{\hyperlink{structtraccc_1_1futhark_1_1spacepoint__formation_aa12125f4cc2a092eedfe8722bef522c5}{m\+\_\+mr}}
\end{DoxyCompactItemize}


\doxysubsection{Constructor \& Destructor Documentation}
\mbox{\Hypertarget{structtraccc_1_1futhark_1_1spacepoint__formation_a45e3cab1cce5814ffaf3a267ade97c4e}\label{structtraccc_1_1futhark_1_1spacepoint__formation_a45e3cab1cce5814ffaf3a267ade97c4e}} 
\index{traccc::futhark::spacepoint\_formation@{traccc::futhark::spacepoint\_formation}!spacepoint\_formation@{spacepoint\_formation}}
\index{spacepoint\_formation@{spacepoint\_formation}!traccc::futhark::spacepoint\_formation@{traccc::futhark::spacepoint\_formation}}
\doxysubsubsection{\texorpdfstring{spacepoint\_formation()}{spacepoint\_formation()}}
{\footnotesize\ttfamily traccc\+::futhark\+::spacepoint\+\_\+formation\+::spacepoint\+\_\+formation (\begin{DoxyParamCaption}\item[{vecmem\+::memory\+\_\+resource \&}]{mr }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{28     : \mbox{\hyperlink{structtraccc_1_1futhark_1_1spacepoint__formation_aa12125f4cc2a092eedfe8722bef522c5}{m\_mr}}(mr) \{\}}

\end{DoxyCode}


\doxysubsection{Member Function Documentation}
\mbox{\Hypertarget{structtraccc_1_1futhark_1_1spacepoint__formation_ace345b79adb9ba30b85663fa75ba2f9b}\label{structtraccc_1_1futhark_1_1spacepoint__formation_ace345b79adb9ba30b85663fa75ba2f9b}} 
\index{traccc::futhark::spacepoint\_formation@{traccc::futhark::spacepoint\_formation}!operator()@{operator()}}
\index{operator()@{operator()}!traccc::futhark::spacepoint\_formation@{traccc::futhark::spacepoint\_formation}}
\doxysubsubsection{\texorpdfstring{operator()()}{operator()()}}
{\footnotesize\ttfamily spacepoint\+\_\+formation\+::output\+\_\+type traccc\+::futhark\+::spacepoint\+\_\+formation\+::operator() (\begin{DoxyParamCaption}\item[{const std\+::vector$<$ std\+::pair$<$ \mbox{\hyperlink{namespacetraccc_a394d22a5b5acbd46fadc0da0491c6913}{geometry\+\_\+id}}, \mbox{\hyperlink{namespacetraccc_a7d1f91ecd225f32ea85349bf0bc8adb8}{transform3}} $>$$>$ \&}]{transforms,  }\item[{const \mbox{\hyperlink{structtraccc_1_1container__types_a9585c833c648097a3bdc8f228a78954e}{measurement\+\_\+container\+\_\+types\+::host}} \&}]{cells }\end{DoxyParamCaption}) const}


\begin{DoxyCode}{0}
\DoxyCodeLine{32                                                        \{}
\DoxyCodeLine{33     std::size\_t total\_measurements = 0, total\_transforms = transforms.size();}
\DoxyCodeLine{34     std::vector<measurement> measurements;}
\DoxyCodeLine{35     std::vector<geometry\_id> geom\_ids;}
\DoxyCodeLine{36 }
\DoxyCodeLine{37     \textcolor{keywordflow}{for} (std::size\_t i = 0; i < data.size(); ++i) \{}
\DoxyCodeLine{38         \textcolor{keywordflow}{for} (std::size\_t j = 0; j < data.at(i).items.size(); ++j) \{}
\DoxyCodeLine{39             ++total\_measurements;}
\DoxyCodeLine{40             measurements.push\_back(data.at(i).items.at(j));}
\DoxyCodeLine{41             geom\_ids.push\_back(data.at(i).header.module);}
\DoxyCodeLine{42         \}}
\DoxyCodeLine{43     \}}
\DoxyCodeLine{44 }
\DoxyCodeLine{45     std::vector<uint64\_t> host\_transform\_geometry(total\_transforms);}
\DoxyCodeLine{46     std::vector<float> host\_transform\_transform(4 * 4 * total\_transforms);}
\DoxyCodeLine{47 }
\DoxyCodeLine{48     std::vector<uint64\_t> host\_measurement\_event(total\_measurements);}
\DoxyCodeLine{49     std::vector<uint64\_t> host\_measurement\_geometry(total\_measurements);}
\DoxyCodeLine{50     std::vector<float> host\_measurement\_position0(total\_measurements);}
\DoxyCodeLine{51     std::vector<float> host\_measurement\_position1(total\_measurements);}
\DoxyCodeLine{52     std::vector<float> host\_measurement\_variance0(total\_measurements);}
\DoxyCodeLine{53     std::vector<float> host\_measurement\_variance1(total\_measurements);}
\DoxyCodeLine{54 }
\DoxyCodeLine{55     \textcolor{keywordflow}{for} (std::size\_t i = 0; i < total\_transforms; ++i) \{}
\DoxyCodeLine{56         host\_transform\_geometry[i] = std::get<0>(transforms[i]);}
\DoxyCodeLine{57         \mbox{\hyperlink{namespacetraccc_a7d1f91ecd225f32ea85349bf0bc8adb8}{transform3}} transform = std::get<1>(transforms[i]);}
\DoxyCodeLine{58         transform3::element\_getter getter;}
\DoxyCodeLine{59         \textcolor{keywordflow}{for} (std::size\_t x = 0; x < 4; ++x) \{}
\DoxyCodeLine{60             \textcolor{keywordflow}{for} (std::size\_t y = 0; y < 4; ++y) \{}
\DoxyCodeLine{61                 host\_transform\_transform[9 * i + 3 * x + y] =}
\DoxyCodeLine{62                     getter(transform.matrix(), x, y);}
\DoxyCodeLine{63             \}}
\DoxyCodeLine{64         \}}
\DoxyCodeLine{65     \}}
\DoxyCodeLine{66 }
\DoxyCodeLine{67     \textcolor{keywordflow}{for} (std::size\_t i = 0, k = 0; i < data.size(); ++i) \{}
\DoxyCodeLine{68         \textcolor{keywordflow}{for} (std::size\_t j = 0; j < data.at(i).items.size(); ++j, ++k) \{}
\DoxyCodeLine{69             host\_measurement\_event[k] = 0;}
\DoxyCodeLine{70             host\_measurement\_geometry[k] = geom\_ids[k];}
\DoxyCodeLine{71             host\_measurement\_position0[k] = data.at(i).items.at(j).local[0];}
\DoxyCodeLine{72             host\_measurement\_position1[k] = data.at(i).items.at(j).local[1];}
\DoxyCodeLine{73             host\_measurement\_variance0[k] = data.at(i).items.at(j).variance[0];}
\DoxyCodeLine{74             host\_measurement\_variance1[k] = data.at(i).items.at(j).variance[1];}
\DoxyCodeLine{75         \}}
\DoxyCodeLine{76     \}}
\DoxyCodeLine{77 }
\DoxyCodeLine{78     measurements\_to\_spacepoints\_wrapper::output\_t r =}
\DoxyCodeLine{79         \mbox{\hyperlink{io__dec__par__example_8cpp_a2280d45109980acc30541590e2778923}{measurements\_to\_spacepoints\_wrapper::run}}(}
\DoxyCodeLine{80             std::move(host\_transform\_geometry),}
\DoxyCodeLine{81             std::move(host\_transform\_transform),}
\DoxyCodeLine{82             std::move(host\_measurement\_event),}
\DoxyCodeLine{83             std::move(host\_measurement\_geometry),}
\DoxyCodeLine{84             std::move(host\_measurement\_position0),}
\DoxyCodeLine{85             std::move(host\_measurement\_position1),}
\DoxyCodeLine{86             std::move(host\_measurement\_variance0),}
\DoxyCodeLine{87             std::move(host\_measurement\_variance1));}
\DoxyCodeLine{88 }
\DoxyCodeLine{89     output\_type out(\&\mbox{\hyperlink{structtraccc_1_1futhark_1_1spacepoint__formation_aa12125f4cc2a092eedfe8722bef522c5}{m\_mr}});}
\DoxyCodeLine{90 }
\DoxyCodeLine{91     \textcolor{keywordflow}{for} (std::size\_t i = 0; i < total\_measurements; ++i) \{}
\DoxyCodeLine{92         out.push\_back(\{std::get<1>(r)[i], std::get<2>(r)[i], std::get<3>(r)[i],}
\DoxyCodeLine{93                        measurements[i]\});}
\DoxyCodeLine{94     \}}
\DoxyCodeLine{95 }
\DoxyCodeLine{96     \textcolor{keywordflow}{return} out;}
\DoxyCodeLine{97 \}}

\end{DoxyCode}


References traccc\+::host\+\_\+container$<$ header\+\_\+t, item\+\_\+t $>$\+::at(), traccc\+::container\+\_\+element$<$ header\+\_\+reference\+\_\+t, vector\+\_\+reference\+\_\+t $>$\+::header, traccc\+::container\+\_\+element$<$ header\+\_\+reference\+\_\+t, vector\+\_\+reference\+\_\+t $>$\+::items, m\+\_\+mr, run(), and traccc\+::host\+\_\+container$<$ header\+\_\+t, item\+\_\+t $>$\+::size().



\doxysubsection{Member Data Documentation}
\mbox{\Hypertarget{structtraccc_1_1futhark_1_1spacepoint__formation_aa12125f4cc2a092eedfe8722bef522c5}\label{structtraccc_1_1futhark_1_1spacepoint__formation_aa12125f4cc2a092eedfe8722bef522c5}} 
\index{traccc::futhark::spacepoint\_formation@{traccc::futhark::spacepoint\_formation}!m\_mr@{m\_mr}}
\index{m\_mr@{m\_mr}!traccc::futhark::spacepoint\_formation@{traccc::futhark::spacepoint\_formation}}
\doxysubsubsection{\texorpdfstring{m\_mr}{m\_mr}}
{\footnotesize\ttfamily vecmem\+::memory\+\_\+resource\& traccc\+::futhark\+::spacepoint\+\_\+formation\+::m\+\_\+mr\hspace{0.3cm}{\ttfamily [private]}}



Referenced by operator()().



The documentation for this struct was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
device/futhark/include/traccc/futhark/\mbox{\hyperlink{device_2futhark_2include_2traccc_2futhark_2spacepoint__formation_8hpp}{spacepoint\+\_\+formation.\+hpp}}\item 
device/futhark/src/\mbox{\hyperlink{device_2futhark_2src_2spacepoint__formation_8cpp}{spacepoint\+\_\+formation.\+cpp}}\end{DoxyCompactItemize}
