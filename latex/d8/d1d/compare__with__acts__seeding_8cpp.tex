\hypertarget{compare__with__acts__seeding_8cpp}{}\doxysection{tests/cpu/compare\+\_\+with\+\_\+acts\+\_\+seeding.cpp File Reference}
\label{compare__with__acts__seeding_8cpp}\index{tests/cpu/compare\_with\_acts\_seeding.cpp@{tests/cpu/compare\_with\_acts\_seeding.cpp}}
{\ttfamily \#include \char`\"{}traccc/io/read\+\_\+geometry.\+hpp\char`\"{}}\newline
{\ttfamily \#include \char`\"{}traccc/io/read\+\_\+spacepoints.\+hpp\char`\"{}}\newline
{\ttfamily \#include \char`\"{}traccc/seeding/seed\+\_\+finding.\+hpp\char`\"{}}\newline
{\ttfamily \#include \char`\"{}traccc/seeding/spacepoint\+\_\+binning.\+hpp\char`\"{}}\newline
{\ttfamily \#include \char`\"{}tests/atlas\+\_\+cuts.\+hpp\char`\"{}}\newline
{\ttfamily \#include \char`\"{}tests/space\+\_\+point.\+hpp\char`\"{}}\newline
{\ttfamily \#include \char`\"{}Acts/\+Geometry/\+Geometry\+Context.\+hpp\char`\"{}}\newline
{\ttfamily \#include \char`\"{}Acts/\+Magnetic\+Field/\+Constant\+B\+Field.\+hpp\char`\"{}}\newline
{\ttfamily \#include \char`\"{}Acts/\+Seeding/\+Bin\+Finder.\+hpp\char`\"{}}\newline
{\ttfamily \#include \char`\"{}Acts/\+Seeding/\+Binned\+S\+P\+Group.\+hpp\char`\"{}}\newline
{\ttfamily \#include \char`\"{}Acts/\+Seeding/\+Estimate\+Track\+Params\+From\+Seed.\+hpp\char`\"{}}\newline
{\ttfamily \#include \char`\"{}Acts/\+Seeding/\+Internal\+Seed.\+hpp\char`\"{}}\newline
{\ttfamily \#include \char`\"{}Acts/\+Seeding/\+Internal\+Space\+Point.\+hpp\char`\"{}}\newline
{\ttfamily \#include \char`\"{}Acts/\+Seeding/\+Seed.\+hpp\char`\"{}}\newline
{\ttfamily \#include \char`\"{}Acts/\+Seeding/\+Seed\+Filter.\+hpp\char`\"{}}\newline
{\ttfamily \#include \char`\"{}Acts/\+Seeding/\+Seed\+Finder.\+hpp\char`\"{}}\newline
{\ttfamily \#include \char`\"{}Acts/\+Seeding/\+Space\+Point\+Grid.\+hpp\char`\"{}}\newline
{\ttfamily \#include \char`\"{}Acts/\+Surfaces/\+Disc\+Surface.\+hpp\char`\"{}}\newline
{\ttfamily \#include \char`\"{}Acts/\+Surfaces/\+Plane\+Surface.\+hpp\char`\"{}}\newline
{\ttfamily \#include \char`\"{}Acts/\+Surfaces/\+Surface.\+hpp\char`\"{}}\newline
{\ttfamily \#include $<$vecmem/memory/host\+\_\+memory\+\_\+resource.\+hpp$>$}\newline
{\ttfamily \#include $<$gtest/gtest.\+h$>$}\newline
Include dependency graph for compare\+\_\+with\+\_\+acts\+\_\+seeding.\+cpp\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{d2/d7c/compare__with__acts__seeding_8cpp__incl}
\end{center}
\end{figure}
\doxysubsection*{Classes}
\begin{DoxyCompactItemize}
\item 
class \mbox{\hyperlink{classCompareWithActsSeedingTests}{Compare\+With\+Acts\+Seeding\+Tests}}
\end{DoxyCompactItemize}
\doxysubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
bool \mbox{\hyperlink{compare__with__acts__seeding_8cpp_ac8f3cae4d0c779329f0dd48e69048ad4}{operator==}} (const \mbox{\hyperlink{structSpacePoint}{Space\+Point}} $\ast$acts\+\_\+sp, const \mbox{\hyperlink{structtraccc_1_1spacepoint}{traccc\+::spacepoint}} \&traccc\+\_\+sp)
\item 
bool \mbox{\hyperlink{compare__with__acts__seeding_8cpp_aa66ba767e7065ea4667ea27b1cf9d79a}{operator==}} (const \mbox{\hyperlink{structtraccc_1_1spacepoint}{traccc\+::spacepoint}} \&traccc\+\_\+sp, const \mbox{\hyperlink{structSpacePoint}{Space\+Point}} $\ast$acts\+\_\+sp)
\item 
\mbox{\hyperlink{compare__with__acts__seeding_8cpp_acd458d50fa60ad5f6c0f8f6c386fc1a1}{T\+E\+S\+T\+\_\+P}} (\mbox{\hyperlink{classCompareWithActsSeedingTests}{Compare\+With\+Acts\+Seeding\+Tests}}, Run)
\item 
\mbox{\hyperlink{compare__with__acts__seeding_8cpp_ae441f24cc8663fe24487e1c1edc01dd6}{I\+N\+S\+T\+A\+N\+T\+I\+A\+T\+E\+\_\+\+T\+E\+S\+T\+\_\+\+S\+U\+I\+T\+E\+\_\+P}} (Seeding\+Validation, \mbox{\hyperlink{classCompareWithActsSeedingTests}{Compare\+With\+Acts\+Seeding\+Tests}}, \+::testing\+::\+Values(std\+::make\+\_\+tuple(\char`\"{}tml\+\_\+detector/trackml-\/detector.\+csv\char`\"{}, \char`\"{}tml\+\_\+full/ttbar\+\_\+mu200/\char`\"{}, 0), std\+::make\+\_\+tuple(\char`\"{}tml\+\_\+detector/trackml-\/detector.\+csv\char`\"{}, \char`\"{}tml\+\_\+full/ttbar\+\_\+mu200/\char`\"{}, 1), std\+::make\+\_\+tuple(\char`\"{}tml\+\_\+detector/trackml-\/detector.\+csv\char`\"{}, \char`\"{}tml\+\_\+full/ttbar\+\_\+mu200/\char`\"{}, 2), std\+::make\+\_\+tuple(\char`\"{}tml\+\_\+detector/trackml-\/detector.\+csv\char`\"{}, \char`\"{}tml\+\_\+full/ttbar\+\_\+mu200/\char`\"{}, 3), std\+::make\+\_\+tuple(\char`\"{}tml\+\_\+detector/trackml-\/detector.\+csv\char`\"{}, \char`\"{}tml\+\_\+full/ttbar\+\_\+mu200/\char`\"{}, 4), std\+::make\+\_\+tuple(\char`\"{}tml\+\_\+detector/trackml-\/detector.\+csv\char`\"{}, \char`\"{}tml\+\_\+full/ttbar\+\_\+mu200/\char`\"{}, 5), std\+::make\+\_\+tuple(\char`\"{}tml\+\_\+detector/trackml-\/detector.\+csv\char`\"{}, \char`\"{}tml\+\_\+full/ttbar\+\_\+mu200/\char`\"{}, 6), std\+::make\+\_\+tuple(\char`\"{}tml\+\_\+detector/trackml-\/detector.\+csv\char`\"{}, \char`\"{}tml\+\_\+full/ttbar\+\_\+mu200/\char`\"{}, 7), std\+::make\+\_\+tuple(\char`\"{}tml\+\_\+detector/trackml-\/detector.\+csv\char`\"{}, \char`\"{}tml\+\_\+full/ttbar\+\_\+mu200/\char`\"{}, 8), std\+::make\+\_\+tuple(\char`\"{}tml\+\_\+detector/trackml-\/detector.\+csv\char`\"{}, \char`\"{}tml\+\_\+full/ttbar\+\_\+mu200/\char`\"{}, 9)))
\end{DoxyCompactItemize}


\doxysubsection{Function Documentation}
\mbox{\Hypertarget{compare__with__acts__seeding_8cpp_ae441f24cc8663fe24487e1c1edc01dd6}\label{compare__with__acts__seeding_8cpp_ae441f24cc8663fe24487e1c1edc01dd6}} 
\index{compare\_with\_acts\_seeding.cpp@{compare\_with\_acts\_seeding.cpp}!INSTANTIATE\_TEST\_SUITE\_P@{INSTANTIATE\_TEST\_SUITE\_P}}
\index{INSTANTIATE\_TEST\_SUITE\_P@{INSTANTIATE\_TEST\_SUITE\_P}!compare\_with\_acts\_seeding.cpp@{compare\_with\_acts\_seeding.cpp}}
\doxysubsubsection{\texorpdfstring{INSTANTIATE\_TEST\_SUITE\_P()}{INSTANTIATE\_TEST\_SUITE\_P()}}
{\footnotesize\ttfamily I\+N\+S\+T\+A\+N\+T\+I\+A\+T\+E\+\_\+\+T\+E\+S\+T\+\_\+\+S\+U\+I\+T\+E\+\_\+P (\begin{DoxyParamCaption}\item[{Seeding\+Validation}]{,  }\item[{\mbox{\hyperlink{classCompareWithActsSeedingTests}{Compare\+With\+Acts\+Seeding\+Tests}}}]{,  }\item[{\+::testing\+::\+Values(std\+::make\+\_\+tuple(\char`\"{}tml\+\_\+detector/trackml-\/detector.\+csv\char`\"{}, \char`\"{}tml\+\_\+full/ttbar\+\_\+mu200/\char`\"{}, 0), std\+::make\+\_\+tuple(\char`\"{}tml\+\_\+detector/trackml-\/detector.\+csv\char`\"{}, \char`\"{}tml\+\_\+full/ttbar\+\_\+mu200/\char`\"{}, 1), std\+::make\+\_\+tuple(\char`\"{}tml\+\_\+detector/trackml-\/detector.\+csv\char`\"{}, \char`\"{}tml\+\_\+full/ttbar\+\_\+mu200/\char`\"{}, 2), std\+::make\+\_\+tuple(\char`\"{}tml\+\_\+detector/trackml-\/detector.\+csv\char`\"{}, \char`\"{}tml\+\_\+full/ttbar\+\_\+mu200/\char`\"{}, 3), std\+::make\+\_\+tuple(\char`\"{}tml\+\_\+detector/trackml-\/detector.\+csv\char`\"{}, \char`\"{}tml\+\_\+full/ttbar\+\_\+mu200/\char`\"{}, 4), std\+::make\+\_\+tuple(\char`\"{}tml\+\_\+detector/trackml-\/detector.\+csv\char`\"{}, \char`\"{}tml\+\_\+full/ttbar\+\_\+mu200/\char`\"{}, 5), std\+::make\+\_\+tuple(\char`\"{}tml\+\_\+detector/trackml-\/detector.\+csv\char`\"{}, \char`\"{}tml\+\_\+full/ttbar\+\_\+mu200/\char`\"{}, 6), std\+::make\+\_\+tuple(\char`\"{}tml\+\_\+detector/trackml-\/detector.\+csv\char`\"{}, \char`\"{}tml\+\_\+full/ttbar\+\_\+mu200/\char`\"{}, 7), std\+::make\+\_\+tuple(\char`\"{}tml\+\_\+detector/trackml-\/detector.\+csv\char`\"{}, \char`\"{}tml\+\_\+full/ttbar\+\_\+mu200/\char`\"{}, 8), std\+::make\+\_\+tuple(\char`\"{}tml\+\_\+detector/trackml-\/detector.\+csv\char`\"{}, \char`\"{}tml\+\_\+full/ttbar\+\_\+mu200/\char`\"{}, 9))}]{ }\end{DoxyParamCaption})}

\mbox{\Hypertarget{compare__with__acts__seeding_8cpp_ac8f3cae4d0c779329f0dd48e69048ad4}\label{compare__with__acts__seeding_8cpp_ac8f3cae4d0c779329f0dd48e69048ad4}} 
\index{compare\_with\_acts\_seeding.cpp@{compare\_with\_acts\_seeding.cpp}!operator==@{operator==}}
\index{operator==@{operator==}!compare\_with\_acts\_seeding.cpp@{compare\_with\_acts\_seeding.cpp}}
\doxysubsubsection{\texorpdfstring{operator==()}{operator==()}\hspace{0.1cm}{\footnotesize\ttfamily [1/2]}}
{\footnotesize\ttfamily bool operator== (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{structSpacePoint}{Space\+Point}} $\ast$}]{acts\+\_\+sp,  }\item[{const \mbox{\hyperlink{structtraccc_1_1spacepoint}{traccc\+::spacepoint}} \&}]{traccc\+\_\+sp }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}

T\+R\+A\+C\+CC library, part of the A\+C\+TS project (R\&D line)

(c) 2021-\/2022 C\+E\+RN for the benefit of the A\+C\+TS project

Mozilla Public License Version 2.\+0 
\begin{DoxyCode}{0}
\DoxyCodeLine{43                                                           \{}
\DoxyCodeLine{44     \textcolor{keywordflow}{if} (abs(acts\_sp-\/>\mbox{\hyperlink{structSpacePoint_a88a94622e18fd3d533b673a1c1c0a519}{x}}() -\/ traccc\_sp.\mbox{\hyperlink{structtraccc_1_1spacepoint_ae56055d4e38159c4201cce630602278f}{global}}[0]) < \mbox{\hyperlink{namespacetraccc_aefb61e3b4bb1e5f447092f00790f5bec}{traccc::float\_epsilon}} \&\&}
\DoxyCodeLine{45         abs(acts\_sp-\/>\mbox{\hyperlink{structSpacePoint_a606c0cf443bf33fb9bc796bb77e88671}{y}}() -\/ traccc\_sp.\mbox{\hyperlink{structtraccc_1_1spacepoint_ae56055d4e38159c4201cce630602278f}{global}}[1]) < \mbox{\hyperlink{namespacetraccc_aefb61e3b4bb1e5f447092f00790f5bec}{traccc::float\_epsilon}} \&\&}
\DoxyCodeLine{46         abs(acts\_sp-\/>\mbox{\hyperlink{structSpacePoint_a8612a490c7e498172d8291c3c6723e9e}{z}}() -\/ traccc\_sp.\mbox{\hyperlink{structtraccc_1_1spacepoint_ae56055d4e38159c4201cce630602278f}{global}}[2]) < \mbox{\hyperlink{namespacetraccc_aefb61e3b4bb1e5f447092f00790f5bec}{traccc::float\_epsilon}}) \{}
\DoxyCodeLine{47         \textcolor{keywordflow}{return} \textcolor{keyword}{true};}
\DoxyCodeLine{48     \}}
\DoxyCodeLine{49     \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{50 \}}

\end{DoxyCode}


References traccc\+::float\+\_\+epsilon, traccc\+::spacepoint\+::global, Space\+Point\+::x(), Space\+Point\+::y(), and Space\+Point\+::z().

\mbox{\Hypertarget{compare__with__acts__seeding_8cpp_aa66ba767e7065ea4667ea27b1cf9d79a}\label{compare__with__acts__seeding_8cpp_aa66ba767e7065ea4667ea27b1cf9d79a}} 
\index{compare\_with\_acts\_seeding.cpp@{compare\_with\_acts\_seeding.cpp}!operator==@{operator==}}
\index{operator==@{operator==}!compare\_with\_acts\_seeding.cpp@{compare\_with\_acts\_seeding.cpp}}
\doxysubsubsection{\texorpdfstring{operator==()}{operator==()}\hspace{0.1cm}{\footnotesize\ttfamily [2/2]}}
{\footnotesize\ttfamily bool operator== (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{structtraccc_1_1spacepoint}{traccc\+::spacepoint}} \&}]{traccc\+\_\+sp,  }\item[{const \mbox{\hyperlink{structSpacePoint}{Space\+Point}} $\ast$}]{acts\+\_\+sp }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{53                                                   \{}
\DoxyCodeLine{54     \textcolor{keywordflow}{if} (abs(acts\_sp-\/>\mbox{\hyperlink{structSpacePoint_a88a94622e18fd3d533b673a1c1c0a519}{x}}() -\/ traccc\_sp.\mbox{\hyperlink{structtraccc_1_1spacepoint_ae56055d4e38159c4201cce630602278f}{global}}[0]) < \mbox{\hyperlink{namespacetraccc_aefb61e3b4bb1e5f447092f00790f5bec}{traccc::float\_epsilon}} \&\&}
\DoxyCodeLine{55         abs(acts\_sp-\/>\mbox{\hyperlink{structSpacePoint_a606c0cf443bf33fb9bc796bb77e88671}{y}}() -\/ traccc\_sp.\mbox{\hyperlink{structtraccc_1_1spacepoint_ae56055d4e38159c4201cce630602278f}{global}}[1]) < \mbox{\hyperlink{namespacetraccc_aefb61e3b4bb1e5f447092f00790f5bec}{traccc::float\_epsilon}} \&\&}
\DoxyCodeLine{56         abs(acts\_sp-\/>\mbox{\hyperlink{structSpacePoint_a8612a490c7e498172d8291c3c6723e9e}{z}}() -\/ traccc\_sp.\mbox{\hyperlink{structtraccc_1_1spacepoint_ae56055d4e38159c4201cce630602278f}{global}}[2]) < \mbox{\hyperlink{namespacetraccc_aefb61e3b4bb1e5f447092f00790f5bec}{traccc::float\_epsilon}}) \{}
\DoxyCodeLine{57         \textcolor{keywordflow}{return} \textcolor{keyword}{true};}
\DoxyCodeLine{58     \}}
\DoxyCodeLine{59     \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{60 \}}

\end{DoxyCode}


References traccc\+::float\+\_\+epsilon, traccc\+::spacepoint\+::global, Space\+Point\+::x(), Space\+Point\+::y(), and Space\+Point\+::z().

\mbox{\Hypertarget{compare__with__acts__seeding_8cpp_acd458d50fa60ad5f6c0f8f6c386fc1a1}\label{compare__with__acts__seeding_8cpp_acd458d50fa60ad5f6c0f8f6c386fc1a1}} 
\index{compare\_with\_acts\_seeding.cpp@{compare\_with\_acts\_seeding.cpp}!TEST\_P@{TEST\_P}}
\index{TEST\_P@{TEST\_P}!compare\_with\_acts\_seeding.cpp@{compare\_with\_acts\_seeding.cpp}}
\doxysubsubsection{\texorpdfstring{TEST\_P()}{TEST\_P()}}
{\footnotesize\ttfamily T\+E\+S\+T\+\_\+P (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classCompareWithActsSeedingTests}{Compare\+With\+Acts\+Seeding\+Tests}}}]{,  }\item[{Run}]{ }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{67                                          \{}
\DoxyCodeLine{68 }
\DoxyCodeLine{69     std::string \mbox{\hyperlink{test__mapper_8cpp_a902d72422a60bd9a079e899a54f552c1}{detector\_file}} = std::get<0>(GetParam());}
\DoxyCodeLine{70     std::string \mbox{\hyperlink{test__mapper_8cpp_a2088ca26affd5c3ae0ed6890ae5f489a}{hits\_dir}} = std::get<1>(GetParam());}
\DoxyCodeLine{71     \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} \textcolor{keyword}{event} = std::get<2>(GetParam());}
\DoxyCodeLine{72 }
\DoxyCodeLine{73     \textcolor{comment}{// Memory resource used by the EDM.}}
\DoxyCodeLine{74     vecmem::host\_memory\_resource host\_mr;}
\DoxyCodeLine{75 }
\DoxyCodeLine{76     \textcolor{comment}{// Seeding Config}}
\DoxyCodeLine{77     \mbox{\hyperlink{structtraccc_1_1seedfinder__config}{traccc::seedfinder\_config}} traccc\_config;}
\DoxyCodeLine{78     \mbox{\hyperlink{structtraccc_1_1spacepoint__grid__config}{traccc::spacepoint\_grid\_config}} grid\_config(traccc\_config);}
\DoxyCodeLine{79 }
\DoxyCodeLine{80     \textcolor{comment}{// Declare algorithms}}
\DoxyCodeLine{81     \mbox{\hyperlink{classtraccc_1_1spacepoint__binning}{traccc::spacepoint\_binning}} sb(traccc\_config, grid\_config, host\_mr);}
\DoxyCodeLine{82     \mbox{\hyperlink{classtraccc_1_1seed__finding}{traccc::seed\_finding}} sf(traccc\_config, \mbox{\hyperlink{structtraccc_1_1seedfilter__config}{traccc::seedfilter\_config}}());}
\DoxyCodeLine{83 }
\DoxyCodeLine{84     \textcolor{comment}{// Read the surface transforms}}
\DoxyCodeLine{85     \textcolor{keyword}{auto} surface\_transforms = \mbox{\hyperlink{namespacetraccc_1_1io_a5a6c904c086473a05b85a0bf060bfa8d}{traccc::io::read\_geometry}}(\mbox{\hyperlink{test__mapper_8cpp_a902d72422a60bd9a079e899a54f552c1}{detector\_file}});}
\DoxyCodeLine{86 }
\DoxyCodeLine{87     \textcolor{comment}{// Read the hits from the relevant event file}}
\DoxyCodeLine{88     \mbox{\hyperlink{structtraccc_1_1io_1_1spacepoint__reader__output}{traccc::io::spacepoint\_reader\_output}} reader\_output(\&host\_mr);}
\DoxyCodeLine{89     \mbox{\hyperlink{namespacetraccc_1_1io_afe49060da2ab77f49cfcd82308122f84}{traccc::io::read\_spacepoints}}(reader\_output, \mbox{\hyperlink{test__mapper_8cpp_aa79e3eff1ed8e629ebc8e3268c4805f9}{event}}, \mbox{\hyperlink{test__mapper_8cpp_a2088ca26affd5c3ae0ed6890ae5f489a}{hits\_dir}},}
\DoxyCodeLine{90                                  surface\_transforms, \mbox{\hyperlink{namespacetraccc_af412a9ab8cc2a30a664acd9f62bb83daaad4c20898046609aa6860e412b43c422}{traccc::data\_format::csv}});}
\DoxyCodeLine{91 }
\DoxyCodeLine{92     \mbox{\hyperlink{structtraccc_1_1collection__types_ab1b46d2f1f58a16bde873c1aa3f4557d}{traccc::spacepoint\_collection\_types::host}}\& spacepoints\_per\_event =}
\DoxyCodeLine{93         reader\_output.spacepoints;}
\DoxyCodeLine{94 }
\DoxyCodeLine{95     \textcolor{comment}{/*-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{96 \textcolor{comment}{      TRACCC seeding}}
\DoxyCodeLine{97 \textcolor{comment}{      -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/*/}}
\DoxyCodeLine{98 }
\DoxyCodeLine{99     \textcolor{keyword}{auto} internal\_spacepoints\_per\_event = sb(spacepoints\_per\_event);}
\DoxyCodeLine{100     \textcolor{keyword}{auto} seeds = sf(spacepoints\_per\_event, internal\_spacepoints\_per\_event);}
\DoxyCodeLine{101 }
\DoxyCodeLine{102     \textcolor{comment}{/*-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{103 \textcolor{comment}{      ACTS seeding}}
\DoxyCodeLine{104 \textcolor{comment}{      -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/*/}}
\DoxyCodeLine{105 }
\DoxyCodeLine{106     \textcolor{comment}{// copy traccc::spacepoint into SpacePoint}}
\DoxyCodeLine{107     std::vector<const SpacePoint*> spVec;}
\DoxyCodeLine{108     \textcolor{keywordflow}{for} (\textcolor{keyword}{auto}\& sp : spacepoints\_per\_event) \{}
\DoxyCodeLine{109         \mbox{\hyperlink{structSpacePoint}{SpacePoint}}* acts\_sp =}
\DoxyCodeLine{110             \textcolor{keyword}{new} \mbox{\hyperlink{structSpacePoint}{SpacePoint}}\{\textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{float}\textcolor{keyword}{>}(sp.global[0]),}
\DoxyCodeLine{111                            \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{float}\textcolor{keyword}{>}(sp.global[1]),}
\DoxyCodeLine{112                            \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{float}\textcolor{keyword}{>}(sp.global[2]),}
\DoxyCodeLine{113                            std::hypot(\textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{float}\textcolor{keyword}{>}(sp.global[0]),}
\DoxyCodeLine{114                                       \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{float}\textcolor{keyword}{>}(sp.global[1])),}
\DoxyCodeLine{115                            0,}
\DoxyCodeLine{116                            0,}
\DoxyCodeLine{117                            0\};}
\DoxyCodeLine{118         spVec.push\_back(acts\_sp);}
\DoxyCodeLine{119     \}}
\DoxyCodeLine{120 }
\DoxyCodeLine{121     \textcolor{comment}{// spacepoint equality check}}
\DoxyCodeLine{122     \textcolor{keywordtype}{int} n\_sp\_match = 0;}
\DoxyCodeLine{123     \textcolor{keywordflow}{for} (\textcolor{keyword}{auto}\& sp : spacepoints\_per\_event) \{}
\DoxyCodeLine{124         \textcolor{keywordflow}{if} (std::find(spVec.begin(), spVec.end(), sp) != spVec.end()) \{}
\DoxyCodeLine{125             n\_sp\_match++;}
\DoxyCodeLine{126         \}}
\DoxyCodeLine{127     \}}
\DoxyCodeLine{128     EXPECT\_EQ(spacepoints\_per\_event.size(), n\_sp\_match);}
\DoxyCodeLine{129     EXPECT\_EQ(spVec.size(), n\_sp\_match);}
\DoxyCodeLine{130 }
\DoxyCodeLine{131     Acts::SeedFinderConfig<SpacePoint> acts\_config;}
\DoxyCodeLine{132 }
\DoxyCodeLine{133     \textcolor{comment}{// silicon detector max}}
\DoxyCodeLine{134     acts\_config.phiMin = traccc\_config.\mbox{\hyperlink{structtraccc_1_1seedfinder__config_a4a63d739b000f4c3489acfa7428307ac}{phiMin}};}
\DoxyCodeLine{135     acts\_config.phiMax = traccc\_config.\mbox{\hyperlink{structtraccc_1_1seedfinder__config_ac2f98dced39f7a59e40ebb9a045844c3}{phiMax}};}
\DoxyCodeLine{136 }
\DoxyCodeLine{137     acts\_config.rMin = traccc\_config.\mbox{\hyperlink{structtraccc_1_1seedfinder__config_a006965217cbc55bee8716dfe662843e1}{rMin}};}
\DoxyCodeLine{138     acts\_config.rMax = traccc\_config.\mbox{\hyperlink{structtraccc_1_1seedfinder__config_a2a1609b903cdbc081dc18e29952d63db}{rMax}};}
\DoxyCodeLine{139     acts\_config.deltaRMin = traccc\_config.\mbox{\hyperlink{structtraccc_1_1seedfinder__config_a3912be37d553351d00b1e746ace137d1}{deltaRMin}};}
\DoxyCodeLine{140     acts\_config.deltaRMinTopSP = traccc\_config.\mbox{\hyperlink{structtraccc_1_1seedfinder__config_a3912be37d553351d00b1e746ace137d1}{deltaRMin}};}
\DoxyCodeLine{141     acts\_config.deltaRMinBottomSP = traccc\_config.\mbox{\hyperlink{structtraccc_1_1seedfinder__config_a3912be37d553351d00b1e746ace137d1}{deltaRMin}};}
\DoxyCodeLine{142     acts\_config.deltaRMax = traccc\_config.\mbox{\hyperlink{structtraccc_1_1seedfinder__config_aa9e8949c92ef98aaa6e909bde5f8a5a1}{deltaRMax}};}
\DoxyCodeLine{143     acts\_config.deltaRMaxTopSP = traccc\_config.\mbox{\hyperlink{structtraccc_1_1seedfinder__config_aa9e8949c92ef98aaa6e909bde5f8a5a1}{deltaRMax}};}
\DoxyCodeLine{144     acts\_config.deltaRMaxBottomSP = traccc\_config.\mbox{\hyperlink{structtraccc_1_1seedfinder__config_aa9e8949c92ef98aaa6e909bde5f8a5a1}{deltaRMax}};}
\DoxyCodeLine{145     acts\_config.collisionRegionMin = traccc\_config.\mbox{\hyperlink{structtraccc_1_1seedfinder__config_af3ea99cbcf46f390ff7d51cfdb88b7d8}{collisionRegionMin}};}
\DoxyCodeLine{146     acts\_config.collisionRegionMax = traccc\_config.\mbox{\hyperlink{structtraccc_1_1seedfinder__config_a1fe9c1f0e4b405a1c9acf54a9ee19f99}{collisionRegionMax}};}
\DoxyCodeLine{147 }
\DoxyCodeLine{148     acts\_config.zMin = traccc\_config.\mbox{\hyperlink{structtraccc_1_1seedfinder__config_a98a8475254458e62bba1bdec3f3c0099}{zMin}};}
\DoxyCodeLine{149     acts\_config.zMax = traccc\_config.\mbox{\hyperlink{structtraccc_1_1seedfinder__config_a7499f1e070486e15b9dc10f80fe7c169}{zMax}};}
\DoxyCodeLine{150     acts\_config.maxSeedsPerSpM = traccc\_config.\mbox{\hyperlink{structtraccc_1_1seedfinder__config_a9a5987659fbb5119029bf9a8c58bcca4}{maxSeedsPerSpM}};}
\DoxyCodeLine{151 }
\DoxyCodeLine{152     \textcolor{comment}{// 2.7 eta}}
\DoxyCodeLine{153     acts\_config.cotThetaMax = traccc\_config.\mbox{\hyperlink{structtraccc_1_1seedfinder__config_a5233cec7d37198f52cce6a2bf39317c2}{cotThetaMax}};}
\DoxyCodeLine{154     acts\_config.sigmaScattering = traccc\_config.\mbox{\hyperlink{structtraccc_1_1seedfinder__config_a599852ee91a92905c57cd532b5659d1c}{sigmaScattering}};}
\DoxyCodeLine{155     acts\_config.maxPtScattering = traccc\_config.\mbox{\hyperlink{structtraccc_1_1seedfinder__config_ad046300d5d4e45fbc90bf5fdc767c436}{maxPtScattering}};}
\DoxyCodeLine{156 }
\DoxyCodeLine{157     acts\_config.minPt = traccc\_config.\mbox{\hyperlink{structtraccc_1_1seedfinder__config_a625be57a22c39463dba2d0e0ee188b5d}{minPt}};}
\DoxyCodeLine{158     acts\_config.bFieldInZ = traccc\_config.\mbox{\hyperlink{structtraccc_1_1seedfinder__config_af3b9be46bd90bb968da94db6ac36bd45}{bFieldInZ}};}
\DoxyCodeLine{159 }
\DoxyCodeLine{160     acts\_config.beamPos[0] = traccc\_config.\mbox{\hyperlink{structtraccc_1_1seedfinder__config_ad5a0905e9ce28b8501fa21bad52520bd}{beamPos}}[0];}
\DoxyCodeLine{161     acts\_config.beamPos[1] = traccc\_config.\mbox{\hyperlink{structtraccc_1_1seedfinder__config_ad5a0905e9ce28b8501fa21bad52520bd}{beamPos}}[1];}
\DoxyCodeLine{162 }
\DoxyCodeLine{163     acts\_config.impactMax = traccc\_config.\mbox{\hyperlink{structtraccc_1_1seedfinder__config_a3b39e17f160186812ce1444df674751e}{impactMax}};}
\DoxyCodeLine{164 }
\DoxyCodeLine{165     acts\_config.sigmaError = traccc\_config.\mbox{\hyperlink{structtraccc_1_1seedfinder__config_a619d624b1cae8214ca9e13d6f42a1610}{sigmaError}};}
\DoxyCodeLine{166 }
\DoxyCodeLine{167     \textcolor{keyword}{auto} bottomBinFinder = std::make\_shared<Acts::BinFinder<SpacePoint>>(}
\DoxyCodeLine{168         Acts::BinFinder<SpacePoint>());}
\DoxyCodeLine{169     \textcolor{keyword}{auto} topBinFinder = std::make\_shared<Acts::BinFinder<SpacePoint>>(}
\DoxyCodeLine{170         Acts::BinFinder<SpacePoint>());}
\DoxyCodeLine{171     Acts::SeedFilterConfig sfconf;}
\DoxyCodeLine{172     sfconf.maxSeedsPerSpM = \mbox{\hyperlink{structtraccc_1_1seedfilter__config}{traccc::seedfilter\_config}}().\mbox{\hyperlink{structtraccc_1_1seedfilter__config_a928d6073c4227858bb5235383378a9c5}{maxSeedsPerSpM}};}
\DoxyCodeLine{173 }
\DoxyCodeLine{174     \mbox{\hyperlink{classActs_1_1ATLASCuts}{Acts::ATLASCuts<SpacePoint>}} atlasCuts = \mbox{\hyperlink{classActs_1_1ATLASCuts}{Acts::ATLASCuts<SpacePoint>}}();}
\DoxyCodeLine{175     acts\_config.seedFilter = std::make\_unique<Acts::SeedFilter<SpacePoint>>(}
\DoxyCodeLine{176         Acts::SeedFilter<SpacePoint>(sfconf, \&atlasCuts));}
\DoxyCodeLine{177     Acts::SeedFinder<SpacePoint> a(acts\_config);}
\DoxyCodeLine{178 }
\DoxyCodeLine{179     \textcolor{comment}{// covariance tool, sets covariances per spacepoint as required}}
\DoxyCodeLine{180     \textcolor{keyword}{auto} ct = [=](\textcolor{keyword}{const} \mbox{\hyperlink{structSpacePoint}{SpacePoint}}\& sp, float, float,}
\DoxyCodeLine{181                   float) -\/> std::pair<Acts::Vector3, Acts::Vector2> \{}
\DoxyCodeLine{182         Acts::Vector3 position(sp.\mbox{\hyperlink{structSpacePoint_a88a94622e18fd3d533b673a1c1c0a519}{x}}(), sp.\mbox{\hyperlink{structSpacePoint_a606c0cf443bf33fb9bc796bb77e88671}{y}}(), sp.\mbox{\hyperlink{structSpacePoint_a8612a490c7e498172d8291c3c6723e9e}{z}}());}
\DoxyCodeLine{183         Acts::Vector2 covariance(sp.\mbox{\hyperlink{structSpacePoint_a5c0fec4c052909d78b657aad2c3bb668}{varianceR}}, sp.\mbox{\hyperlink{structSpacePoint_abc1ed04a196699738ee5123b083d6a48}{varianceZ}});}
\DoxyCodeLine{184         \textcolor{keywordflow}{return} std::make\_pair(position, covariance);}
\DoxyCodeLine{185     \};}
\DoxyCodeLine{186 }
\DoxyCodeLine{187     \textcolor{comment}{// setup spacepoint grid config}}
\DoxyCodeLine{188     Acts::SpacePointGridConfig gridConf;}
\DoxyCodeLine{189 }
\DoxyCodeLine{190     gridConf.bFieldInZ = acts\_config.bFieldInZ;}
\DoxyCodeLine{191     gridConf.minPt = acts\_config.minPt;}
\DoxyCodeLine{192     gridConf.rMax = acts\_config.rMax;}
\DoxyCodeLine{193     gridConf.zMax = acts\_config.zMax;}
\DoxyCodeLine{194     gridConf.zMin = acts\_config.zMin;}
\DoxyCodeLine{195     gridConf.deltaRMax = acts\_config.deltaRMax;}
\DoxyCodeLine{196     gridConf.cotThetaMax = acts\_config.cotThetaMax;}
\DoxyCodeLine{197     gridConf.impactMax = acts\_config.impactMax;}
\DoxyCodeLine{198     gridConf.phiMin = acts\_config.phiMin;}
\DoxyCodeLine{199     gridConf.phiMax = acts\_config.phiMax;}
\DoxyCodeLine{200     gridConf.phiBinDeflectionCoverage = traccc\_config.\mbox{\hyperlink{structtraccc_1_1seedfinder__config_a50c228e8b2e123f1e09416c1ea358412}{phiBinDeflectionCoverage}};}
\DoxyCodeLine{201 }
\DoxyCodeLine{202     \textcolor{comment}{// create grid with bin sizes according to the configured geometry}}
\DoxyCodeLine{203     std::unique\_ptr<Acts::SpacePointGrid<SpacePoint>> grid =}
\DoxyCodeLine{204         Acts::SpacePointGridCreator::createGrid<SpacePoint>(gridConf);}
\DoxyCodeLine{205 }
\DoxyCodeLine{206     \textcolor{comment}{// Currently traccc is using grid2. check if acts grid dimensionality is the}}
\DoxyCodeLine{207     \textcolor{comment}{// same}}
\DoxyCodeLine{208     EXPECT\_EQ(grid-\/>numLocalBins().size(), 2);}
\DoxyCodeLine{209 }
\DoxyCodeLine{210     detray::axis::circular axis0 = internal\_spacepoints\_per\_event.axis\_p0();}
\DoxyCodeLine{211     detray::axis::regular axis1 = internal\_spacepoints\_per\_event.axis\_p1();}
\DoxyCodeLine{212 }
\DoxyCodeLine{213     \textcolor{keyword}{auto} acts\_axis0 = grid-\/>axes()[0];}
\DoxyCodeLine{214     \textcolor{keyword}{auto} acts\_axis1 = grid-\/>axes()[1];}
\DoxyCodeLine{215 }
\DoxyCodeLine{216     EXPECT\_EQ(axis0.bins(), acts\_axis0-\/>getNBins());}
\DoxyCodeLine{217     EXPECT\_EQ(axis1.bins(), acts\_axis1-\/>getNBins());}
\DoxyCodeLine{218 }
\DoxyCodeLine{219     \textcolor{keyword}{auto} axis0\_borders = axis0.all\_borders();}
\DoxyCodeLine{220     \textcolor{keyword}{auto} axis1\_borders = axis1.all\_borders();}
\DoxyCodeLine{221     \textcolor{keyword}{auto} acts\_axis0\_borders = acts\_axis0-\/>getBinEdges();}
\DoxyCodeLine{222     \textcolor{keyword}{auto} acts\_axis1\_borders = acts\_axis1-\/>getBinEdges();}
\DoxyCodeLine{223 }
\DoxyCodeLine{224     EXPECT\_EQ(axis0\_borders.size(), axis0.bins() + 1);}
\DoxyCodeLine{225     EXPECT\_EQ(axis1\_borders.size(), axis1.bins() + 1);}
\DoxyCodeLine{226 }
\DoxyCodeLine{227     EXPECT\_EQ(axis0\_borders.size(), acts\_axis0\_borders.size());}
\DoxyCodeLine{228     EXPECT\_EQ(axis1\_borders.size(), acts\_axis1\_borders.size());}
\DoxyCodeLine{229 }
\DoxyCodeLine{230     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} i = 0; i < axis0.bins() + 1; ++i) \{}
\DoxyCodeLine{231         EXPECT\_NEAR(axis0\_borders[i], acts\_axis0\_borders[i], 0.01);}
\DoxyCodeLine{232     \}}
\DoxyCodeLine{233     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} i = 0; i < axis1.bins() + 1; ++i) \{}
\DoxyCodeLine{234         EXPECT\_NEAR(axis1\_borders[i], acts\_axis1\_borders[i], 0.01);}
\DoxyCodeLine{235     \}}
\DoxyCodeLine{236 }
\DoxyCodeLine{237     \textcolor{keyword}{auto} spGroup = Acts::BinnedSPGroup<SpacePoint>(}
\DoxyCodeLine{238         spVec.begin(), spVec.end(), ct, bottomBinFinder, topBinFinder,}
\DoxyCodeLine{239         std::move(grid), Acts::Extent(), acts\_config);}
\DoxyCodeLine{240 }
\DoxyCodeLine{241     \textcolor{keyword}{auto} groupIt = spGroup.begin();}
\DoxyCodeLine{242     \textcolor{keyword}{auto} endOfGroups = spGroup.end();}
\DoxyCodeLine{243 }
\DoxyCodeLine{244     \textcolor{comment}{// Run the ACTS seeding}}
\DoxyCodeLine{245     std::vector<Acts::Seed<SpacePoint>> seedVector;}
\DoxyCodeLine{246     \textcolor{keywordflow}{for} (; !(groupIt == endOfGroups); ++groupIt) \{}
\DoxyCodeLine{247         \textcolor{keyword}{auto} seed\_group = a.createSeedsForGroup(}
\DoxyCodeLine{248             groupIt.bottom(), groupIt.middle(), groupIt.top());}
\DoxyCodeLine{249         seedVector.insert(seedVector.end(), seed\_group.begin(),}
\DoxyCodeLine{250                           seed\_group.end());}
\DoxyCodeLine{251     \}}
\DoxyCodeLine{252 }
\DoxyCodeLine{253     \textcolor{comment}{// Count the number of matching seeds}}
\DoxyCodeLine{254     \textcolor{comment}{// and push\_back seed into sorted\_seedVector}}
\DoxyCodeLine{255     std::vector<Acts::Seed<SpacePoint>> sorted\_seedVector;}
\DoxyCodeLine{256     \textcolor{keywordtype}{int} n\_seed\_match = 0;}
\DoxyCodeLine{257     \textcolor{keywordflow}{for} (\textcolor{keyword}{auto}\& seed : seeds) \{}
\DoxyCodeLine{258         \textcolor{keyword}{auto} it = std::find\_if(}
\DoxyCodeLine{259             seedVector.begin(), seedVector.end(), [\&](\textcolor{keyword}{auto} acts\_seed) \{}
\DoxyCodeLine{260                 auto traccc\_spB = spacepoints\_per\_event.at(seed.spB\_link);}
\DoxyCodeLine{261                 auto traccc\_spM = spacepoints\_per\_event.at(seed.spM\_link);}
\DoxyCodeLine{262                 auto traccc\_spT = spacepoints\_per\_event.at(seed.spT\_link);}
\DoxyCodeLine{263 }
\DoxyCodeLine{264                 auto\& triplets = acts\_seed.sp();}
\DoxyCodeLine{265                 auto\& acts\_spB = triplets[0];}
\DoxyCodeLine{266                 auto\& acts\_spM = triplets[1];}
\DoxyCodeLine{267                 auto\& acts\_spT = triplets[2];}
\DoxyCodeLine{268 }
\DoxyCodeLine{269                 if (acts\_spB == traccc\_spB \&\& acts\_spM == traccc\_spM \&\&}
\DoxyCodeLine{270                     acts\_spT == traccc\_spT) \{}
\DoxyCodeLine{271                     return true;}
\DoxyCodeLine{272                 \}}
\DoxyCodeLine{273 }
\DoxyCodeLine{274                 \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{275             \});}
\DoxyCodeLine{276 }
\DoxyCodeLine{277         \textcolor{keywordflow}{if} (it != seedVector.end()) \{}
\DoxyCodeLine{278             sorted\_seedVector.push\_back(*it);}
\DoxyCodeLine{279             n\_seed\_match++;}
\DoxyCodeLine{280         \}}
\DoxyCodeLine{281     \}}
\DoxyCodeLine{282     seedVector = sorted\_seedVector;}
\DoxyCodeLine{283 }
\DoxyCodeLine{284     \textcolor{keywordtype}{float} seed\_match\_ratio = float(n\_seed\_match) / seeds.size();}
\DoxyCodeLine{285 }
\DoxyCodeLine{286     \textcolor{comment}{// Ensure that ACTS and traccc give the same result}}
\DoxyCodeLine{287     \textcolor{comment}{// @TODO Uncomment the line below once acts-\/project/acts\#2132 is merged}}
\DoxyCodeLine{288     \textcolor{comment}{// EXPECT\_EQ(seeds.size(), seedVector.size());}}
\DoxyCodeLine{289     EXPECT\_NEAR(seeds.size(), seedVector.size(), seeds.size() * 0.001);}
\DoxyCodeLine{290     EXPECT\_TRUE(seed\_match\_ratio > 0.999);}
\DoxyCodeLine{291 \}}

\end{DoxyCode}


References traccc\+::seedfinder\+\_\+config\+::beam\+Pos, traccc\+::seedfinder\+\_\+config\+::b\+Field\+InZ, traccc\+::seedfinder\+\_\+config\+::collision\+Region\+Max, traccc\+::seedfinder\+\_\+config\+::collision\+Region\+Min, traccc\+::seedfinder\+\_\+config\+::cot\+Theta\+Max, traccc\+::csv, traccc\+::seedfinder\+\_\+config\+::delta\+R\+Max, traccc\+::seedfinder\+\_\+config\+::delta\+R\+Min, detector\+\_\+file, event, hits\+\_\+dir, traccc\+::seedfinder\+\_\+config\+::impact\+Max, traccc\+::seedfinder\+\_\+config\+::max\+Pt\+Scattering, traccc\+::seedfinder\+\_\+config\+::max\+Seeds\+Per\+SpM, traccc\+::seedfilter\+\_\+config\+::max\+Seeds\+Per\+SpM, traccc\+::seedfinder\+\_\+config\+::min\+Pt, traccc\+::seedfinder\+\_\+config\+::phi\+Bin\+Deflection\+Coverage, traccc\+::seedfinder\+\_\+config\+::phi\+Max, traccc\+::seedfinder\+\_\+config\+::phi\+Min, traccc\+::io\+::read\+\_\+geometry(), traccc\+::io\+::read\+\_\+spacepoints(), traccc\+::seedfinder\+\_\+config\+::r\+Max, traccc\+::seedfinder\+\_\+config\+::r\+Min, traccc\+::seedfinder\+\_\+config\+::sigma\+Error, traccc\+::seedfinder\+\_\+config\+::sigma\+Scattering, traccc\+::io\+::spacepoint\+\_\+reader\+\_\+output\+::spacepoints, Space\+Point\+::varianceR, Space\+Point\+::varianceZ, Space\+Point\+::x(), Space\+Point\+::y(), Space\+Point\+::z(), traccc\+::seedfinder\+\_\+config\+::z\+Max, and traccc\+::seedfinder\+\_\+config\+::z\+Min.

