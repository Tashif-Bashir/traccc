\hypertarget{namespacetraccc_1_1alpaka}{}\doxysection{traccc\+::alpaka Namespace Reference}
\label{namespacetraccc_1_1alpaka}\index{traccc::alpaka@{traccc::alpaka}}
\doxysubsection*{Classes}
\begin{DoxyCompactItemize}
\item 
struct \mbox{\hyperlink{structtraccc_1_1alpaka_1_1CountGridCapacityKernel}{Count\+Grid\+Capacity\+Kernel}}
\item 
struct \mbox{\hyperlink{structtraccc_1_1alpaka_1_1PopulateGridKernel}{Populate\+Grid\+Kernel}}
\item 
struct \mbox{\hyperlink{structtraccc_1_1alpaka_1_1PrefixSumBuffKernel}{Prefix\+Sum\+Buff\+Kernel}}
\item 
class \mbox{\hyperlink{classtraccc_1_1alpaka_1_1spacepoint__binning}{spacepoint\+\_\+binning}}
\begin{DoxyCompactList}\small\item\em Spacepoing binning executed on an Alpaka accelerator. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsection*{Typedefs}
\begin{DoxyCompactItemize}
\item 
using \mbox{\hyperlink{namespacetraccc_1_1alpaka_a57a39a983eec70054cec3d3d3ad15b27}{Dim}} = \+::alpaka\+::\+Dim\+Int$<$ 1 $>$
\item 
using \mbox{\hyperlink{namespacetraccc_1_1alpaka_ab2e71b3d82c5e5199af5acf0ce64625a}{Idx}} = uint32\+\_\+t
\item 
using \mbox{\hyperlink{namespacetraccc_1_1alpaka_a725b9a6e2b71ce336e23e2690c9ef844}{Work\+Div}} = \+::alpaka\+::\+Work\+Div\+Members$<$ \mbox{\hyperlink{namespacetraccc_1_1alpaka_a57a39a983eec70054cec3d3d3ad15b27}{Dim}}, \mbox{\hyperlink{namespacetraccc_1_1alpaka_ab2e71b3d82c5e5199af5acf0ce64625a}{Idx}} $>$
\end{DoxyCompactItemize}
\doxysubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
{\footnotesize template$<$typename Acc , typename Queue , typename Buf\+Acc $>$ }\\vecmem\+::data\+::vector\+\_\+buffer$<$ \mbox{\hyperlink{namespacetraccc_1_1device_aec5610a925cef95697843cc4e8b38bcb}{device\+::prefix\+\_\+sum\+\_\+element\+\_\+t}} $>$ \mbox{\hyperlink{namespacetraccc_1_1alpaka_a318644685d595428ae8c6fc02728b694}{make\+\_\+prefix\+\_\+sum\+\_\+buff}} (const std\+::vector$<$ \mbox{\hyperlink{namespacetraccc_1_1device_ade298ff55a1bdb496e412262cdb66433}{device\+::prefix\+\_\+sum\+\_\+size\+\_\+t}} $>$ \&sizes, vecmem\+::copy \&copy, const \mbox{\hyperlink{structtraccc_1_1memory__resource}{traccc\+::memory\+\_\+resource}} \&mr, Queue \&queue, Buf\+Acc \&buf\+Acc)
\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
T\+R\+A\+C\+CC library, part of the A\+C\+TS project (R\&D line)

(c) 2023 C\+E\+RN for the benefit of the A\+C\+TS project

Mozilla Public License Version 2.\+0 

\doxysubsection{Typedef Documentation}
\mbox{\Hypertarget{namespacetraccc_1_1alpaka_a57a39a983eec70054cec3d3d3ad15b27}\label{namespacetraccc_1_1alpaka_a57a39a983eec70054cec3d3d3ad15b27}} 
\index{traccc::alpaka@{traccc::alpaka}!Dim@{Dim}}
\index{Dim@{Dim}!traccc::alpaka@{traccc::alpaka}}
\doxysubsubsection{\texorpdfstring{Dim}{Dim}}
{\footnotesize\ttfamily using \mbox{\hyperlink{namespacetraccc_1_1alpaka_a57a39a983eec70054cec3d3d3ad15b27}{traccc\+::alpaka\+::\+Dim}} = typedef \+::alpaka\+::\+Dim\+Int$<$1$>$}

\mbox{\Hypertarget{namespacetraccc_1_1alpaka_ab2e71b3d82c5e5199af5acf0ce64625a}\label{namespacetraccc_1_1alpaka_ab2e71b3d82c5e5199af5acf0ce64625a}} 
\index{traccc::alpaka@{traccc::alpaka}!Idx@{Idx}}
\index{Idx@{Idx}!traccc::alpaka@{traccc::alpaka}}
\doxysubsubsection{\texorpdfstring{Idx}{Idx}}
{\footnotesize\ttfamily using \mbox{\hyperlink{namespacetraccc_1_1alpaka_ab2e71b3d82c5e5199af5acf0ce64625a}{traccc\+::alpaka\+::\+Idx}} = typedef uint32\+\_\+t}

\mbox{\Hypertarget{namespacetraccc_1_1alpaka_a725b9a6e2b71ce336e23e2690c9ef844}\label{namespacetraccc_1_1alpaka_a725b9a6e2b71ce336e23e2690c9ef844}} 
\index{traccc::alpaka@{traccc::alpaka}!WorkDiv@{WorkDiv}}
\index{WorkDiv@{WorkDiv}!traccc::alpaka@{traccc::alpaka}}
\doxysubsubsection{\texorpdfstring{WorkDiv}{WorkDiv}}
{\footnotesize\ttfamily using \mbox{\hyperlink{namespacetraccc_1_1alpaka_a725b9a6e2b71ce336e23e2690c9ef844}{traccc\+::alpaka\+::\+Work\+Div}} = typedef \+::alpaka\+::\+Work\+Div\+Members$<$\mbox{\hyperlink{namespacetraccc_1_1alpaka_a57a39a983eec70054cec3d3d3ad15b27}{Dim}}, \mbox{\hyperlink{namespacetraccc_1_1alpaka_ab2e71b3d82c5e5199af5acf0ce64625a}{Idx}}$>$}



\doxysubsection{Function Documentation}
\mbox{\Hypertarget{namespacetraccc_1_1alpaka_a318644685d595428ae8c6fc02728b694}\label{namespacetraccc_1_1alpaka_a318644685d595428ae8c6fc02728b694}} 
\index{traccc::alpaka@{traccc::alpaka}!make\_prefix\_sum\_buff@{make\_prefix\_sum\_buff}}
\index{make\_prefix\_sum\_buff@{make\_prefix\_sum\_buff}!traccc::alpaka@{traccc::alpaka}}
\doxysubsubsection{\texorpdfstring{make\_prefix\_sum\_buff()}{make\_prefix\_sum\_buff()}}
{\footnotesize\ttfamily template$<$typename Acc , typename Queue , typename Buf\+Acc $>$ \\
vecmem\+::data\+::vector\+\_\+buffer$<$ \mbox{\hyperlink{namespacetraccc_1_1device_aec5610a925cef95697843cc4e8b38bcb}{device\+::prefix\+\_\+sum\+\_\+element\+\_\+t}} $>$ traccc\+::alpaka\+::make\+\_\+prefix\+\_\+sum\+\_\+buff (\begin{DoxyParamCaption}\item[{const std\+::vector$<$ \mbox{\hyperlink{namespacetraccc_1_1device_ade298ff55a1bdb496e412262cdb66433}{device\+::prefix\+\_\+sum\+\_\+size\+\_\+t}} $>$ \&}]{sizes,  }\item[{vecmem\+::copy \&}]{copy,  }\item[{const \mbox{\hyperlink{structtraccc_1_1memory__resource}{traccc\+::memory\+\_\+resource}} \&}]{mr,  }\item[{Queue \&}]{queue,  }\item[{Buf\+Acc \&}]{buf\+Acc }\end{DoxyParamCaption})}

Function that returns vector of prefix\+\_\+sum\+\_\+element\+\_\+t for accessing a jagged vector\textquotesingle{}s elements in device Example\+: Jagged vector with sizes = \{3,2,1,...\} Returns\+: \{\mbox{[}0,0\mbox{]}, \mbox{[}0,1\mbox{]}, \mbox{[}0,2\mbox{]}, \mbox{[}1,0\mbox{]}, \mbox{[}1,1\mbox{]}, \mbox{[}2,0\mbox{]}, ...\}


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em sizes} & The sizes of the jagged vector \\
\hline
 & {\em copy} & A \char`\"{}copy object\char`\"{} capable of dealing with the view \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
A vector buffer of prefix\+\_\+sum element 
\end{DoxyReturn}

\begin{DoxyCode}{0}
\DoxyCodeLine{38                                                                    \{}
\DoxyCodeLine{39 }
\DoxyCodeLine{40     \textcolor{keyword}{const} \mbox{\hyperlink{namespacetraccc_1_1device_a1c67d5b48697c4ad899f28ae69120e33}{device::prefix\_sum\_buffer\_t}} make\_sum\_result =}
\DoxyCodeLine{41         \mbox{\hyperlink{namespacetraccc_1_1device_a782823d57c341df346a3589010537dbf}{device::make\_prefix\_sum\_buffer}}(sizes, copy, mr);}
\DoxyCodeLine{42     \textcolor{keyword}{const} vecmem::data::vector\_view<const device::prefix\_sum\_size\_t>}
\DoxyCodeLine{43         sizes\_sum\_view = make\_sum\_result.view;}
\DoxyCodeLine{44     \textcolor{keyword}{const} \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} totalSize = make\_sum\_result.totalSize;}
\DoxyCodeLine{45 }
\DoxyCodeLine{46     \textcolor{comment}{// Create buffer and view objects for prefix sum vector}}
\DoxyCodeLine{47     vecmem::data::vector\_buffer<device::prefix\_sum\_element\_t> prefix\_sum\_buff(}
\DoxyCodeLine{48         totalSize, mr.\mbox{\hyperlink{structtraccc_1_1memory__resource_a9f1136a4fdab877dd1bbd1a2996e2149}{main}});}
\DoxyCodeLine{49     copy.setup(prefix\_sum\_buff);}
\DoxyCodeLine{50 }
\DoxyCodeLine{51     \textcolor{comment}{// Setup Alpaka}}
\DoxyCodeLine{52     \textcolor{keyword}{auto} \textcolor{keyword}{const} n = ::alpaka::getExtentProduct(bufAcc);}
\DoxyCodeLine{53     \textcolor{keyword}{auto} \textcolor{keyword}{const} deviceProperties =}
\DoxyCodeLine{54         ::alpaka::getAccDevProps<Acc>(::alpaka::getDevByIdx<Acc>(0u));}
\DoxyCodeLine{55     \textcolor{keyword}{auto} \textcolor{keyword}{const} maxThreadsPerBlock = deviceProperties.m\_blockThreadExtentMax[0];}
\DoxyCodeLine{56 }
\DoxyCodeLine{57     \textcolor{comment}{// Fixed number of threads per block.}}
\DoxyCodeLine{58     \textcolor{keyword}{auto} \textcolor{keyword}{const} threadsPerBlock = maxThreadsPerBlock;}
\DoxyCodeLine{59     \textcolor{keyword}{auto} \textcolor{keyword}{const} blocksPerGrid = (n + threadsPerBlock -\/ 1) / threadsPerBlock;}
\DoxyCodeLine{60     \textcolor{keyword}{auto} \textcolor{keyword}{const} elementsPerThread = 1u;}
\DoxyCodeLine{61     \textcolor{keyword}{auto} workDiv = \mbox{\hyperlink{namespacetraccc_1_1alpaka_a725b9a6e2b71ce336e23e2690c9ef844}{WorkDiv}}\{blocksPerGrid, threadsPerBlock, elementsPerThread\};}
\DoxyCodeLine{62 }
\DoxyCodeLine{63     \textcolor{comment}{// Fill the prefix sum vector}}
\DoxyCodeLine{64     \textcolor{keyword}{auto} data\_prefix\_sum\_buff = \mbox{\hyperlink{namespacetraccc_a503d2d50b981602cbc71693ad215b298}{vecmem::get\_data}}(prefix\_sum\_buff);}
\DoxyCodeLine{65 }
\DoxyCodeLine{66     ::alpaka::exec<Acc>(queue, workDiv, PrefixSumBuffKernel\{\}, sizes\_sum\_view,}
\DoxyCodeLine{67                         data\_prefix\_sum\_buff);}
\DoxyCodeLine{68     ::alpaka::wait(queue);}
\DoxyCodeLine{69 }
\DoxyCodeLine{70     \textcolor{keywordflow}{return} prefix\_sum\_buff;}
\DoxyCodeLine{71 \}}

\end{DoxyCode}


References traccc\+::get\+\_\+data(), traccc\+::memory\+\_\+resource\+::main, traccc\+::device\+::make\+\_\+prefix\+\_\+sum\+\_\+buffer(), traccc\+::device\+::prefix\+\_\+sum\+\_\+buffer\+::total\+Size, and traccc\+::device\+::prefix\+\_\+sum\+\_\+buffer\+::view.

