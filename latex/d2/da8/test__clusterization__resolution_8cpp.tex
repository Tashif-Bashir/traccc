\hypertarget{test__clusterization__resolution_8cpp}{}\doxysection{tests/cpu/test\+\_\+clusterization\+\_\+resolution.cpp File Reference}
\label{test__clusterization__resolution_8cpp}\index{tests/cpu/test\_clusterization\_resolution.cpp@{tests/cpu/test\_clusterization\_resolution.cpp}}
{\ttfamily \#include \char`\"{}traccc/clusterization/clusterization\+\_\+algorithm.\+hpp\char`\"{}}\newline
{\ttfamily \#include \char`\"{}traccc/clusterization/spacepoint\+\_\+formation.\+hpp\char`\"{}}\newline
{\ttfamily \#include \char`\"{}traccc/io/read\+\_\+cells.\+hpp\char`\"{}}\newline
{\ttfamily \#include \char`\"{}traccc/io/read\+\_\+digitization\+\_\+config.\+hpp\char`\"{}}\newline
{\ttfamily \#include \char`\"{}traccc/io/read\+\_\+geometry.\+hpp\char`\"{}}\newline
{\ttfamily \#include \char`\"{}traccc/io/read\+\_\+spacepoints.\+hpp\char`\"{}}\newline
{\ttfamily \#include $<$vecmem/memory/host\+\_\+memory\+\_\+resource.\+hpp$>$}\newline
{\ttfamily \#include $<$gtest/gtest.\+h$>$}\newline
Include dependency graph for test\+\_\+clusterization\+\_\+resolution.\+cpp\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{da/da7/test__clusterization__resolution_8cpp__incl}
\end{center}
\end{figure}
\doxysubsection*{Classes}
\begin{DoxyCompactItemize}
\item 
class \mbox{\hyperlink{classSurfaceBinningTests}{Surface\+Binning\+Tests}}
\end{DoxyCompactItemize}
\doxysubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{test__clusterization__resolution_8cpp_aef5ae14ae1351bb0a0bdbb3d4e946517}{T\+E\+S\+T\+\_\+P}} (\mbox{\hyperlink{classSurfaceBinningTests}{Surface\+Binning\+Tests}}, Run)
\item 
\mbox{\hyperlink{test__clusterization__resolution_8cpp_a6100a6ae2e478fc754b274107def5341}{I\+N\+S\+T\+A\+N\+T\+I\+A\+T\+E\+\_\+\+T\+E\+S\+T\+\_\+\+S\+U\+I\+T\+E\+\_\+P}} (Surface\+Binning\+Validation, \mbox{\hyperlink{classSurfaceBinningTests}{Surface\+Binning\+Tests}}, \+::testing\+::\+Values(std\+::make\+\_\+tuple(\char`\"{}tml\+\_\+detector/trackml-\/detector.\+csv\char`\"{}, \char`\"{}tml\+\_\+detector/default-\/geometric-\/config-\/generic.\+json\char`\"{}, \char`\"{}tml\+\_\+full/single\+\_\+muon/\char`\"{}, 0), std\+::make\+\_\+tuple(\char`\"{}tml\+\_\+detector/trackml-\/detector.\+csv\char`\"{}, \char`\"{}tml\+\_\+detector/default-\/geometric-\/config-\/generic.\+json\char`\"{}, \char`\"{}tml\+\_\+full/single\+\_\+muon/\char`\"{}, 1), std\+::make\+\_\+tuple(\char`\"{}tml\+\_\+detector/trackml-\/detector.\+csv\char`\"{}, \char`\"{}tml\+\_\+detector/default-\/geometric-\/config-\/generic.\+json\char`\"{}, \char`\"{}tml\+\_\+full/single\+\_\+muon/\char`\"{}, 2), std\+::make\+\_\+tuple(\char`\"{}tml\+\_\+detector/trackml-\/detector.\+csv\char`\"{}, \char`\"{}tml\+\_\+detector/default-\/geometric-\/config-\/generic.\+json\char`\"{}, \char`\"{}tml\+\_\+full/single\+\_\+muon/\char`\"{}, 3), std\+::make\+\_\+tuple(\char`\"{}tml\+\_\+detector/trackml-\/detector.\+csv\char`\"{}, \char`\"{}tml\+\_\+detector/default-\/geometric-\/config-\/generic.\+json\char`\"{}, \char`\"{}tml\+\_\+full/single\+\_\+muon/\char`\"{}, 4), std\+::make\+\_\+tuple(\char`\"{}tml\+\_\+detector/trackml-\/detector.\+csv\char`\"{}, \char`\"{}tml\+\_\+detector/default-\/geometric-\/config-\/generic.\+json\char`\"{}, \char`\"{}tml\+\_\+full/single\+\_\+muon/\char`\"{}, 5), std\+::make\+\_\+tuple(\char`\"{}tml\+\_\+detector/trackml-\/detector.\+csv\char`\"{}, \char`\"{}tml\+\_\+detector/default-\/geometric-\/config-\/generic.\+json\char`\"{}, \char`\"{}tml\+\_\+full/single\+\_\+muon/\char`\"{}, 6), std\+::make\+\_\+tuple(\char`\"{}tml\+\_\+detector/trackml-\/detector.\+csv\char`\"{}, \char`\"{}tml\+\_\+detector/default-\/geometric-\/config-\/generic.\+json\char`\"{}, \char`\"{}tml\+\_\+full/single\+\_\+muon/\char`\"{}, 7), std\+::make\+\_\+tuple(\char`\"{}tml\+\_\+detector/trackml-\/detector.\+csv\char`\"{}, \char`\"{}tml\+\_\+detector/default-\/geometric-\/config-\/generic.\+json\char`\"{}, \char`\"{}tml\+\_\+full/single\+\_\+muon/\char`\"{}, 8), std\+::make\+\_\+tuple(\char`\"{}tml\+\_\+detector/trackml-\/detector.\+csv\char`\"{}, \char`\"{}tml\+\_\+detector/default-\/geometric-\/config-\/generic.\+json\char`\"{}, \char`\"{}tml\+\_\+full/single\+\_\+muon/\char`\"{}, 9)))
\end{DoxyCompactItemize}


\doxysubsection{Function Documentation}
\mbox{\Hypertarget{test__clusterization__resolution_8cpp_a6100a6ae2e478fc754b274107def5341}\label{test__clusterization__resolution_8cpp_a6100a6ae2e478fc754b274107def5341}} 
\index{test\_clusterization\_resolution.cpp@{test\_clusterization\_resolution.cpp}!INSTANTIATE\_TEST\_SUITE\_P@{INSTANTIATE\_TEST\_SUITE\_P}}
\index{INSTANTIATE\_TEST\_SUITE\_P@{INSTANTIATE\_TEST\_SUITE\_P}!test\_clusterization\_resolution.cpp@{test\_clusterization\_resolution.cpp}}
\doxysubsubsection{\texorpdfstring{INSTANTIATE\_TEST\_SUITE\_P()}{INSTANTIATE\_TEST\_SUITE\_P()}}
{\footnotesize\ttfamily I\+N\+S\+T\+A\+N\+T\+I\+A\+T\+E\+\_\+\+T\+E\+S\+T\+\_\+\+S\+U\+I\+T\+E\+\_\+P (\begin{DoxyParamCaption}\item[{Surface\+Binning\+Validation}]{,  }\item[{\mbox{\hyperlink{classSurfaceBinningTests}{Surface\+Binning\+Tests}}}]{,  }\item[{\+::testing\+::\+Values(std\+::make\+\_\+tuple(\char`\"{}tml\+\_\+detector/trackml-\/detector.\+csv\char`\"{}, \char`\"{}tml\+\_\+detector/default-\/geometric-\/config-\/generic.\+json\char`\"{}, \char`\"{}tml\+\_\+full/single\+\_\+muon/\char`\"{}, 0), std\+::make\+\_\+tuple(\char`\"{}tml\+\_\+detector/trackml-\/detector.\+csv\char`\"{}, \char`\"{}tml\+\_\+detector/default-\/geometric-\/config-\/generic.\+json\char`\"{}, \char`\"{}tml\+\_\+full/single\+\_\+muon/\char`\"{}, 1), std\+::make\+\_\+tuple(\char`\"{}tml\+\_\+detector/trackml-\/detector.\+csv\char`\"{}, \char`\"{}tml\+\_\+detector/default-\/geometric-\/config-\/generic.\+json\char`\"{}, \char`\"{}tml\+\_\+full/single\+\_\+muon/\char`\"{}, 2), std\+::make\+\_\+tuple(\char`\"{}tml\+\_\+detector/trackml-\/detector.\+csv\char`\"{}, \char`\"{}tml\+\_\+detector/default-\/geometric-\/config-\/generic.\+json\char`\"{}, \char`\"{}tml\+\_\+full/single\+\_\+muon/\char`\"{}, 3), std\+::make\+\_\+tuple(\char`\"{}tml\+\_\+detector/trackml-\/detector.\+csv\char`\"{}, \char`\"{}tml\+\_\+detector/default-\/geometric-\/config-\/generic.\+json\char`\"{}, \char`\"{}tml\+\_\+full/single\+\_\+muon/\char`\"{}, 4), std\+::make\+\_\+tuple(\char`\"{}tml\+\_\+detector/trackml-\/detector.\+csv\char`\"{}, \char`\"{}tml\+\_\+detector/default-\/geometric-\/config-\/generic.\+json\char`\"{}, \char`\"{}tml\+\_\+full/single\+\_\+muon/\char`\"{}, 5), std\+::make\+\_\+tuple(\char`\"{}tml\+\_\+detector/trackml-\/detector.\+csv\char`\"{}, \char`\"{}tml\+\_\+detector/default-\/geometric-\/config-\/generic.\+json\char`\"{}, \char`\"{}tml\+\_\+full/single\+\_\+muon/\char`\"{}, 6), std\+::make\+\_\+tuple(\char`\"{}tml\+\_\+detector/trackml-\/detector.\+csv\char`\"{}, \char`\"{}tml\+\_\+detector/default-\/geometric-\/config-\/generic.\+json\char`\"{}, \char`\"{}tml\+\_\+full/single\+\_\+muon/\char`\"{}, 7), std\+::make\+\_\+tuple(\char`\"{}tml\+\_\+detector/trackml-\/detector.\+csv\char`\"{}, \char`\"{}tml\+\_\+detector/default-\/geometric-\/config-\/generic.\+json\char`\"{}, \char`\"{}tml\+\_\+full/single\+\_\+muon/\char`\"{}, 8), std\+::make\+\_\+tuple(\char`\"{}tml\+\_\+detector/trackml-\/detector.\+csv\char`\"{}, \char`\"{}tml\+\_\+detector/default-\/geometric-\/config-\/generic.\+json\char`\"{}, \char`\"{}tml\+\_\+full/single\+\_\+muon/\char`\"{}, 9))}]{ }\end{DoxyParamCaption})}

\mbox{\Hypertarget{test__clusterization__resolution_8cpp_aef5ae14ae1351bb0a0bdbb3d4e946517}\label{test__clusterization__resolution_8cpp_aef5ae14ae1351bb0a0bdbb3d4e946517}} 
\index{test\_clusterization\_resolution.cpp@{test\_clusterization\_resolution.cpp}!TEST\_P@{TEST\_P}}
\index{TEST\_P@{TEST\_P}!test\_clusterization\_resolution.cpp@{test\_clusterization\_resolution.cpp}}
\doxysubsubsection{\texorpdfstring{TEST\_P()}{TEST\_P()}}
{\footnotesize\ttfamily T\+E\+S\+T\+\_\+P (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classSurfaceBinningTests}{Surface\+Binning\+Tests}}}]{,  }\item[{Run}]{ }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{27                                  \{}
\DoxyCodeLine{28 }
\DoxyCodeLine{29     std::string \mbox{\hyperlink{test__mapper_8cpp_a902d72422a60bd9a079e899a54f552c1}{detector\_file}} = std::get<0>(GetParam());}
\DoxyCodeLine{30     std::string \mbox{\hyperlink{test__mapper_8cpp_a5a453e9bf94f17c28f4cd86724b542a3}{digi\_config\_file}} = std::get<1>(GetParam());}
\DoxyCodeLine{31     std::string data\_dir = std::get<2>(GetParam());}
\DoxyCodeLine{32     \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} \textcolor{keyword}{event} = std::get<3>(GetParam());}
\DoxyCodeLine{33 }
\DoxyCodeLine{34     \textcolor{comment}{// Read the surface transforms}}
\DoxyCodeLine{35     \textcolor{keyword}{auto} surface\_transforms = \mbox{\hyperlink{namespacetraccc_1_1io_a5a6c904c086473a05b85a0bf060bfa8d}{traccc::io::read\_geometry}}(\mbox{\hyperlink{test__mapper_8cpp_a902d72422a60bd9a079e899a54f552c1}{detector\_file}});}
\DoxyCodeLine{36 }
\DoxyCodeLine{37     \textcolor{comment}{// Read the digitization configuration file}}
\DoxyCodeLine{38     \textcolor{keyword}{auto} digi\_cfg = \mbox{\hyperlink{namespacetraccc_1_1io_aa6519a2968b73b699f1aee456d80c190}{traccc::io::read\_digitization\_config}}(\mbox{\hyperlink{test__mapper_8cpp_a5a453e9bf94f17c28f4cd86724b542a3}{digi\_config\_file}});}
\DoxyCodeLine{39 }
\DoxyCodeLine{40     \textcolor{comment}{// Memory resource used by the EDM.}}
\DoxyCodeLine{41     vecmem::host\_memory\_resource host\_mr;}
\DoxyCodeLine{42 }
\DoxyCodeLine{43     \textcolor{comment}{// Algorithms}}
\DoxyCodeLine{44     \mbox{\hyperlink{classtraccc_1_1clusterization__algorithm}{traccc::clusterization\_algorithm}} ca(host\_mr);}
\DoxyCodeLine{45     \mbox{\hyperlink{classtraccc_1_1spacepoint__formation}{traccc::spacepoint\_formation}} sf(host\_mr);}
\DoxyCodeLine{46 }
\DoxyCodeLine{47     \textcolor{comment}{// Read the cells from the relevant event file}}
\DoxyCodeLine{48     \mbox{\hyperlink{structtraccc_1_1io_1_1cell__reader__output}{traccc::io::cell\_reader\_output}} readOut(\&host\_mr);}
\DoxyCodeLine{49     \mbox{\hyperlink{namespacetraccc_1_1io_a4141a99f877738d68d63f85ed5642462}{traccc::io::read\_cells}}(readOut, \mbox{\hyperlink{test__mapper_8cpp_aa79e3eff1ed8e629ebc8e3268c4805f9}{event}}, data\_dir, \mbox{\hyperlink{namespacetraccc_af412a9ab8cc2a30a664acd9f62bb83daaad4c20898046609aa6860e412b43c422}{traccc::data\_format::csv}},}
\DoxyCodeLine{50                            \&surface\_transforms, \&digi\_cfg);}
\DoxyCodeLine{51 }
\DoxyCodeLine{52     \textcolor{keyword}{const} \mbox{\hyperlink{structtraccc_1_1collection__types_ab1b46d2f1f58a16bde873c1aa3f4557d}{traccc::cell\_collection\_types::host}}\& cells\_truth = readOut.cells;}
\DoxyCodeLine{53     \textcolor{keyword}{const} \mbox{\hyperlink{structtraccc_1_1collection__types_ab1b46d2f1f58a16bde873c1aa3f4557d}{traccc::cell\_module\_collection\_types::host}}\& modules = readOut.modules;}
\DoxyCodeLine{54 }
\DoxyCodeLine{55     \textcolor{comment}{// Get Reconstructed Spacepoints}}
\DoxyCodeLine{56     \textcolor{keyword}{auto} measurements\_recon = ca(cells\_truth, modules);}
\DoxyCodeLine{57     \textcolor{keyword}{auto} spacepoints\_recon = sf(measurements\_recon, modules);}
\DoxyCodeLine{58 }
\DoxyCodeLine{59     \textcolor{comment}{// Read the hits from the relevant event file}}
\DoxyCodeLine{60     \mbox{\hyperlink{structtraccc_1_1io_1_1spacepoint__reader__output}{traccc::io::spacepoint\_reader\_output}} sp\_readOut(\&host\_mr);}
\DoxyCodeLine{61     \mbox{\hyperlink{namespacetraccc_1_1io_afe49060da2ab77f49cfcd82308122f84}{traccc::io::read\_spacepoints}}(sp\_readOut, \mbox{\hyperlink{test__mapper_8cpp_aa79e3eff1ed8e629ebc8e3268c4805f9}{event}}, data\_dir,}
\DoxyCodeLine{62                                  surface\_transforms, \mbox{\hyperlink{namespacetraccc_af412a9ab8cc2a30a664acd9f62bb83daaad4c20898046609aa6860e412b43c422}{traccc::data\_format::csv}});}
\DoxyCodeLine{63 }
\DoxyCodeLine{64     \textcolor{keyword}{const} \mbox{\hyperlink{structtraccc_1_1collection__types_ab1b46d2f1f58a16bde873c1aa3f4557d}{traccc::spacepoint\_collection\_types::host}}\& spacepoints\_truth =}
\DoxyCodeLine{65         sp\_readOut.spacepoints;}
\DoxyCodeLine{66     \textcolor{keyword}{const} \mbox{\hyperlink{structtraccc_1_1collection__types_ab1b46d2f1f58a16bde873c1aa3f4557d}{traccc::cell\_module\_collection\_types::host}}\& modules\_2 =}
\DoxyCodeLine{67         sp\_readOut.modules;}
\DoxyCodeLine{68 }
\DoxyCodeLine{69     \textcolor{comment}{// Check the size of spacepoints}}
\DoxyCodeLine{70     EXPECT\_TRUE(spacepoints\_recon.size() > 0);}
\DoxyCodeLine{71     EXPECT\_EQ(spacepoints\_recon.size(), spacepoints\_truth.size());}
\DoxyCodeLine{72 }
\DoxyCodeLine{73     \textcolor{keywordflow}{for} (std::size\_t i = 0; i < spacepoints\_recon.size(); i++) \{}
\DoxyCodeLine{74 }
\DoxyCodeLine{75         \textcolor{keyword}{const} \textcolor{keyword}{auto}\& sp\_recon = spacepoints\_recon[i];}
\DoxyCodeLine{76         \textcolor{keyword}{const} \textcolor{keyword}{auto}\& sp\_truth = spacepoints\_truth[i];}
\DoxyCodeLine{77 }
\DoxyCodeLine{78         \textcolor{comment}{// Check that the spacepoints belong to the same module}}
\DoxyCodeLine{79         EXPECT\_EQ(modules.at(sp\_recon.meas.module\_link).surface\_link,}
\DoxyCodeLine{80                   modules\_2.at(sp\_truth.meas.module\_link).surface\_link);}
\DoxyCodeLine{81 }
\DoxyCodeLine{82         \textcolor{comment}{// Make sure that the difference in spacepoint position is less than}}
\DoxyCodeLine{83         \textcolor{comment}{// 1\%}}
\DoxyCodeLine{84         EXPECT\_TRUE(traccc::getter::norm(sp\_recon.global -\/ sp\_truth.global) /}
\DoxyCodeLine{85                         traccc::getter::norm(sp\_recon.global) <}
\DoxyCodeLine{86                     0.01);}
\DoxyCodeLine{87     \}}
\DoxyCodeLine{88 \}}

\end{DoxyCode}


References traccc\+::io\+::cell\+\_\+reader\+\_\+output\+::cells, traccc\+::csv, detector\+\_\+file, digi\+\_\+config\+\_\+file, event, traccc\+::io\+::cell\+\_\+reader\+\_\+output\+::modules, traccc\+::io\+::spacepoint\+\_\+reader\+\_\+output\+::modules, traccc\+::io\+::read\+\_\+cells(), traccc\+::io\+::read\+\_\+digitization\+\_\+config(), traccc\+::io\+::read\+\_\+geometry(), traccc\+::io\+::read\+\_\+spacepoints(), and traccc\+::io\+::spacepoint\+\_\+reader\+\_\+output\+::spacepoints.

