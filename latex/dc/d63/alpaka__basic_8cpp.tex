\hypertarget{alpaka__basic_8cpp}{}\doxysection{tests/alpaka/alpaka\+\_\+basic.cpp File Reference}
\label{alpaka__basic_8cpp}\index{tests/alpaka/alpaka\_basic.cpp@{tests/alpaka/alpaka\_basic.cpp}}
{\ttfamily \#include $<$alpaka/alpaka.\+hpp$>$}\newline
{\ttfamily \#include $<$alpaka/example/\+Example\+Default\+Acc.\+hpp$>$}\newline
{\ttfamily \#include $<$gtest/gtest.\+h$>$}\newline
{\ttfamily \#include $<$cstdint$>$}\newline
{\ttfamily \#include $<$iostream$>$}\newline
Include dependency graph for alpaka\+\_\+basic.\+cpp\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{d1/d8a/alpaka__basic_8cpp__incl}
\end{center}
\end{figure}
\doxysubsection*{Classes}
\begin{DoxyCompactItemize}
\item 
struct \mbox{\hyperlink{structVectorOpKernel}{Vector\+Op\+Kernel}}
\end{DoxyCompactItemize}
\doxysubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
{\footnotesize template$<$typename Acc $>$ }\\A\+L\+P\+A\+K\+A\+\_\+\+F\+N\+\_\+\+A\+CC float \mbox{\hyperlink{alpaka__basic_8cpp_aba8f26632d383dc61ea37be637f2b8a9}{process}} (Acc const \&acc, uint32\+\_\+t idx)
\item 
\mbox{\hyperlink{alpaka__basic_8cpp_a1665e77e8f065b85e1d8b5b53dc0aa8c}{G\+T\+E\+S\+T\+\_\+\+T\+E\+ST}} (Alpaka\+Basic, Vector\+Op)
\end{DoxyCompactItemize}


\doxysubsection{Function Documentation}
\mbox{\Hypertarget{alpaka__basic_8cpp_a1665e77e8f065b85e1d8b5b53dc0aa8c}\label{alpaka__basic_8cpp_a1665e77e8f065b85e1d8b5b53dc0aa8c}} 
\index{alpaka\_basic.cpp@{alpaka\_basic.cpp}!GTEST\_TEST@{GTEST\_TEST}}
\index{GTEST\_TEST@{GTEST\_TEST}!alpaka\_basic.cpp@{alpaka\_basic.cpp}}
\doxysubsubsection{\texorpdfstring{GTEST\_TEST()}{GTEST\_TEST()}}
{\footnotesize\ttfamily G\+T\+E\+S\+T\+\_\+\+T\+E\+ST (\begin{DoxyParamCaption}\item[{Alpaka\+Basic}]{,  }\item[{Vector\+Op}]{ }\end{DoxyParamCaption})}

Copy vector to device, set element\mbox{[}i\mbox{]} = sin(i) on device, then compare with same calculation on host 
\begin{DoxyCode}{0}
\DoxyCodeLine{42                                   \{}
\DoxyCodeLine{43     \textcolor{keyword}{using namespace }alpaka;}
\DoxyCodeLine{44     \textcolor{keyword}{using} \mbox{\hyperlink{namespacetraccc_1_1alpaka_a57a39a983eec70054cec3d3d3ad15b27}{Dim}} = DimInt<1>;}
\DoxyCodeLine{45     \textcolor{keyword}{using} \mbox{\hyperlink{namespacetraccc_1_1alpaka_ab2e71b3d82c5e5199af5acf0ce64625a}{Idx}} = uint32\_t;}
\DoxyCodeLine{46 }
\DoxyCodeLine{47     \textcolor{keyword}{using} Acc = ExampleDefaultAcc<Dim, Idx>;}
\DoxyCodeLine{48     std::cout << \textcolor{stringliteral}{"Using alpaka accelerator: "} << alpaka::getAccName<Acc>()}
\DoxyCodeLine{49               << std::endl;}
\DoxyCodeLine{50 }
\DoxyCodeLine{51     \textcolor{comment}{// Select a device and create queue for it}}
\DoxyCodeLine{52     \textcolor{keyword}{auto} \textcolor{keyword}{const} devAcc = getDevByIdx<Acc>(0u);}
\DoxyCodeLine{53 }
\DoxyCodeLine{54     \textcolor{keyword}{using} Queue = Queue<Acc, Blocking>;}
\DoxyCodeLine{55     \textcolor{keyword}{auto} queue = Queue\{devAcc\};}
\DoxyCodeLine{56 }
\DoxyCodeLine{57     uint32\_t n = 10000;}
\DoxyCodeLine{58 }
\DoxyCodeLine{59     uint32\_t blocksPerGrid = n;}
\DoxyCodeLine{60     uint32\_t threadsPerBlock = 1;}
\DoxyCodeLine{61     uint32\_t elementsPerThread = 4;}
\DoxyCodeLine{62     \textcolor{keyword}{using} \mbox{\hyperlink{namespacetraccc_1_1alpaka_a725b9a6e2b71ce336e23e2690c9ef844}{WorkDiv}} = WorkDivMembers<Dim, Idx>;}
\DoxyCodeLine{63     \textcolor{keyword}{auto} workDiv = \mbox{\hyperlink{namespacetraccc_1_1alpaka_a725b9a6e2b71ce336e23e2690c9ef844}{WorkDiv}}\{blocksPerGrid, threadsPerBlock, elementsPerThread\};}
\DoxyCodeLine{64 }
\DoxyCodeLine{65     \textcolor{comment}{// Create a device for host for memory allocation, using the first CPU}}
\DoxyCodeLine{66     \textcolor{comment}{// available}}
\DoxyCodeLine{67     \textcolor{keyword}{auto} devHost = getDevByIdx<DevCpu>(0u);}
\DoxyCodeLine{68 }
\DoxyCodeLine{69     \textcolor{comment}{// Allocate memory on the device side:}}
\DoxyCodeLine{70     \textcolor{keyword}{auto} bufAcc = alpaka::allocBuf<float, uint32\_t>(devAcc, n);}
\DoxyCodeLine{71 }
\DoxyCodeLine{72     alpaka::exec<Acc>(queue, workDiv, \mbox{\hyperlink{structVectorOpKernel}{VectorOpKernel}}\{\},}
\DoxyCodeLine{73                       alpaka::getPtrNative(bufAcc), n);}
\DoxyCodeLine{74 }
\DoxyCodeLine{75     alpaka::wait(queue);}
\DoxyCodeLine{76 }
\DoxyCodeLine{77     \textcolor{comment}{// Allocate memory on the host side:}}
\DoxyCodeLine{78     \textcolor{keyword}{auto} bufHost = alpaka::allocBuf<float, uint32\_t>(devHost, n);}
\DoxyCodeLine{79     \textcolor{comment}{// Copy bufAcc to bufHost}}
\DoxyCodeLine{80     alpaka::memcpy(queue, bufHost, bufAcc);}
\DoxyCodeLine{81     \textcolor{comment}{// Calculate on the host and compare result}}
\DoxyCodeLine{82     \textcolor{keywordflow}{for} (uint32\_t i = 0u; i < n; i++) \{}
\DoxyCodeLine{83         EXPECT\_FLOAT\_EQ(bufHost[i], std::sin(i));}
\DoxyCodeLine{84     \}}
\DoxyCodeLine{85 \}}

\end{DoxyCode}
\mbox{\Hypertarget{alpaka__basic_8cpp_aba8f26632d383dc61ea37be637f2b8a9}\label{alpaka__basic_8cpp_aba8f26632d383dc61ea37be637f2b8a9}} 
\index{alpaka\_basic.cpp@{alpaka\_basic.cpp}!process@{process}}
\index{process@{process}!alpaka\_basic.cpp@{alpaka\_basic.cpp}}
\doxysubsubsection{\texorpdfstring{process()}{process()}}
{\footnotesize\ttfamily template$<$typename Acc $>$ \\
A\+L\+P\+A\+K\+A\+\_\+\+F\+N\+\_\+\+A\+CC float process (\begin{DoxyParamCaption}\item[{Acc const \&}]{acc,  }\item[{uint32\+\_\+t}]{idx }\end{DoxyParamCaption})}

T\+R\+A\+C\+CC library, part of the A\+C\+TS project (R\&D line)

(c) 2022 C\+E\+RN for the benefit of the A\+C\+TS project

Mozilla Public License Version 2.\+0 
\begin{DoxyCode}{0}
\DoxyCodeLine{20                                                           \{}
\DoxyCodeLine{21     \textcolor{keywordflow}{return} alpaka::math::sin(acc, idx);}
\DoxyCodeLine{22 \}}

\end{DoxyCode}


Referenced by Vector\+Op\+Kernel\+::operator()().

