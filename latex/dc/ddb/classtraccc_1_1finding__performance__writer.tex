\hypertarget{classtraccc_1_1finding__performance__writer}{}\doxysection{traccc\+::finding\+\_\+performance\+\_\+writer Class Reference}
\label{classtraccc_1_1finding__performance__writer}\index{traccc::finding\_performance\_writer@{traccc::finding\_performance\_writer}}


{\ttfamily \#include $<$finding\+\_\+performance\+\_\+writer.\+hpp$>$}



Collaboration diagram for traccc\+::finding\+\_\+performance\+\_\+writer\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=232pt]{d3/da3/classtraccc_1_1finding__performance__writer__coll__graph}
\end{center}
\end{figure}
\doxysubsection*{Classes}
\begin{DoxyCompactItemize}
\item 
struct \mbox{\hyperlink{structtraccc_1_1finding__performance__writer_1_1config}{config}}
\begin{DoxyCompactList}\small\item\em Configuration for the tool. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classtraccc_1_1finding__performance__writer_a738f2a49404e2f9947ad63c620dafee6}{finding\+\_\+performance\+\_\+writer}} (const \mbox{\hyperlink{structtraccc_1_1finding__performance__writer_1_1config}{config}} \&cfg)
\item 
\mbox{\hyperlink{classtraccc_1_1finding__performance__writer_a00f6e66c843ae33e119dceeacfae9d47}{$\sim$finding\+\_\+performance\+\_\+writer}} ()
\begin{DoxyCompactList}\small\item\em Destructor. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{classtraccc_1_1finding__performance__writer_a5f34fbc194824e728bc73315ef6ffb56}{write}} (const \mbox{\hyperlink{structtraccc_1_1container__types_aa6a3c3afb08abf3aad41b6002ef8b48f}{track\+\_\+candidate\+\_\+container\+\_\+types\+::const\+\_\+view}} \&track\+\_\+candidates\+\_\+view, const \mbox{\hyperlink{structtraccc_1_1event__map2}{event\+\_\+map2}} \&evt\+\_\+map)
\item 
void \mbox{\hyperlink{classtraccc_1_1finding__performance__writer_a33058508a616a92772e7464b1fdad7f1}{finalize}} ()
\end{DoxyCompactItemize}
\doxysubsection*{Private Attributes}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{structtraccc_1_1finding__performance__writer_1_1config}{config}} \mbox{\hyperlink{classtraccc_1_1finding__performance__writer_a5efca35db07f5bdf033246fb36dc5b47}{m\+\_\+cfg}}
\begin{DoxyCompactList}\small\item\em Configuration for the tool. \end{DoxyCompactList}\item 
std\+::unique\+\_\+ptr$<$ \mbox{\hyperlink{structtraccc_1_1details_1_1finding__performance__writer__data}{details\+::finding\+\_\+performance\+\_\+writer\+\_\+data}} $>$ \mbox{\hyperlink{classtraccc_1_1finding__performance__writer_a6b6f872180ef22a901e4e32517f94faa}{m\+\_\+data}}
\begin{DoxyCompactList}\small\item\em Opaque data members for the class. \end{DoxyCompactList}\end{DoxyCompactItemize}


\doxysubsection{Constructor \& Destructor Documentation}
\mbox{\Hypertarget{classtraccc_1_1finding__performance__writer_a738f2a49404e2f9947ad63c620dafee6}\label{classtraccc_1_1finding__performance__writer_a738f2a49404e2f9947ad63c620dafee6}} 
\index{traccc::finding\_performance\_writer@{traccc::finding\_performance\_writer}!finding\_performance\_writer@{finding\_performance\_writer}}
\index{finding\_performance\_writer@{finding\_performance\_writer}!traccc::finding\_performance\_writer@{traccc::finding\_performance\_writer}}
\doxysubsubsection{\texorpdfstring{finding\_performance\_writer()}{finding\_performance\_writer()}}
{\footnotesize\ttfamily traccc\+::finding\+\_\+performance\+\_\+writer\+::finding\+\_\+performance\+\_\+writer (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{structtraccc_1_1finding__performance__writer_1_1config}{config}} \&}]{cfg }\end{DoxyParamCaption})}

Construct from configuration and log level. 
\begin{DoxyParams}{Parameters}
{\em cfg} & The configuration \\
\hline
\end{DoxyParams}

\begin{DoxyCode}{0}
\DoxyCodeLine{52     : \mbox{\hyperlink{classtraccc_1_1finding__performance__writer_a5efca35db07f5bdf033246fb36dc5b47}{m\_cfg}}(cfg),}
\DoxyCodeLine{53       \mbox{\hyperlink{classtraccc_1_1finding__performance__writer_a6b6f872180ef22a901e4e32517f94faa}{m\_data}}(std::make\_unique<details::finding\_performance\_writer\_data>(cfg)) \{}
\DoxyCodeLine{54 }
\DoxyCodeLine{55     \mbox{\hyperlink{classtraccc_1_1finding__performance__writer_a6b6f872180ef22a901e4e32517f94faa}{m\_data}}-\/>m\_eff\_plot\_tool.book(\textcolor{stringliteral}{"finding"}, \mbox{\hyperlink{classtraccc_1_1finding__performance__writer_a6b6f872180ef22a901e4e32517f94faa}{m\_data}}-\/>m\_eff\_plot\_cache);}
\DoxyCodeLine{56     \mbox{\hyperlink{classtraccc_1_1finding__performance__writer_a6b6f872180ef22a901e4e32517f94faa}{m\_data}}-\/>m\_duplication\_plot\_tool.book(\textcolor{stringliteral}{"finding"},}
\DoxyCodeLine{57                                          \mbox{\hyperlink{classtraccc_1_1finding__performance__writer_a6b6f872180ef22a901e4e32517f94faa}{m\_data}}-\/>m\_duplication\_plot\_cache);}
\DoxyCodeLine{58 \}}

\end{DoxyCode}


References m\+\_\+data.

\mbox{\Hypertarget{classtraccc_1_1finding__performance__writer_a00f6e66c843ae33e119dceeacfae9d47}\label{classtraccc_1_1finding__performance__writer_a00f6e66c843ae33e119dceeacfae9d47}} 
\index{traccc::finding\_performance\_writer@{traccc::finding\_performance\_writer}!````~finding\_performance\_writer@{$\sim$finding\_performance\_writer}}
\index{````~finding\_performance\_writer@{$\sim$finding\_performance\_writer}!traccc::finding\_performance\_writer@{traccc::finding\_performance\_writer}}
\doxysubsubsection{\texorpdfstring{$\sim$finding\_performance\_writer()}{~finding\_performance\_writer()}}
{\footnotesize\ttfamily traccc\+::finding\+\_\+performance\+\_\+writer\+::$\sim$finding\+\_\+performance\+\_\+writer (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Destructor. 


\begin{DoxyCode}{0}
\DoxyCodeLine{60 \{\}}

\end{DoxyCode}


\doxysubsection{Member Function Documentation}
\mbox{\Hypertarget{classtraccc_1_1finding__performance__writer_a33058508a616a92772e7464b1fdad7f1}\label{classtraccc_1_1finding__performance__writer_a33058508a616a92772e7464b1fdad7f1}} 
\index{traccc::finding\_performance\_writer@{traccc::finding\_performance\_writer}!finalize@{finalize}}
\index{finalize@{finalize}!traccc::finding\_performance\_writer@{traccc::finding\_performance\_writer}}
\doxysubsubsection{\texorpdfstring{finalize()}{finalize()}}
{\footnotesize\ttfamily void traccc\+::finding\+\_\+performance\+\_\+writer\+::finalize (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{115                                           \{}
\DoxyCodeLine{116 }
\DoxyCodeLine{117 \textcolor{preprocessor}{\#ifdef TRACCC\_HAVE\_ROOT}}
\DoxyCodeLine{118     \textcolor{comment}{// Open the output file.}}
\DoxyCodeLine{119     std::unique\_ptr<TFile> ofile(}
\DoxyCodeLine{120         TFile::Open(\mbox{\hyperlink{classtraccc_1_1finding__performance__writer_a5efca35db07f5bdf033246fb36dc5b47}{m\_cfg}}.\mbox{\hyperlink{structtraccc_1_1finding__performance__writer_1_1config_a373b7aa59440dd6bda061b2b35ac266d}{file\_path}}.c\_str(), \mbox{\hyperlink{classtraccc_1_1finding__performance__writer_a5efca35db07f5bdf033246fb36dc5b47}{m\_cfg}}.\mbox{\hyperlink{structtraccc_1_1finding__performance__writer_1_1config_a123f31227d562f2d1db8aa4c5cb44f71}{file\_mode}}.c\_str()));}
\DoxyCodeLine{121     \textcolor{keywordflow}{if} ((!ofile) || ofile-\/>IsZombie()) \{}
\DoxyCodeLine{122         \textcolor{keywordflow}{throw} std::runtime\_error(\textcolor{stringliteral}{"Could not open output file \(\backslash\)""} +}
\DoxyCodeLine{123                                  \mbox{\hyperlink{classtraccc_1_1finding__performance__writer_a5efca35db07f5bdf033246fb36dc5b47}{m\_cfg}}.\mbox{\hyperlink{structtraccc_1_1finding__performance__writer_1_1config_a373b7aa59440dd6bda061b2b35ac266d}{file\_path}} + \textcolor{stringliteral}{"\(\backslash\)" in mode \(\backslash\)""} +}
\DoxyCodeLine{124                                  \mbox{\hyperlink{classtraccc_1_1finding__performance__writer_a5efca35db07f5bdf033246fb36dc5b47}{m\_cfg}}.\mbox{\hyperlink{structtraccc_1_1finding__performance__writer_1_1config_a123f31227d562f2d1db8aa4c5cb44f71}{file\_mode}} + \textcolor{stringliteral}{"\(\backslash\)""});}
\DoxyCodeLine{125     \}}
\DoxyCodeLine{126     ofile-\/>cd();}
\DoxyCodeLine{127 \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{128     std::cout << \textcolor{stringliteral}{"ROOT file \(\backslash\)""} << \mbox{\hyperlink{classtraccc_1_1finding__performance__writer_a5efca35db07f5bdf033246fb36dc5b47}{m\_cfg}}.\mbox{\hyperlink{structtraccc_1_1finding__performance__writer_1_1config_a373b7aa59440dd6bda061b2b35ac266d}{file\_path}} << \textcolor{stringliteral}{"\(\backslash\)" is NOT created"}}
\DoxyCodeLine{129               << std::endl;}
\DoxyCodeLine{130 \textcolor{preprocessor}{\#endif  // TRACCC\_HAVE\_ROOT}}
\DoxyCodeLine{131 }
\DoxyCodeLine{132     \mbox{\hyperlink{classtraccc_1_1finding__performance__writer_a6b6f872180ef22a901e4e32517f94faa}{m\_data}}-\/>m\_eff\_plot\_tool.write(\mbox{\hyperlink{classtraccc_1_1finding__performance__writer_a6b6f872180ef22a901e4e32517f94faa}{m\_data}}-\/>m\_eff\_plot\_cache);}
\DoxyCodeLine{133     \mbox{\hyperlink{classtraccc_1_1finding__performance__writer_a6b6f872180ef22a901e4e32517f94faa}{m\_data}}-\/>m\_duplication\_plot\_tool.write(\mbox{\hyperlink{classtraccc_1_1finding__performance__writer_a6b6f872180ef22a901e4e32517f94faa}{m\_data}}-\/>m\_duplication\_plot\_cache);}
\DoxyCodeLine{134 \}}

\end{DoxyCode}


References traccc\+::finding\+\_\+performance\+\_\+writer\+::config\+::file\+\_\+mode, traccc\+::finding\+\_\+performance\+\_\+writer\+::config\+::file\+\_\+path, m\+\_\+cfg, and m\+\_\+data.

\mbox{\Hypertarget{classtraccc_1_1finding__performance__writer_a5f34fbc194824e728bc73315ef6ffb56}\label{classtraccc_1_1finding__performance__writer_a5f34fbc194824e728bc73315ef6ffb56}} 
\index{traccc::finding\_performance\_writer@{traccc::finding\_performance\_writer}!write@{write}}
\index{write@{write}!traccc::finding\_performance\_writer@{traccc::finding\_performance\_writer}}
\doxysubsubsection{\texorpdfstring{write()}{write()}}
{\footnotesize\ttfamily void traccc\+::finding\+\_\+performance\+\_\+writer\+::write (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{structtraccc_1_1container__types_aa6a3c3afb08abf3aad41b6002ef8b48f}{track\+\_\+candidate\+\_\+container\+\_\+types\+::const\+\_\+view}} \&}]{track\+\_\+candidates\+\_\+view,  }\item[{const \mbox{\hyperlink{structtraccc_1_1event__map2}{event\+\_\+map2}} \&}]{evt\+\_\+map }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{64                                \{}
\DoxyCodeLine{65 }
\DoxyCodeLine{66     std::map<particle\_id, std::size\_t> match\_counter;}
\DoxyCodeLine{67 }
\DoxyCodeLine{68     \textcolor{comment}{// Iterate over the tracks.}}
\DoxyCodeLine{69     \mbox{\hyperlink{structtraccc_1_1container__types_a7fc26a3b614a9bfd960edc39c3d65017}{track\_candidate\_container\_types::const\_device}} track\_candidates(}
\DoxyCodeLine{70         track\_candidates\_view);}
\DoxyCodeLine{71 }
\DoxyCodeLine{72     \textcolor{keyword}{const} \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} n\_tracks = track\_candidates.size();}
\DoxyCodeLine{73 }
\DoxyCodeLine{74     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} i = 0; i < n\_tracks; i++) \{}
\DoxyCodeLine{75         \textcolor{keyword}{const} \textcolor{keyword}{auto}\& cands = track\_candidates.at(i).items;}
\DoxyCodeLine{76 }
\DoxyCodeLine{77         std::vector<measurement> measurements;}
\DoxyCodeLine{78         measurements.reserve(cands.size());}
\DoxyCodeLine{79         \textcolor{keywordflow}{for} (\textcolor{keyword}{const} \textcolor{keyword}{auto}\& cand : cands) \{}
\DoxyCodeLine{80             measurements.push\_back(cand);}
\DoxyCodeLine{81         \}}
\DoxyCodeLine{82 }
\DoxyCodeLine{83         \textcolor{comment}{// Check which particle matches this seed.}}
\DoxyCodeLine{84         std::vector<particle\_hit\_count> particle\_hit\_counts =}
\DoxyCodeLine{85             \mbox{\hyperlink{namespacetraccc_aad1305fcc33704bacc8ed9872c93b1f1}{identify\_contributing\_particles}}(measurements, evt\_map.meas\_ptc\_map);}
\DoxyCodeLine{86 }
\DoxyCodeLine{87         \textcolor{keywordflow}{if} (particle\_hit\_counts.size() == 1) \{}
\DoxyCodeLine{88             \textcolor{keyword}{auto} pid = particle\_hit\_counts.at(0).ptc.particle\_id;}
\DoxyCodeLine{89             match\_counter[pid]++;}
\DoxyCodeLine{90         \}}
\DoxyCodeLine{91     \}}
\DoxyCodeLine{92 }
\DoxyCodeLine{93     \textcolor{keywordflow}{for} (\textcolor{keyword}{auto} \textcolor{keyword}{const}\& [pid, ptc] : evt\_map.ptc\_map) \{}
\DoxyCodeLine{94 }
\DoxyCodeLine{95         \textcolor{comment}{// Count only charged particles which satisfiy pT\_cut}}
\DoxyCodeLine{96         \textcolor{keywordflow}{if} (ptc.charge == 0 || getter::perp(ptc.mom) < \mbox{\hyperlink{classtraccc_1_1finding__performance__writer_a5efca35db07f5bdf033246fb36dc5b47}{m\_cfg}}.\mbox{\hyperlink{structtraccc_1_1finding__performance__writer_1_1config_a488af2f2b9b9d0fba3ebb758d49ef3c0}{pT\_cut}}) \{}
\DoxyCodeLine{97             \textcolor{keywordflow}{continue};}
\DoxyCodeLine{98         \}}
\DoxyCodeLine{99 }
\DoxyCodeLine{100         \textcolor{keywordtype}{bool} is\_matched = \textcolor{keyword}{false};}
\DoxyCodeLine{101         std::size\_t n\_matched\_seeds\_for\_particle = 0;}
\DoxyCodeLine{102         \textcolor{keyword}{auto} it = match\_counter.find(pid);}
\DoxyCodeLine{103         \textcolor{keywordflow}{if} (it != match\_counter.end()) \{}
\DoxyCodeLine{104             is\_matched = \textcolor{keyword}{true};}
\DoxyCodeLine{105             n\_matched\_seeds\_for\_particle = it-\/>second;}
\DoxyCodeLine{106         \}}
\DoxyCodeLine{107 }
\DoxyCodeLine{108         \mbox{\hyperlink{classtraccc_1_1finding__performance__writer_a6b6f872180ef22a901e4e32517f94faa}{m\_data}}-\/>m\_eff\_plot\_tool.fill(\mbox{\hyperlink{classtraccc_1_1finding__performance__writer_a6b6f872180ef22a901e4e32517f94faa}{m\_data}}-\/>m\_eff\_plot\_cache, ptc, is\_matched);}
\DoxyCodeLine{109         \mbox{\hyperlink{classtraccc_1_1finding__performance__writer_a6b6f872180ef22a901e4e32517f94faa}{m\_data}}-\/>m\_duplication\_plot\_tool.fill(\mbox{\hyperlink{classtraccc_1_1finding__performance__writer_a6b6f872180ef22a901e4e32517f94faa}{m\_data}}-\/>m\_duplication\_plot\_cache,}
\DoxyCodeLine{110                                              ptc,}
\DoxyCodeLine{111                                              n\_matched\_seeds\_for\_particle -\/ 1);}
\DoxyCodeLine{112     \}}
\DoxyCodeLine{113 \}}

\end{DoxyCode}


References traccc\+::device\+\_\+container$<$ header\+\_\+t, item\+\_\+t $>$\+::at(), traccc\+::identify\+\_\+contributing\+\_\+particles(), traccc\+::container\+\_\+element$<$ header\+\_\+reference\+\_\+t, vector\+\_\+reference\+\_\+t $>$\+::items, m\+\_\+cfg, m\+\_\+data, traccc\+::event\+\_\+map2\+::meas\+\_\+ptc\+\_\+map, traccc\+::finding\+\_\+performance\+\_\+writer\+::config\+::p\+T\+\_\+cut, traccc\+::event\+\_\+map2\+::ptc\+\_\+map, and traccc\+::device\+\_\+container$<$ header\+\_\+t, item\+\_\+t $>$\+::size().



\doxysubsection{Member Data Documentation}
\mbox{\Hypertarget{classtraccc_1_1finding__performance__writer_a5efca35db07f5bdf033246fb36dc5b47}\label{classtraccc_1_1finding__performance__writer_a5efca35db07f5bdf033246fb36dc5b47}} 
\index{traccc::finding\_performance\_writer@{traccc::finding\_performance\_writer}!m\_cfg@{m\_cfg}}
\index{m\_cfg@{m\_cfg}!traccc::finding\_performance\_writer@{traccc::finding\_performance\_writer}}
\doxysubsubsection{\texorpdfstring{m\_cfg}{m\_cfg}}
{\footnotesize\ttfamily \mbox{\hyperlink{structtraccc_1_1finding__performance__writer_1_1config}{config}} traccc\+::finding\+\_\+performance\+\_\+writer\+::m\+\_\+cfg\hspace{0.3cm}{\ttfamily [private]}}



Configuration for the tool. 



Referenced by finalize(), and write().

\mbox{\Hypertarget{classtraccc_1_1finding__performance__writer_a6b6f872180ef22a901e4e32517f94faa}\label{classtraccc_1_1finding__performance__writer_a6b6f872180ef22a901e4e32517f94faa}} 
\index{traccc::finding\_performance\_writer@{traccc::finding\_performance\_writer}!m\_data@{m\_data}}
\index{m\_data@{m\_data}!traccc::finding\_performance\_writer@{traccc::finding\_performance\_writer}}
\doxysubsubsection{\texorpdfstring{m\_data}{m\_data}}
{\footnotesize\ttfamily std\+::unique\+\_\+ptr$<$\mbox{\hyperlink{structtraccc_1_1details_1_1finding__performance__writer__data}{details\+::finding\+\_\+performance\+\_\+writer\+\_\+data}}$>$ traccc\+::finding\+\_\+performance\+\_\+writer\+::m\+\_\+data\hspace{0.3cm}{\ttfamily [private]}}



Opaque data members for the class. 



Referenced by finalize(), finding\+\_\+performance\+\_\+writer(), and write().



The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
performance/include/traccc/efficiency/\mbox{\hyperlink{finding__performance__writer_8hpp}{finding\+\_\+performance\+\_\+writer.\+hpp}}\item 
performance/src/efficiency/\mbox{\hyperlink{finding__performance__writer_8cpp}{finding\+\_\+performance\+\_\+writer.\+cpp}}\end{DoxyCompactItemize}
