\hypertarget{classConnectedComponentAnalysisTests}{}\doxysection{Connected\+Component\+Analysis\+Tests Class Reference}
\label{classConnectedComponentAnalysisTests}\index{ConnectedComponentAnalysisTests@{ConnectedComponentAnalysisTests}}


{\ttfamily \#include $<$cca\+\_\+test.\+hpp$>$}



Inheritance diagram for Connected\+Component\+Analysis\+Tests\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{d1/d4a/classConnectedComponentAnalysisTests__inherit__graph}
\end{center}
\end{figure}


Collaboration diagram for Connected\+Component\+Analysis\+Tests\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{d9/d05/classConnectedComponentAnalysisTests__coll__graph}
\end{center}
\end{figure}
\doxysubsection*{Classes}
\begin{DoxyCompactItemize}
\item 
struct \mbox{\hyperlink{structConnectedComponentAnalysisTests_1_1cca__truth__hit}{cca\+\_\+truth\+\_\+hit}}
\end{DoxyCompactItemize}
\doxysubsection*{Public Types}
\begin{DoxyCompactItemize}
\item 
using \mbox{\hyperlink{classConnectedComponentAnalysisTests_a837e974a9f34ede225f29cbf97dacab7}{cca\+\_\+truth\+\_\+hit\+\_\+reader}} = dfe\+::\+Named\+Tuple\+Csv\+Reader$<$ \mbox{\hyperlink{structConnectedComponentAnalysisTests_1_1cca__truth__hit}{cca\+\_\+truth\+\_\+hit}} $>$
\end{DoxyCompactItemize}
\doxysubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
void \mbox{\hyperlink{classConnectedComponentAnalysisTests_a9e7625097478dbd9f9c9b8da4bebf632}{test\+\_\+connected\+\_\+component\+\_\+analysis}} (Param\+Type p)
\end{DoxyCompactItemize}
\doxysubsection*{Static Public Member Functions}
\begin{DoxyCompactItemize}
\item 
static std\+::string \mbox{\hyperlink{classConnectedComponentAnalysisTests_a272df8838d18dec48fea8ac4556af650}{get\+\_\+test\+\_\+name}} (const testing\+::\+Test\+Param\+Info$<$ Param\+Type $>$ \&info)
\item 
static std\+::vector$<$ std\+::string $>$ \mbox{\hyperlink{classConnectedComponentAnalysisTests_a880d8adf3c6967b25cffcdcf1e640adb}{get\+\_\+test\+\_\+files}} (void)
\end{DoxyCompactItemize}
\doxysubsection*{Additional Inherited Members}


\doxysubsection{Member Typedef Documentation}
\mbox{\Hypertarget{classConnectedComponentAnalysisTests_a837e974a9f34ede225f29cbf97dacab7}\label{classConnectedComponentAnalysisTests_a837e974a9f34ede225f29cbf97dacab7}} 
\index{ConnectedComponentAnalysisTests@{ConnectedComponentAnalysisTests}!cca\_truth\_hit\_reader@{cca\_truth\_hit\_reader}}
\index{cca\_truth\_hit\_reader@{cca\_truth\_hit\_reader}!ConnectedComponentAnalysisTests@{ConnectedComponentAnalysisTests}}
\doxysubsubsection{\texorpdfstring{cca\_truth\_hit\_reader}{cca\_truth\_hit\_reader}}
{\footnotesize\ttfamily using \mbox{\hyperlink{classConnectedComponentAnalysisTests_a837e974a9f34ede225f29cbf97dacab7}{Connected\+Component\+Analysis\+Tests\+::cca\+\_\+truth\+\_\+hit\+\_\+reader}} =  dfe\+::\+Named\+Tuple\+Csv\+Reader$<$\mbox{\hyperlink{structConnectedComponentAnalysisTests_1_1cca__truth__hit}{cca\+\_\+truth\+\_\+hit}}$>$}



\doxysubsection{Member Function Documentation}
\mbox{\Hypertarget{classConnectedComponentAnalysisTests_a880d8adf3c6967b25cffcdcf1e640adb}\label{classConnectedComponentAnalysisTests_a880d8adf3c6967b25cffcdcf1e640adb}} 
\index{ConnectedComponentAnalysisTests@{ConnectedComponentAnalysisTests}!get\_test\_files@{get\_test\_files}}
\index{get\_test\_files@{get\_test\_files}!ConnectedComponentAnalysisTests@{ConnectedComponentAnalysisTests}}
\doxysubsubsection{\texorpdfstring{get\_test\_files()}{get\_test\_files()}}
{\footnotesize\ttfamily static std\+::vector$<$std\+::string$>$ Connected\+Component\+Analysis\+Tests\+::get\+\_\+test\+\_\+files (\begin{DoxyParamCaption}\item[{void}]{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [static]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{63                                                             \{}
\DoxyCodeLine{64         \textcolor{keyword}{const} std::vector<std::pair<std::string, std::size\_t>> cases = \{}
\DoxyCodeLine{65             \{\textcolor{stringliteral}{"dense"}, 100\},}
\DoxyCodeLine{66             \{\textcolor{stringliteral}{"multiple\_module\_single\_hit"}, 100\},}
\DoxyCodeLine{67             \{\textcolor{stringliteral}{"single\_module\_multiple\_hit\_single"}, 100\},}
\DoxyCodeLine{68             \{\textcolor{stringliteral}{"single\_module\_multiple\_hit\_single\_sparse"}, 100\},}
\DoxyCodeLine{69             \{\textcolor{stringliteral}{"single\_module\_single\_hit"}, 100\},}
\DoxyCodeLine{70             \{\textcolor{stringliteral}{"very\_dense"}, 100\},}
\DoxyCodeLine{71             \{\textcolor{stringliteral}{"trackml\_like"}, 30\},}
\DoxyCodeLine{72         \};}
\DoxyCodeLine{73         std::vector<std::string> out;}
\DoxyCodeLine{74 }
\DoxyCodeLine{75         \textcolor{keywordflow}{for} (\textcolor{keyword}{const} std::pair<std::string, std::size\_t> \&c : cases) \{}
\DoxyCodeLine{76             \textcolor{keywordflow}{for} (std::size\_t i = 0; i < c.second; ++i) \{}
\DoxyCodeLine{77                 std::ostringstream ss;}
\DoxyCodeLine{78                 ss << c.first << \textcolor{stringliteral}{"\_"} << std::setfill(\textcolor{charliteral}{'0'}) << std::setw(10) << i;}
\DoxyCodeLine{79                 out.push\_back(ss.str());}
\DoxyCodeLine{80             \}}
\DoxyCodeLine{81         \}}
\DoxyCodeLine{82 }
\DoxyCodeLine{83         \textcolor{keywordflow}{return} out;}
\DoxyCodeLine{84     \}}

\end{DoxyCode}
\mbox{\Hypertarget{classConnectedComponentAnalysisTests_a272df8838d18dec48fea8ac4556af650}\label{classConnectedComponentAnalysisTests_a272df8838d18dec48fea8ac4556af650}} 
\index{ConnectedComponentAnalysisTests@{ConnectedComponentAnalysisTests}!get\_test\_name@{get\_test\_name}}
\index{get\_test\_name@{get\_test\_name}!ConnectedComponentAnalysisTests@{ConnectedComponentAnalysisTests}}
\doxysubsubsection{\texorpdfstring{get\_test\_name()}{get\_test\_name()}}
{\footnotesize\ttfamily static std\+::string Connected\+Component\+Analysis\+Tests\+::get\+\_\+test\+\_\+name (\begin{DoxyParamCaption}\item[{const testing\+::\+Test\+Param\+Info$<$ Param\+Type $>$ \&}]{info }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [static]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{59                                                      \{}
\DoxyCodeLine{60         \textcolor{keywordflow}{return} std::get<1>(info.param);}
\DoxyCodeLine{61     \}}

\end{DoxyCode}
\mbox{\Hypertarget{classConnectedComponentAnalysisTests_a9e7625097478dbd9f9c9b8da4bebf632}\label{classConnectedComponentAnalysisTests_a9e7625097478dbd9f9c9b8da4bebf632}} 
\index{ConnectedComponentAnalysisTests@{ConnectedComponentAnalysisTests}!test\_connected\_component\_analysis@{test\_connected\_component\_analysis}}
\index{test\_connected\_component\_analysis@{test\_connected\_component\_analysis}!ConnectedComponentAnalysisTests@{ConnectedComponentAnalysisTests}}
\doxysubsubsection{\texorpdfstring{test\_connected\_component\_analysis()}{test\_connected\_component\_analysis()}}
{\footnotesize\ttfamily void Connected\+Component\+Analysis\+Tests\+::test\+\_\+connected\+\_\+component\+\_\+analysis (\begin{DoxyParamCaption}\item[{Param\+Type}]{p }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{86                                                                \{}
\DoxyCodeLine{87         \mbox{\hyperlink{cca__test_8hpp_a28d33f306715144fde4b98bff32f6c76}{cca\_function\_t}} f = std::get<0>(p);}
\DoxyCodeLine{88         std::string file\_prefix = std::get<1>(p);}
\DoxyCodeLine{89 }
\DoxyCodeLine{90         std::string file\_hits =}
\DoxyCodeLine{91             \mbox{\hyperlink{classtraccc_1_1tests_1_1data__test_a0eb370e5c97d3678bbcec029676b0282}{get\_datafile}}(\textcolor{stringliteral}{"cca\_test/"} + file\_prefix + \textcolor{stringliteral}{"\_hits.csv"});}
\DoxyCodeLine{92         std::string file\_truth =}
\DoxyCodeLine{93             \mbox{\hyperlink{classtraccc_1_1tests_1_1data__test_a0eb370e5c97d3678bbcec029676b0282}{get\_datafile}}(\textcolor{stringliteral}{"cca\_test/"} + file\_prefix + \textcolor{stringliteral}{"\_truth.csv"});}
\DoxyCodeLine{94 }
\DoxyCodeLine{95         \mbox{\hyperlink{structtraccc_1_1io_1_1cell__reader__output}{traccc::io::cell\_reader\_output}} data;}
\DoxyCodeLine{96         \mbox{\hyperlink{namespacetraccc_1_1io_a4141a99f877738d68d63f85ed5642462}{traccc::io::read\_cells}}(data, file\_hits);}
\DoxyCodeLine{97         \mbox{\hyperlink{structtraccc_1_1collection__types_ab1b46d2f1f58a16bde873c1aa3f4557d}{traccc::cell\_collection\_types::host}} \&cells = data.\mbox{\hyperlink{structtraccc_1_1io_1_1cell__reader__output_a5b89ef9bdcde8df9c69beed98969b87a}{cells}};}
\DoxyCodeLine{98         \mbox{\hyperlink{structtraccc_1_1collection__types_ab1b46d2f1f58a16bde873c1aa3f4557d}{traccc::cell\_module\_collection\_types::host}} \&modules = data.\mbox{\hyperlink{structtraccc_1_1io_1_1cell__reader__output_ae40d3eb5e2f81aa71a3186ecf94364ec}{modules}};}
\DoxyCodeLine{99 }
\DoxyCodeLine{100         \textcolor{keywordflow}{for} (std::size\_t i = 0; i < modules.size(); i++) \{}
\DoxyCodeLine{101             modules.at(i).pixel = \mbox{\hyperlink{structtraccc_1_1pixel__data}{traccc::pixel\_data}}\{0, 0, 1, 1\};}
\DoxyCodeLine{102         \}}
\DoxyCodeLine{103 }
\DoxyCodeLine{104         std::map<traccc::geometry\_id, vecmem::vector<traccc::measurement>>}
\DoxyCodeLine{105             result = f(cells, modules);}
\DoxyCodeLine{106 }
\DoxyCodeLine{107         std::size\_t total\_truth = 0, total\_found = 0;}
\DoxyCodeLine{108 }
\DoxyCodeLine{109         \textcolor{keywordflow}{for} (\textcolor{keyword}{const} \textcolor{keyword}{auto} \&i : result) \{}
\DoxyCodeLine{110             total\_found += i.second.size();}
\DoxyCodeLine{111         \}}
\DoxyCodeLine{112 }
\DoxyCodeLine{113         \mbox{\hyperlink{classConnectedComponentAnalysisTests_a837e974a9f34ede225f29cbf97dacab7}{cca\_truth\_hit\_reader}} truth\_reader(file\_truth);}
\DoxyCodeLine{114 }
\DoxyCodeLine{115         cca\_truth\_hit io\_truth;}
\DoxyCodeLine{116         \textcolor{keywordflow}{while} (truth\_reader.read(io\_truth)) \{}
\DoxyCodeLine{117             ASSERT\_TRUE(result.find(io\_truth.geometry\_id) != result.end());}
\DoxyCodeLine{118 }
\DoxyCodeLine{119             \textcolor{keyword}{const} vecmem::vector<traccc::measurement> \&meas =}
\DoxyCodeLine{120                 result.at(io\_truth.geometry\_id);}
\DoxyCodeLine{121 }
\DoxyCodeLine{122             \mbox{\hyperlink{namespacetraccc_aab82ddc5db54d9ad84b1215320482993}{traccc::scalar}} \mbox{\hyperlink{test__simulation_8cpp_abbc805598f3b002586775aa9e77dd770}{tol}} = std::max(}
\DoxyCodeLine{123                 0.1, 0.0001 * std::max(io\_truth.channel0, io\_truth.channel1));}
\DoxyCodeLine{124 }
\DoxyCodeLine{125             \textcolor{keyword}{auto} match = std::find\_if(}
\DoxyCodeLine{126                 meas.begin(), meas.end(),}
\DoxyCodeLine{127                 [\&io\_truth, \mbox{\hyperlink{test__simulation_8cpp_abbc805598f3b002586775aa9e77dd770}{tol}}](\textcolor{keyword}{const} \mbox{\hyperlink{structtraccc_1_1measurement}{traccc::measurement}} \&i) \{}
\DoxyCodeLine{128                     return std::abs(i.local[0] -\/ io\_truth.channel0) < tol \&\&}
\DoxyCodeLine{129                            std::abs(i.local[1] -\/ io\_truth.channel1) < tol;}
\DoxyCodeLine{130                 \});}
\DoxyCodeLine{131 }
\DoxyCodeLine{132             ASSERT\_TRUE(match != meas.end());}
\DoxyCodeLine{133 }
\DoxyCodeLine{134             EXPECT\_NEAR(match-\/>local[0], io\_truth.channel0, \mbox{\hyperlink{test__simulation_8cpp_abbc805598f3b002586775aa9e77dd770}{tol}});}
\DoxyCodeLine{135             EXPECT\_NEAR(match-\/>local[1], io\_truth.channel1, \mbox{\hyperlink{test__simulation_8cpp_abbc805598f3b002586775aa9e77dd770}{tol}});}
\DoxyCodeLine{136             EXPECT\_NEAR(match-\/>variance[0], io\_truth.variance0, \mbox{\hyperlink{test__simulation_8cpp_abbc805598f3b002586775aa9e77dd770}{tol}});}
\DoxyCodeLine{137             EXPECT\_NEAR(match-\/>variance[1], io\_truth.variance1, \mbox{\hyperlink{test__simulation_8cpp_abbc805598f3b002586775aa9e77dd770}{tol}});}
\DoxyCodeLine{138 }
\DoxyCodeLine{139             ++total\_truth;}
\DoxyCodeLine{140         \}}
\DoxyCodeLine{141 }
\DoxyCodeLine{142         EXPECT\_EQ(total\_truth, total\_found);}
\DoxyCodeLine{143     \}}

\end{DoxyCode}


References traccc\+::io\+::cell\+\_\+reader\+\_\+output\+::cells, Connected\+Component\+Analysis\+Tests\+::cca\+\_\+truth\+\_\+hit\+::channel0, Connected\+Component\+Analysis\+Tests\+::cca\+\_\+truth\+\_\+hit\+::channel1, Connected\+Component\+Analysis\+Tests\+::cca\+\_\+truth\+\_\+hit\+::geometry\+\_\+id, traccc\+::tests\+::data\+\_\+test\+::get\+\_\+datafile(), traccc\+::io\+::cell\+\_\+reader\+\_\+output\+::modules, traccc\+::io\+::read\+\_\+cells(), tol, Connected\+Component\+Analysis\+Tests\+::cca\+\_\+truth\+\_\+hit\+::variance0, and Connected\+Component\+Analysis\+Tests\+::cca\+\_\+truth\+\_\+hit\+::variance1.



The documentation for this class was generated from the following file\+:\begin{DoxyCompactItemize}
\item 
tests/common/tests/\mbox{\hyperlink{cca__test_8hpp}{cca\+\_\+test.\+hpp}}\end{DoxyCompactItemize}
