\hypertarget{classtraccc_1_1cuda_1_1details_1_1select__device}{}\doxysection{traccc\+::cuda\+::details\+::select\+\_\+device Class Reference}
\label{classtraccc_1_1cuda_1_1details_1_1select__device}\index{traccc::cuda::details::select\_device@{traccc::cuda::details::select\_device}}


{\ttfamily \#include $<$utils.\+hpp$>$}



Collaboration diagram for traccc\+::cuda\+::details\+::select\+\_\+device\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=194pt]{d9/d1a/classtraccc_1_1cuda_1_1details_1_1select__device__coll__graph}
\end{center}
\end{figure}
\doxysubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classtraccc_1_1cuda_1_1details_1_1select__device_a7db25d37719f1db1aa6b3258b899d7c6}{select\+\_\+device}} (int \mbox{\hyperlink{classtraccc_1_1cuda_1_1details_1_1select__device_a113fabf401e551d1355462584c64b8c8}{device}})
\item 
\mbox{\hyperlink{classtraccc_1_1cuda_1_1details_1_1select__device_a6f86df3ed545a4f7d14d679248fa25b1}{$\sim$select\+\_\+device}} ()
\item 
int \mbox{\hyperlink{classtraccc_1_1cuda_1_1details_1_1select__device_a113fabf401e551d1355462584c64b8c8}{device}} () const
\begin{DoxyCompactList}\small\item\em Return the identifier for the device being seleced. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsection*{Private Attributes}
\begin{DoxyCompactItemize}
\item 
int \mbox{\hyperlink{classtraccc_1_1cuda_1_1details_1_1select__device_a6f635a8540da36618b07a885f702fb23}{m\+\_\+device}}
\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
Class with R\+A\+II mechanism for selecting a C\+U\+DA device.

This class can be used to select C\+U\+DA devices in a modern C++ way, with scope safety. When an object of this class is constructed, it will switch the thread-\/local device selector to the device number specified in the constructor argument. When this object goes out of scope or gets destructed in any other way, it will restore the device that was set before the object was constructed. This allows us to easily write methods with few side-\/effects.

\begin{DoxyWarning}{Warning}
The behaviour of this class is not well-\/defined if you construct more than one in the same scope. 
\end{DoxyWarning}


\doxysubsection{Constructor \& Destructor Documentation}
\mbox{\Hypertarget{classtraccc_1_1cuda_1_1details_1_1select__device_a7db25d37719f1db1aa6b3258b899d7c6}\label{classtraccc_1_1cuda_1_1details_1_1select__device_a7db25d37719f1db1aa6b3258b899d7c6}} 
\index{traccc::cuda::details::select\_device@{traccc::cuda::details::select\_device}!select\_device@{select\_device}}
\index{select\_device@{select\_device}!traccc::cuda::details::select\_device@{traccc::cuda::details::select\_device}}
\doxysubsubsection{\texorpdfstring{select\_device()}{select\_device()}}
{\footnotesize\ttfamily traccc\+::cuda\+::details\+::select\+\_\+device\+::select\+\_\+device (\begin{DoxyParamCaption}\item[{int}]{device }\end{DoxyParamCaption})}

Constructs the object, switching the current C\+U\+DA device to the requested number.


\begin{DoxyParams}{Parameters}
{\em device} & The C\+U\+DA device number to switch to. \\
\hline
\end{DoxyParams}

\begin{DoxyCode}{0}
\DoxyCodeLine{27                                        \{}
\DoxyCodeLine{28     \textcolor{comment}{/*}}
\DoxyCodeLine{29 \textcolor{comment}{     * When the object is constructed, grab the current device number and}}
\DoxyCodeLine{30 \textcolor{comment}{     * store it as a member variable. Then set the device to whatever was}}
\DoxyCodeLine{31 \textcolor{comment}{     * specified.}}
\DoxyCodeLine{32 \textcolor{comment}{     */}}
\DoxyCodeLine{33     \mbox{\hyperlink{cuda_2include_2traccc_2cuda_2utils_2definitions_8hpp_a924e9e2dee296776f46a6c0814e27eda}{CUDA\_ERROR\_CHECK}}(cudaGetDevice(\&\mbox{\hyperlink{classtraccc_1_1cuda_1_1details_1_1select__device_a6f635a8540da36618b07a885f702fb23}{m\_device}}));}
\DoxyCodeLine{34     \mbox{\hyperlink{cuda_2include_2traccc_2cuda_2utils_2definitions_8hpp_a924e9e2dee296776f46a6c0814e27eda}{CUDA\_ERROR\_CHECK}}(cudaSetDevice(\mbox{\hyperlink{classtraccc_1_1cuda_1_1details_1_1select__device_a113fabf401e551d1355462584c64b8c8}{device}}));}
\DoxyCodeLine{35 \}}

\end{DoxyCode}


References C\+U\+D\+A\+\_\+\+E\+R\+R\+O\+R\+\_\+\+C\+H\+E\+CK, device(), and m\+\_\+device.

\mbox{\Hypertarget{classtraccc_1_1cuda_1_1details_1_1select__device_a6f86df3ed545a4f7d14d679248fa25b1}\label{classtraccc_1_1cuda_1_1details_1_1select__device_a6f86df3ed545a4f7d14d679248fa25b1}} 
\index{traccc::cuda::details::select\_device@{traccc::cuda::details::select\_device}!````~select\_device@{$\sim$select\_device}}
\index{````~select\_device@{$\sim$select\_device}!traccc::cuda::details::select\_device@{traccc::cuda::details::select\_device}}
\doxysubsubsection{\texorpdfstring{$\sim$select\_device()}{~select\_device()}}
{\footnotesize\ttfamily traccc\+::cuda\+::details\+::select\+\_\+device\+::$\sim$select\+\_\+device (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}

Deconstructs the object, returning to the device that was selected before constructing this object. 
\begin{DoxyCode}{0}
\DoxyCodeLine{37                               \{}
\DoxyCodeLine{38     \textcolor{comment}{/*}}
\DoxyCodeLine{39 \textcolor{comment}{     * On destruction, reset the device number to whatever it was before the}}
\DoxyCodeLine{40 \textcolor{comment}{     * object was constructed.}}
\DoxyCodeLine{41 \textcolor{comment}{     */}}
\DoxyCodeLine{42     \mbox{\hyperlink{cuda_2include_2traccc_2cuda_2utils_2definitions_8hpp_a924e9e2dee296776f46a6c0814e27eda}{CUDA\_ERROR\_CHECK}}(cudaSetDevice(\mbox{\hyperlink{classtraccc_1_1cuda_1_1details_1_1select__device_a6f635a8540da36618b07a885f702fb23}{m\_device}}));}
\DoxyCodeLine{43 \}}

\end{DoxyCode}


References C\+U\+D\+A\+\_\+\+E\+R\+R\+O\+R\+\_\+\+C\+H\+E\+CK, and m\+\_\+device.



\doxysubsection{Member Function Documentation}
\mbox{\Hypertarget{classtraccc_1_1cuda_1_1details_1_1select__device_a113fabf401e551d1355462584c64b8c8}\label{classtraccc_1_1cuda_1_1details_1_1select__device_a113fabf401e551d1355462584c64b8c8}} 
\index{traccc::cuda::details::select\_device@{traccc::cuda::details::select\_device}!device@{device}}
\index{device@{device}!traccc::cuda::details::select\_device@{traccc::cuda::details::select\_device}}
\doxysubsubsection{\texorpdfstring{device()}{device()}}
{\footnotesize\ttfamily int traccc\+::cuda\+::details\+::select\+\_\+device\+::device (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const}



Return the identifier for the device being seleced. 


\begin{DoxyCode}{0}
\DoxyCodeLine{45                                 \{}
\DoxyCodeLine{46 }
\DoxyCodeLine{47     \textcolor{keywordflow}{return} \mbox{\hyperlink{classtraccc_1_1cuda_1_1details_1_1select__device_a6f635a8540da36618b07a885f702fb23}{m\_device}};}
\DoxyCodeLine{48 \}}

\end{DoxyCode}


References m\+\_\+device.



Referenced by select\+\_\+device().



\doxysubsection{Member Data Documentation}
\mbox{\Hypertarget{classtraccc_1_1cuda_1_1details_1_1select__device_a6f635a8540da36618b07a885f702fb23}\label{classtraccc_1_1cuda_1_1details_1_1select__device_a6f635a8540da36618b07a885f702fb23}} 
\index{traccc::cuda::details::select\_device@{traccc::cuda::details::select\_device}!m\_device@{m\_device}}
\index{m\_device@{m\_device}!traccc::cuda::details::select\_device@{traccc::cuda::details::select\_device}}
\doxysubsubsection{\texorpdfstring{m\_device}{m\_device}}
{\footnotesize\ttfamily int traccc\+::cuda\+::details\+::select\+\_\+device\+::m\+\_\+device\hspace{0.3cm}{\ttfamily [private]}}

The old device number, this is what we restore when the object goes out of scope. 

Referenced by device(), select\+\_\+device(), and $\sim$select\+\_\+device().



The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
device/cuda/src/utils/\mbox{\hyperlink{device_2cuda_2src_2utils_2utils_8hpp}{utils.\+hpp}}\item 
device/cuda/src/utils/\mbox{\hyperlink{device_2cuda_2src_2utils_2utils_8cpp}{utils.\+cpp}}\end{DoxyCompactItemize}
