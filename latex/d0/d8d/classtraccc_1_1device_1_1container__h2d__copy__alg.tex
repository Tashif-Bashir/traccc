\hypertarget{classtraccc_1_1device_1_1container__h2d__copy__alg}{}\doxysection{traccc\+::device\+::container\+\_\+h2d\+\_\+copy\+\_\+alg$<$ C\+O\+N\+T\+A\+I\+N\+E\+R\+\_\+\+T\+Y\+P\+ES $>$ Class Template Reference}
\label{classtraccc_1_1device_1_1container__h2d__copy__alg}\index{traccc::device::container\_h2d\_copy\_alg$<$ CONTAINER\_TYPES $>$@{traccc::device::container\_h2d\_copy\_alg$<$ CONTAINER\_TYPES $>$}}


{\ttfamily \#include $<$container\+\_\+h2d\+\_\+copy\+\_\+alg.\+hpp$>$}



Collaboration diagram for traccc\+::device\+::container\+\_\+h2d\+\_\+copy\+\_\+alg$<$ C\+O\+N\+T\+A\+I\+N\+E\+R\+\_\+\+T\+Y\+P\+ES $>$\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=237pt]{dd/d0d/classtraccc_1_1device_1_1container__h2d__copy__alg__coll__graph}
\end{center}
\end{figure}
\doxysubsection*{Public Types}
\begin{DoxyCompactItemize}
\item 
typedef const C\+O\+N\+T\+A\+I\+N\+E\+R\+\_\+\+T\+Y\+P\+E\+S\+::const\+\_\+view \& \mbox{\hyperlink{classtraccc_1_1device_1_1container__h2d__copy__alg_a613c176cd84fa9d1a5cb825f747056ae}{input\+\_\+type}}
\begin{DoxyCompactList}\small\item\em Helper type declaration for the input type. \end{DoxyCompactList}\item 
typedef C\+O\+N\+T\+A\+I\+N\+E\+R\+\_\+\+T\+Y\+P\+E\+S\+::buffer \mbox{\hyperlink{classtraccc_1_1device_1_1container__h2d__copy__alg_afe7e7e0aeee41b592b8f1108618319f4}{output\+\_\+type}}
\begin{DoxyCompactList}\small\item\em Helper type declaration for the output type. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classtraccc_1_1device_1_1container__h2d__copy__alg_a777bb54291176d4899575d25e7b8442c}{container\+\_\+h2d\+\_\+copy\+\_\+alg}} (const \mbox{\hyperlink{structtraccc_1_1memory__resource}{memory\+\_\+resource}} \&mr, vecmem\+::copy \&device\+Copy)
\begin{DoxyCompactList}\small\item\em Constructor with the needed resources. \end{DoxyCompactList}\item 
\mbox{\hyperlink{classtraccc_1_1device_1_1container__h2d__copy__alg_afe7e7e0aeee41b592b8f1108618319f4}{output\+\_\+type}} \mbox{\hyperlink{classtraccc_1_1device_1_1container__h2d__copy__alg_a1da0ba6cedf35351928abe68703e5efd}{operator()}} (\mbox{\hyperlink{classtraccc_1_1device_1_1container__h2d__copy__alg_a613c176cd84fa9d1a5cb825f747056ae}{input\+\_\+type}} input) const
\begin{DoxyCompactList}\small\item\em Function executing a simple copy to the device. \end{DoxyCompactList}\item 
\mbox{\hyperlink{classtraccc_1_1device_1_1container__h2d__copy__alg_afe7e7e0aeee41b592b8f1108618319f4}{output\+\_\+type}} \mbox{\hyperlink{classtraccc_1_1device_1_1container__h2d__copy__alg_af027bcf9f872a7b522b30e329ec084f8}{operator()}} (\mbox{\hyperlink{classtraccc_1_1device_1_1container__h2d__copy__alg_a613c176cd84fa9d1a5cb825f747056ae}{input\+\_\+type}} input, typename C\+O\+N\+T\+A\+I\+N\+E\+R\+\_\+\+T\+Y\+P\+E\+S\+::buffer \&host\+Buffer) const
\begin{DoxyCompactList}\small\item\em Function executing an optimised copy to the device. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsection*{Private Types}
\begin{DoxyCompactItemize}
\item 
using \mbox{\hyperlink{classtraccc_1_1device_1_1container__h2d__copy__alg_a82072cfa6f5796007d604fcde72c5bfb}{header\+\_\+size\+\_\+type}} = const typename std\+::remove\+\_\+reference$<$ typename std\+::remove\+\_\+cv$<$ \mbox{\hyperlink{classtraccc_1_1device_1_1container__h2d__copy__alg_a613c176cd84fa9d1a5cb825f747056ae}{input\+\_\+type}} $>$\+::type $>$\+::type\+::header\+\_\+vector\+::size\+\_\+type
\begin{DoxyCompactList}\small\item\em Size type for the handled container\textquotesingle{}s header vector. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsection*{Private Member Functions}
\begin{DoxyCompactItemize}
\item 
std\+::vector$<$ std\+::size\+\_\+t $>$ \mbox{\hyperlink{classtraccc_1_1device_1_1container__h2d__copy__alg_ae0ad8e0c4c5e6a2a441b867b9e5f37e3}{get\+\_\+sizes}} (\mbox{\hyperlink{classtraccc_1_1device_1_1container__h2d__copy__alg_a613c176cd84fa9d1a5cb825f747056ae}{input\+\_\+type}} input) const
\begin{DoxyCompactList}\small\item\em Helper function calculating the size(s) of the input container. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsection*{Private Attributes}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{structtraccc_1_1memory__resource}{memory\+\_\+resource}} \mbox{\hyperlink{classtraccc_1_1device_1_1container__h2d__copy__alg_ad0f6ae9f757b2c75681db27080defb3c}{m\+\_\+mr}}
\begin{DoxyCompactList}\small\item\em The memory resource(s) to use. \end{DoxyCompactList}\item 
vecmem\+::copy \& \mbox{\hyperlink{classtraccc_1_1device_1_1container__h2d__copy__alg_a591c52f5f3e8820a5c030dbed5dacfbd}{m\+\_\+device\+Copy}}
\begin{DoxyCompactList}\small\item\em The H-\/$>$D copy object to use. \end{DoxyCompactList}\item 
vecmem\+::copy \mbox{\hyperlink{classtraccc_1_1device_1_1container__h2d__copy__alg_ae4d3f7f625b0d12ea38040566faf547d}{m\+\_\+host\+Copy}}
\begin{DoxyCompactList}\small\item\em The H-\/$>$H copy object to use. \end{DoxyCompactList}\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
\subsubsection*{template$<$typename C\+O\+N\+T\+A\+I\+N\+E\+R\+\_\+\+T\+Y\+P\+ES$>$\newline
class traccc\+::device\+::container\+\_\+h2d\+\_\+copy\+\_\+alg$<$ C\+O\+N\+T\+A\+I\+N\+E\+R\+\_\+\+T\+Y\+P\+E\+S $>$}

Algorithm to copy a container from the host to the device

Specialisations of this algorithm can be used to copy a container to a device for a subsequent algorithm that expects its input to already be on the device that it wants to run on.

Note that the input type is not a \char`\"{}host type\char`\"{}, but rather a constant view. This is meant to allow using this algorithm on top of more complicated data objects.


\begin{DoxyTemplParams}{Template Parameters}
{\em C\+O\+N\+T\+A\+I\+N\+E\+R\+\_\+\+T\+Y\+P\+ES} & One of the \char`\"{}container types\char`\"{} traits \\
\hline
\end{DoxyTemplParams}


\doxysubsection{Member Typedef Documentation}
\mbox{\Hypertarget{classtraccc_1_1device_1_1container__h2d__copy__alg_a82072cfa6f5796007d604fcde72c5bfb}\label{classtraccc_1_1device_1_1container__h2d__copy__alg_a82072cfa6f5796007d604fcde72c5bfb}} 
\index{traccc::device::container\_h2d\_copy\_alg$<$ CONTAINER\_TYPES $>$@{traccc::device::container\_h2d\_copy\_alg$<$ CONTAINER\_TYPES $>$}!header\_size\_type@{header\_size\_type}}
\index{header\_size\_type@{header\_size\_type}!traccc::device::container\_h2d\_copy\_alg$<$ CONTAINER\_TYPES $>$@{traccc::device::container\_h2d\_copy\_alg$<$ CONTAINER\_TYPES $>$}}
\doxysubsubsection{\texorpdfstring{header\_size\_type}{header\_size\_type}}
{\footnotesize\ttfamily template$<$typename C\+O\+N\+T\+A\+I\+N\+E\+R\+\_\+\+T\+Y\+P\+ES $>$ \\
using \mbox{\hyperlink{classtraccc_1_1device_1_1container__h2d__copy__alg}{traccc\+::device\+::container\+\_\+h2d\+\_\+copy\+\_\+alg}}$<$ C\+O\+N\+T\+A\+I\+N\+E\+R\+\_\+\+T\+Y\+P\+ES $>$\+::\mbox{\hyperlink{classtraccc_1_1device_1_1container__h2d__copy__alg_a82072cfa6f5796007d604fcde72c5bfb}{header\+\_\+size\+\_\+type}} =  const typename std\+::remove\+\_\+reference$<$typename std\+::remove\+\_\+cv$<$ \mbox{\hyperlink{classtraccc_1_1device_1_1container__h2d__copy__alg_a613c176cd84fa9d1a5cb825f747056ae}{input\+\_\+type}}$>$\+::type$>$\+::type\+::header\+\_\+vector\+::size\+\_\+type\hspace{0.3cm}{\ttfamily [private]}}



Size type for the handled container\textquotesingle{}s header vector. 

\mbox{\Hypertarget{classtraccc_1_1device_1_1container__h2d__copy__alg_a613c176cd84fa9d1a5cb825f747056ae}\label{classtraccc_1_1device_1_1container__h2d__copy__alg_a613c176cd84fa9d1a5cb825f747056ae}} 
\index{traccc::device::container\_h2d\_copy\_alg$<$ CONTAINER\_TYPES $>$@{traccc::device::container\_h2d\_copy\_alg$<$ CONTAINER\_TYPES $>$}!input\_type@{input\_type}}
\index{input\_type@{input\_type}!traccc::device::container\_h2d\_copy\_alg$<$ CONTAINER\_TYPES $>$@{traccc::device::container\_h2d\_copy\_alg$<$ CONTAINER\_TYPES $>$}}
\doxysubsubsection{\texorpdfstring{input\_type}{input\_type}}
{\footnotesize\ttfamily template$<$typename C\+O\+N\+T\+A\+I\+N\+E\+R\+\_\+\+T\+Y\+P\+ES $>$ \\
typedef const C\+O\+N\+T\+A\+I\+N\+E\+R\+\_\+\+T\+Y\+P\+E\+S\+::const\+\_\+view\& \mbox{\hyperlink{classtraccc_1_1device_1_1container__h2d__copy__alg}{traccc\+::device\+::container\+\_\+h2d\+\_\+copy\+\_\+alg}}$<$ C\+O\+N\+T\+A\+I\+N\+E\+R\+\_\+\+T\+Y\+P\+ES $>$\+::\mbox{\hyperlink{classtraccc_1_1device_1_1container__h2d__copy__alg_a613c176cd84fa9d1a5cb825f747056ae}{input\+\_\+type}}}



Helper type declaration for the input type. 

\mbox{\Hypertarget{classtraccc_1_1device_1_1container__h2d__copy__alg_afe7e7e0aeee41b592b8f1108618319f4}\label{classtraccc_1_1device_1_1container__h2d__copy__alg_afe7e7e0aeee41b592b8f1108618319f4}} 
\index{traccc::device::container\_h2d\_copy\_alg$<$ CONTAINER\_TYPES $>$@{traccc::device::container\_h2d\_copy\_alg$<$ CONTAINER\_TYPES $>$}!output\_type@{output\_type}}
\index{output\_type@{output\_type}!traccc::device::container\_h2d\_copy\_alg$<$ CONTAINER\_TYPES $>$@{traccc::device::container\_h2d\_copy\_alg$<$ CONTAINER\_TYPES $>$}}
\doxysubsubsection{\texorpdfstring{output\_type}{output\_type}}
{\footnotesize\ttfamily template$<$typename C\+O\+N\+T\+A\+I\+N\+E\+R\+\_\+\+T\+Y\+P\+ES $>$ \\
typedef C\+O\+N\+T\+A\+I\+N\+E\+R\+\_\+\+T\+Y\+P\+E\+S\+::buffer \mbox{\hyperlink{classtraccc_1_1device_1_1container__h2d__copy__alg}{traccc\+::device\+::container\+\_\+h2d\+\_\+copy\+\_\+alg}}$<$ C\+O\+N\+T\+A\+I\+N\+E\+R\+\_\+\+T\+Y\+P\+ES $>$\+::\mbox{\hyperlink{classtraccc_1_1device_1_1container__h2d__copy__alg_afe7e7e0aeee41b592b8f1108618319f4}{output\+\_\+type}}}



Helper type declaration for the output type. 



\doxysubsection{Constructor \& Destructor Documentation}
\mbox{\Hypertarget{classtraccc_1_1device_1_1container__h2d__copy__alg_a777bb54291176d4899575d25e7b8442c}\label{classtraccc_1_1device_1_1container__h2d__copy__alg_a777bb54291176d4899575d25e7b8442c}} 
\index{traccc::device::container\_h2d\_copy\_alg$<$ CONTAINER\_TYPES $>$@{traccc::device::container\_h2d\_copy\_alg$<$ CONTAINER\_TYPES $>$}!container\_h2d\_copy\_alg@{container\_h2d\_copy\_alg}}
\index{container\_h2d\_copy\_alg@{container\_h2d\_copy\_alg}!traccc::device::container\_h2d\_copy\_alg$<$ CONTAINER\_TYPES $>$@{traccc::device::container\_h2d\_copy\_alg$<$ CONTAINER\_TYPES $>$}}
\doxysubsubsection{\texorpdfstring{container\_h2d\_copy\_alg()}{container\_h2d\_copy\_alg()}}
{\footnotesize\ttfamily template$<$typename C\+O\+N\+T\+A\+I\+N\+E\+R\+\_\+\+T\+Y\+P\+ES $>$ \\
\mbox{\hyperlink{classtraccc_1_1device_1_1container__h2d__copy__alg}{traccc\+::device\+::container\+\_\+h2d\+\_\+copy\+\_\+alg}}$<$ C\+O\+N\+T\+A\+I\+N\+E\+R\+\_\+\+T\+Y\+P\+ES $>$\+::\mbox{\hyperlink{classtraccc_1_1device_1_1container__h2d__copy__alg}{container\+\_\+h2d\+\_\+copy\+\_\+alg}} (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{structtraccc_1_1memory__resource}{memory\+\_\+resource}} \&}]{mr,  }\item[{vecmem\+::copy \&}]{device\+Copy }\end{DoxyParamCaption})}



Constructor with the needed resources. 


\begin{DoxyCode}{0}
\DoxyCodeLine{19     : \mbox{\hyperlink{classtraccc_1_1device_1_1container__h2d__copy__alg_ad0f6ae9f757b2c75681db27080defb3c}{m\_mr}}(mr), \mbox{\hyperlink{classtraccc_1_1device_1_1container__h2d__copy__alg_a591c52f5f3e8820a5c030dbed5dacfbd}{m\_deviceCopy}}(deviceCopy), \mbox{\hyperlink{classtraccc_1_1device_1_1container__h2d__copy__alg_ae4d3f7f625b0d12ea38040566faf547d}{m\_hostCopy}}() \{\}}

\end{DoxyCode}


\doxysubsection{Member Function Documentation}
\mbox{\Hypertarget{classtraccc_1_1device_1_1container__h2d__copy__alg_ae0ad8e0c4c5e6a2a441b867b9e5f37e3}\label{classtraccc_1_1device_1_1container__h2d__copy__alg_ae0ad8e0c4c5e6a2a441b867b9e5f37e3}} 
\index{traccc::device::container\_h2d\_copy\_alg$<$ CONTAINER\_TYPES $>$@{traccc::device::container\_h2d\_copy\_alg$<$ CONTAINER\_TYPES $>$}!get\_sizes@{get\_sizes}}
\index{get\_sizes@{get\_sizes}!traccc::device::container\_h2d\_copy\_alg$<$ CONTAINER\_TYPES $>$@{traccc::device::container\_h2d\_copy\_alg$<$ CONTAINER\_TYPES $>$}}
\doxysubsubsection{\texorpdfstring{get\_sizes()}{get\_sizes()}}
{\footnotesize\ttfamily template$<$typename C\+O\+N\+T\+A\+I\+N\+E\+R\+\_\+\+T\+Y\+P\+ES $>$ \\
std\+::vector$<$ std\+::size\+\_\+t $>$ \mbox{\hyperlink{classtraccc_1_1device_1_1container__h2d__copy__alg}{traccc\+::device\+::container\+\_\+h2d\+\_\+copy\+\_\+alg}}$<$ C\+O\+N\+T\+A\+I\+N\+E\+R\+\_\+\+T\+Y\+P\+ES $>$\+::get\+\_\+sizes (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classtraccc_1_1device_1_1container__h2d__copy__alg_a613c176cd84fa9d1a5cb825f747056ae}{input\+\_\+type}}}]{input }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [private]}}



Helper function calculating the size(s) of the input container. 


\begin{DoxyCode}{0}
\DoxyCodeLine{83                             \{}
\DoxyCodeLine{84 }
\DoxyCodeLine{85     \textcolor{comment}{// Get the sizes of the jagged vector. Remember that the input comes from}}
\DoxyCodeLine{86     \textcolor{comment}{// host accessible memory. (Using the vecmem::copy object is not a good idea}}
\DoxyCodeLine{87     \textcolor{comment}{// in this case.)}}
\DoxyCodeLine{88     assert(input.headers.size() == input.items.size());}
\DoxyCodeLine{89     std::vector<std::size\_t> sizes(input.headers.size(), 0);}
\DoxyCodeLine{90     \textcolor{keyword}{const} \textcolor{keyword}{typename} CONTAINER\_TYPES::const\_device device(input);}
\DoxyCodeLine{91     std::transform(device.get\_items().begin(), device.get\_items().end(),}
\DoxyCodeLine{92                    sizes.begin(), [](\textcolor{keyword}{const} \textcolor{keyword}{auto}\& vec) \{ return vec.size(); \});}
\DoxyCodeLine{93 }
\DoxyCodeLine{94     \textcolor{comment}{// Return the sizes.}}
\DoxyCodeLine{95     \textcolor{keywordflow}{return} sizes;}
\DoxyCodeLine{96 \}}

\end{DoxyCode}
\mbox{\Hypertarget{classtraccc_1_1device_1_1container__h2d__copy__alg_a1da0ba6cedf35351928abe68703e5efd}\label{classtraccc_1_1device_1_1container__h2d__copy__alg_a1da0ba6cedf35351928abe68703e5efd}} 
\index{traccc::device::container\_h2d\_copy\_alg$<$ CONTAINER\_TYPES $>$@{traccc::device::container\_h2d\_copy\_alg$<$ CONTAINER\_TYPES $>$}!operator()@{operator()}}
\index{operator()@{operator()}!traccc::device::container\_h2d\_copy\_alg$<$ CONTAINER\_TYPES $>$@{traccc::device::container\_h2d\_copy\_alg$<$ CONTAINER\_TYPES $>$}}
\doxysubsubsection{\texorpdfstring{operator()()}{operator()()}\hspace{0.1cm}{\footnotesize\ttfamily [1/2]}}
{\footnotesize\ttfamily template$<$typename C\+O\+N\+T\+A\+I\+N\+E\+R\+\_\+\+T\+Y\+P\+ES $>$ \\
\mbox{\hyperlink{classtraccc_1_1device_1_1container__h2d__copy__alg}{container\+\_\+h2d\+\_\+copy\+\_\+alg}}$<$ C\+O\+N\+T\+A\+I\+N\+E\+R\+\_\+\+T\+Y\+P\+ES $>$\+::\mbox{\hyperlink{classtraccc_1_1device_1_1container__h2d__copy__alg_afe7e7e0aeee41b592b8f1108618319f4}{output\+\_\+type}} \mbox{\hyperlink{classtraccc_1_1device_1_1container__h2d__copy__alg}{traccc\+::device\+::container\+\_\+h2d\+\_\+copy\+\_\+alg}}$<$ C\+O\+N\+T\+A\+I\+N\+E\+R\+\_\+\+T\+Y\+P\+ES $>$\+::operator() (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classtraccc_1_1device_1_1container__h2d__copy__alg_a613c176cd84fa9d1a5cb825f747056ae}{input\+\_\+type}}}]{input }\end{DoxyParamCaption}) const}



Function executing a simple copy to the device. 


\begin{DoxyCode}{0}
\DoxyCodeLine{23                                                                           \{}
\DoxyCodeLine{24 }
\DoxyCodeLine{25     \textcolor{comment}{// Get the sizes of the jagged vector.}}
\DoxyCodeLine{26     \textcolor{keyword}{const} std::vector<std::size\_t> sizes = \mbox{\hyperlink{classtraccc_1_1device_1_1container__h2d__copy__alg_ae0ad8e0c4c5e6a2a441b867b9e5f37e3}{get\_sizes}}(input);}
\DoxyCodeLine{27 }
\DoxyCodeLine{28     \textcolor{comment}{// Create the output buffer with the correct sizes.}}
\DoxyCodeLine{29     \mbox{\hyperlink{classtraccc_1_1device_1_1container__h2d__copy__alg_afe7e7e0aeee41b592b8f1108618319f4}{output\_type}} result\{\{\textcolor{keyword}{static\_cast<}\mbox{\hyperlink{classtraccc_1_1device_1_1container__h2d__copy__alg_a82072cfa6f5796007d604fcde72c5bfb}{header\_size\_type}}\textcolor{keyword}{>}(sizes.size()), \mbox{\hyperlink{classtraccc_1_1device_1_1container__h2d__copy__alg_ad0f6ae9f757b2c75681db27080defb3c}{m\_mr}}.\mbox{\hyperlink{structtraccc_1_1memory__resource_a9f1136a4fdab877dd1bbd1a2996e2149}{main}}\},}
\DoxyCodeLine{30                        \{sizes, \mbox{\hyperlink{classtraccc_1_1device_1_1container__h2d__copy__alg_ad0f6ae9f757b2c75681db27080defb3c}{m\_mr}}.\mbox{\hyperlink{structtraccc_1_1memory__resource_a9f1136a4fdab877dd1bbd1a2996e2149}{main}}, \mbox{\hyperlink{classtraccc_1_1device_1_1container__h2d__copy__alg_ad0f6ae9f757b2c75681db27080defb3c}{m\_mr}}.\mbox{\hyperlink{structtraccc_1_1memory__resource_a3a7e6ce915149a10e37a9e9c6d73bf95}{host}}\}\};}
\DoxyCodeLine{31     \mbox{\hyperlink{classtraccc_1_1device_1_1container__h2d__copy__alg_a591c52f5f3e8820a5c030dbed5dacfbd}{m\_deviceCopy}}.setup(result.headers);}
\DoxyCodeLine{32     \mbox{\hyperlink{classtraccc_1_1device_1_1container__h2d__copy__alg_a591c52f5f3e8820a5c030dbed5dacfbd}{m\_deviceCopy}}.setup(result.items);}
\DoxyCodeLine{33 }
\DoxyCodeLine{34     \textcolor{comment}{// Copy data straight into it.}}
\DoxyCodeLine{35     \mbox{\hyperlink{classtraccc_1_1device_1_1container__h2d__copy__alg_a591c52f5f3e8820a5c030dbed5dacfbd}{m\_deviceCopy}}(input.headers, result.headers,}
\DoxyCodeLine{36                  vecmem::copy::type::host\_to\_device);}
\DoxyCodeLine{37     \mbox{\hyperlink{classtraccc_1_1device_1_1container__h2d__copy__alg_a591c52f5f3e8820a5c030dbed5dacfbd}{m\_deviceCopy}}(input.items, result.items, vecmem::copy::type::host\_to\_device);}
\DoxyCodeLine{38 }
\DoxyCodeLine{39     \textcolor{comment}{// Return the created buffer.}}
\DoxyCodeLine{40     \textcolor{keywordflow}{return} result;}
\DoxyCodeLine{41 \}}

\end{DoxyCode}
\mbox{\Hypertarget{classtraccc_1_1device_1_1container__h2d__copy__alg_af027bcf9f872a7b522b30e329ec084f8}\label{classtraccc_1_1device_1_1container__h2d__copy__alg_af027bcf9f872a7b522b30e329ec084f8}} 
\index{traccc::device::container\_h2d\_copy\_alg$<$ CONTAINER\_TYPES $>$@{traccc::device::container\_h2d\_copy\_alg$<$ CONTAINER\_TYPES $>$}!operator()@{operator()}}
\index{operator()@{operator()}!traccc::device::container\_h2d\_copy\_alg$<$ CONTAINER\_TYPES $>$@{traccc::device::container\_h2d\_copy\_alg$<$ CONTAINER\_TYPES $>$}}
\doxysubsubsection{\texorpdfstring{operator()()}{operator()()}\hspace{0.1cm}{\footnotesize\ttfamily [2/2]}}
{\footnotesize\ttfamily template$<$typename C\+O\+N\+T\+A\+I\+N\+E\+R\+\_\+\+T\+Y\+P\+ES $>$ \\
\mbox{\hyperlink{classtraccc_1_1device_1_1container__h2d__copy__alg}{container\+\_\+h2d\+\_\+copy\+\_\+alg}}$<$ C\+O\+N\+T\+A\+I\+N\+E\+R\+\_\+\+T\+Y\+P\+ES $>$\+::\mbox{\hyperlink{classtraccc_1_1device_1_1container__h2d__copy__alg_afe7e7e0aeee41b592b8f1108618319f4}{output\+\_\+type}} \mbox{\hyperlink{classtraccc_1_1device_1_1container__h2d__copy__alg}{traccc\+::device\+::container\+\_\+h2d\+\_\+copy\+\_\+alg}}$<$ C\+O\+N\+T\+A\+I\+N\+E\+R\+\_\+\+T\+Y\+P\+ES $>$\+::operator() (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classtraccc_1_1device_1_1container__h2d__copy__alg_a613c176cd84fa9d1a5cb825f747056ae}{input\+\_\+type}}}]{input,  }\item[{typename C\+O\+N\+T\+A\+I\+N\+E\+R\+\_\+\+T\+Y\+P\+E\+S\+::buffer \&}]{host\+Buffer }\end{DoxyParamCaption}) const}



Function executing an optimised copy to the device. 


\begin{DoxyCode}{0}
\DoxyCodeLine{46                                                                         \{}
\DoxyCodeLine{47 }
\DoxyCodeLine{48     \textcolor{comment}{// Get the sizes of the jagged vector.}}
\DoxyCodeLine{49     \textcolor{keyword}{const} std::vector<std::size\_t> sizes = \mbox{\hyperlink{classtraccc_1_1device_1_1container__h2d__copy__alg_ae0ad8e0c4c5e6a2a441b867b9e5f37e3}{get\_sizes}}(input);}
\DoxyCodeLine{50     \textcolor{keyword}{const} \mbox{\hyperlink{classtraccc_1_1device_1_1container__h2d__copy__alg_a82072cfa6f5796007d604fcde72c5bfb}{header\_size\_type}} size = \textcolor{keyword}{static\_cast<}\mbox{\hyperlink{classtraccc_1_1device_1_1container__h2d__copy__alg_a82072cfa6f5796007d604fcde72c5bfb}{header\_size\_type}}\textcolor{keyword}{>}(sizes.size());}
\DoxyCodeLine{51 }
\DoxyCodeLine{52     \textcolor{comment}{// Decide what memory resource to use for the host container.}}
\DoxyCodeLine{53     vecmem::memory\_resource* host\_mr =}
\DoxyCodeLine{54         (\mbox{\hyperlink{classtraccc_1_1device_1_1container__h2d__copy__alg_ad0f6ae9f757b2c75681db27080defb3c}{m\_mr}}.\mbox{\hyperlink{structtraccc_1_1memory__resource_a3a7e6ce915149a10e37a9e9c6d73bf95}{host}} != \textcolor{keyword}{nullptr}) ? \mbox{\hyperlink{classtraccc_1_1device_1_1container__h2d__copy__alg_ad0f6ae9f757b2c75681db27080defb3c}{m\_mr}}.\mbox{\hyperlink{structtraccc_1_1memory__resource_a3a7e6ce915149a10e37a9e9c6d73bf95}{host}} : \&(\mbox{\hyperlink{classtraccc_1_1device_1_1container__h2d__copy__alg_ad0f6ae9f757b2c75681db27080defb3c}{m\_mr}}.\mbox{\hyperlink{structtraccc_1_1memory__resource_a9f1136a4fdab877dd1bbd1a2996e2149}{main}});}
\DoxyCodeLine{55 }
\DoxyCodeLine{56     \textcolor{comment}{// Create/set the host buffer.}}
\DoxyCodeLine{57     hostBuffer =}
\DoxyCodeLine{58         \textcolor{keyword}{typename} CONTAINER\_TYPES::buffer\{\{size, *host\_mr\}, \{sizes, *host\_mr\}\};}
\DoxyCodeLine{59     \mbox{\hyperlink{classtraccc_1_1device_1_1container__h2d__copy__alg_ae4d3f7f625b0d12ea38040566faf547d}{m\_hostCopy}}.setup(hostBuffer.headers);}
\DoxyCodeLine{60     \mbox{\hyperlink{classtraccc_1_1device_1_1container__h2d__copy__alg_ae4d3f7f625b0d12ea38040566faf547d}{m\_hostCopy}}.setup(hostBuffer.items);}
\DoxyCodeLine{61 }
\DoxyCodeLine{62     \textcolor{comment}{// Copy the data into the host buffer.}}
\DoxyCodeLine{63     \mbox{\hyperlink{classtraccc_1_1device_1_1container__h2d__copy__alg_ae4d3f7f625b0d12ea38040566faf547d}{m\_hostCopy}}(input.headers, hostBuffer.headers);}
\DoxyCodeLine{64     \mbox{\hyperlink{classtraccc_1_1device_1_1container__h2d__copy__alg_ae4d3f7f625b0d12ea38040566faf547d}{m\_hostCopy}}(input.items, hostBuffer.items);}
\DoxyCodeLine{65 }
\DoxyCodeLine{66     \textcolor{comment}{// Create the output buffer with the correct sizes.}}
\DoxyCodeLine{67     \mbox{\hyperlink{classtraccc_1_1device_1_1container__h2d__copy__alg_afe7e7e0aeee41b592b8f1108618319f4}{output\_type}} result\{\{size, \mbox{\hyperlink{classtraccc_1_1device_1_1container__h2d__copy__alg_ad0f6ae9f757b2c75681db27080defb3c}{m\_mr}}.\mbox{\hyperlink{structtraccc_1_1memory__resource_a9f1136a4fdab877dd1bbd1a2996e2149}{main}}\}, \{sizes, \mbox{\hyperlink{classtraccc_1_1device_1_1container__h2d__copy__alg_ad0f6ae9f757b2c75681db27080defb3c}{m\_mr}}.\mbox{\hyperlink{structtraccc_1_1memory__resource_a9f1136a4fdab877dd1bbd1a2996e2149}{main}}, \mbox{\hyperlink{classtraccc_1_1device_1_1container__h2d__copy__alg_ad0f6ae9f757b2c75681db27080defb3c}{m\_mr}}.\mbox{\hyperlink{structtraccc_1_1memory__resource_a3a7e6ce915149a10e37a9e9c6d73bf95}{host}}\}\};}
\DoxyCodeLine{68     \mbox{\hyperlink{classtraccc_1_1device_1_1container__h2d__copy__alg_a591c52f5f3e8820a5c030dbed5dacfbd}{m\_deviceCopy}}.setup(result.headers);}
\DoxyCodeLine{69     \mbox{\hyperlink{classtraccc_1_1device_1_1container__h2d__copy__alg_a591c52f5f3e8820a5c030dbed5dacfbd}{m\_deviceCopy}}.setup(result.items);}
\DoxyCodeLine{70 }
\DoxyCodeLine{71     \textcolor{comment}{// Copy data from the host buffer into the device/result buffer.}}
\DoxyCodeLine{72     \mbox{\hyperlink{classtraccc_1_1device_1_1container__h2d__copy__alg_a591c52f5f3e8820a5c030dbed5dacfbd}{m\_deviceCopy}}(hostBuffer.headers, result.headers,}
\DoxyCodeLine{73                  vecmem::copy::type::host\_to\_device);}
\DoxyCodeLine{74     \mbox{\hyperlink{classtraccc_1_1device_1_1container__h2d__copy__alg_a591c52f5f3e8820a5c030dbed5dacfbd}{m\_deviceCopy}}(hostBuffer.items, result.items,}
\DoxyCodeLine{75                  vecmem::copy::type::host\_to\_device);}
\DoxyCodeLine{76 }
\DoxyCodeLine{77     \textcolor{comment}{// Return the created buffer.}}
\DoxyCodeLine{78     \textcolor{keywordflow}{return} result;}
\DoxyCodeLine{79 \}}

\end{DoxyCode}


\doxysubsection{Member Data Documentation}
\mbox{\Hypertarget{classtraccc_1_1device_1_1container__h2d__copy__alg_a591c52f5f3e8820a5c030dbed5dacfbd}\label{classtraccc_1_1device_1_1container__h2d__copy__alg_a591c52f5f3e8820a5c030dbed5dacfbd}} 
\index{traccc::device::container\_h2d\_copy\_alg$<$ CONTAINER\_TYPES $>$@{traccc::device::container\_h2d\_copy\_alg$<$ CONTAINER\_TYPES $>$}!m\_deviceCopy@{m\_deviceCopy}}
\index{m\_deviceCopy@{m\_deviceCopy}!traccc::device::container\_h2d\_copy\_alg$<$ CONTAINER\_TYPES $>$@{traccc::device::container\_h2d\_copy\_alg$<$ CONTAINER\_TYPES $>$}}
\doxysubsubsection{\texorpdfstring{m\_deviceCopy}{m\_deviceCopy}}
{\footnotesize\ttfamily template$<$typename C\+O\+N\+T\+A\+I\+N\+E\+R\+\_\+\+T\+Y\+P\+ES $>$ \\
vecmem\+::copy\& \mbox{\hyperlink{classtraccc_1_1device_1_1container__h2d__copy__alg}{traccc\+::device\+::container\+\_\+h2d\+\_\+copy\+\_\+alg}}$<$ C\+O\+N\+T\+A\+I\+N\+E\+R\+\_\+\+T\+Y\+P\+ES $>$\+::m\+\_\+device\+Copy\hspace{0.3cm}{\ttfamily [private]}}



The H-\/$>$D copy object to use. 

\mbox{\Hypertarget{classtraccc_1_1device_1_1container__h2d__copy__alg_ae4d3f7f625b0d12ea38040566faf547d}\label{classtraccc_1_1device_1_1container__h2d__copy__alg_ae4d3f7f625b0d12ea38040566faf547d}} 
\index{traccc::device::container\_h2d\_copy\_alg$<$ CONTAINER\_TYPES $>$@{traccc::device::container\_h2d\_copy\_alg$<$ CONTAINER\_TYPES $>$}!m\_hostCopy@{m\_hostCopy}}
\index{m\_hostCopy@{m\_hostCopy}!traccc::device::container\_h2d\_copy\_alg$<$ CONTAINER\_TYPES $>$@{traccc::device::container\_h2d\_copy\_alg$<$ CONTAINER\_TYPES $>$}}
\doxysubsubsection{\texorpdfstring{m\_hostCopy}{m\_hostCopy}}
{\footnotesize\ttfamily template$<$typename C\+O\+N\+T\+A\+I\+N\+E\+R\+\_\+\+T\+Y\+P\+ES $>$ \\
vecmem\+::copy \mbox{\hyperlink{classtraccc_1_1device_1_1container__h2d__copy__alg}{traccc\+::device\+::container\+\_\+h2d\+\_\+copy\+\_\+alg}}$<$ C\+O\+N\+T\+A\+I\+N\+E\+R\+\_\+\+T\+Y\+P\+ES $>$\+::m\+\_\+host\+Copy\hspace{0.3cm}{\ttfamily [private]}}



The H-\/$>$H copy object to use. 

\mbox{\Hypertarget{classtraccc_1_1device_1_1container__h2d__copy__alg_ad0f6ae9f757b2c75681db27080defb3c}\label{classtraccc_1_1device_1_1container__h2d__copy__alg_ad0f6ae9f757b2c75681db27080defb3c}} 
\index{traccc::device::container\_h2d\_copy\_alg$<$ CONTAINER\_TYPES $>$@{traccc::device::container\_h2d\_copy\_alg$<$ CONTAINER\_TYPES $>$}!m\_mr@{m\_mr}}
\index{m\_mr@{m\_mr}!traccc::device::container\_h2d\_copy\_alg$<$ CONTAINER\_TYPES $>$@{traccc::device::container\_h2d\_copy\_alg$<$ CONTAINER\_TYPES $>$}}
\doxysubsubsection{\texorpdfstring{m\_mr}{m\_mr}}
{\footnotesize\ttfamily template$<$typename C\+O\+N\+T\+A\+I\+N\+E\+R\+\_\+\+T\+Y\+P\+ES $>$ \\
\mbox{\hyperlink{structtraccc_1_1memory__resource}{memory\+\_\+resource}} \mbox{\hyperlink{classtraccc_1_1device_1_1container__h2d__copy__alg}{traccc\+::device\+::container\+\_\+h2d\+\_\+copy\+\_\+alg}}$<$ C\+O\+N\+T\+A\+I\+N\+E\+R\+\_\+\+T\+Y\+P\+ES $>$\+::m\+\_\+mr\hspace{0.3cm}{\ttfamily [private]}}



The memory resource(s) to use. 



The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
device/common/include/traccc/device/\mbox{\hyperlink{container__h2d__copy__alg_8hpp}{container\+\_\+h2d\+\_\+copy\+\_\+alg.\+hpp}}\item 
device/common/include/traccc/device/impl/\mbox{\hyperlink{container__h2d__copy__alg_8ipp}{container\+\_\+h2d\+\_\+copy\+\_\+alg.\+ipp}}\end{DoxyCompactItemize}
