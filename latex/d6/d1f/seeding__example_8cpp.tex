\hypertarget{seeding__example_8cpp}{}\doxysection{examples/run/cpu/seeding\+\_\+example.cpp File Reference}
\label{seeding__example_8cpp}\index{examples/run/cpu/seeding\_example.cpp@{examples/run/cpu/seeding\_example.cpp}}
{\ttfamily \#include \char`\"{}traccc/definitions/common.\+hpp\char`\"{}}\newline
{\ttfamily \#include \char`\"{}traccc/definitions/primitives.\+hpp\char`\"{}}\newline
{\ttfamily \#include \char`\"{}traccc/io/read\+\_\+geometry.\+hpp\char`\"{}}\newline
{\ttfamily \#include \char`\"{}traccc/io/read\+\_\+measurements.\+hpp\char`\"{}}\newline
{\ttfamily \#include \char`\"{}traccc/io/read\+\_\+spacepoints.\+hpp\char`\"{}}\newline
{\ttfamily \#include \char`\"{}traccc/io/utils.\+hpp\char`\"{}}\newline
{\ttfamily \#include \char`\"{}traccc/finding/finding\+\_\+algorithm.\+hpp\char`\"{}}\newline
{\ttfamily \#include \char`\"{}traccc/fitting/fitting\+\_\+algorithm.\+hpp\char`\"{}}\newline
{\ttfamily \#include \char`\"{}traccc/seeding/seeding\+\_\+algorithm.\+hpp\char`\"{}}\newline
{\ttfamily \#include \char`\"{}traccc/seeding/track\+\_\+params\+\_\+estimation.\+hpp\char`\"{}}\newline
{\ttfamily \#include \char`\"{}traccc/efficiency/finding\+\_\+performance\+\_\+writer.\+hpp\char`\"{}}\newline
{\ttfamily \#include \char`\"{}traccc/efficiency/seeding\+\_\+performance\+\_\+writer.\+hpp\char`\"{}}\newline
{\ttfamily \#include \char`\"{}traccc/resolution/fitting\+\_\+performance\+\_\+writer.\+hpp\char`\"{}}\newline
{\ttfamily \#include \char`\"{}traccc/options/common\+\_\+options.\+hpp\char`\"{}}\newline
{\ttfamily \#include \char`\"{}traccc/options/detector\+\_\+input\+\_\+options.\+hpp\char`\"{}}\newline
{\ttfamily \#include \char`\"{}traccc/options/finding\+\_\+input\+\_\+options.\+hpp\char`\"{}}\newline
{\ttfamily \#include \char`\"{}traccc/options/handle\+\_\+argument\+\_\+errors.\+hpp\char`\"{}}\newline
{\ttfamily \#include \char`\"{}traccc/options/propagation\+\_\+options.\+hpp\char`\"{}}\newline
{\ttfamily \#include \char`\"{}traccc/options/seeding\+\_\+input\+\_\+options.\+hpp\char`\"{}}\newline
{\ttfamily \#include \char`\"{}detray/core/detector.\+hpp\char`\"{}}\newline
{\ttfamily \#include \char`\"{}detray/core/detector\+\_\+metadata.\+hpp\char`\"{}}\newline
{\ttfamily \#include \char`\"{}detray/detectors/bfield.\+hpp\char`\"{}}\newline
{\ttfamily \#include \char`\"{}detray/io/common/detector\+\_\+reader.\+hpp\char`\"{}}\newline
{\ttfamily \#include \char`\"{}detray/propagator/navigator.\+hpp\char`\"{}}\newline
{\ttfamily \#include \char`\"{}detray/propagator/propagator.\+hpp\char`\"{}}\newline
{\ttfamily \#include \char`\"{}detray/propagator/rk\+\_\+stepper.\+hpp\char`\"{}}\newline
{\ttfamily \#include $<$vecmem/memory/host\+\_\+memory\+\_\+resource.\+hpp$>$}\newline
{\ttfamily \#include $<$iostream$>$}\newline
Include dependency graph for seeding\+\_\+example.\+cpp\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{d1/d34/seeding__example_8cpp__incl}
\end{center}
\end{figure}
\doxysubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
int \mbox{\hyperlink{seeding__example_8cpp_a477e0dd621ef51b7c68972a98892a569}{seq\+\_\+run}} (const \mbox{\hyperlink{structtraccc_1_1seeding__input__config}{traccc\+::seeding\+\_\+input\+\_\+config}} \&, const \mbox{\hyperlink{structtraccc_1_1finding__input__config}{traccc\+::finding\+\_\+input\+\_\+config}} \&finding\+\_\+cfg, const \mbox{\hyperlink{structtraccc_1_1propagation__options}{traccc\+::propagation\+\_\+options}}$<$ \mbox{\hyperlink{namespacetraccc_aab82ddc5db54d9ad84b1215320482993}{traccc\+::scalar}} $>$ \&propagation\+\_\+opts, const \mbox{\hyperlink{structtraccc_1_1common__options}{traccc\+::common\+\_\+options}} \&common\+\_\+opts, const \mbox{\hyperlink{structtraccc_1_1detector__input__options}{traccc\+::detector\+\_\+input\+\_\+options}} \&det\+\_\+opts)
\item 
int \mbox{\hyperlink{seeding__example_8cpp_a0ddf1224851353fc92bfbff6f499fa97}{main}} (int argc, char $\ast$argv\mbox{[}$\,$\mbox{]})
\end{DoxyCompactItemize}


\doxysubsection{Function Documentation}
\mbox{\Hypertarget{seeding__example_8cpp_a0ddf1224851353fc92bfbff6f499fa97}\label{seeding__example_8cpp_a0ddf1224851353fc92bfbff6f499fa97}} 
\index{seeding\_example.cpp@{seeding\_example.cpp}!main@{main}}
\index{main@{main}!seeding\_example.cpp@{seeding\_example.cpp}}
\doxysubsubsection{\texorpdfstring{main()}{main()}}
{\footnotesize\ttfamily int main (\begin{DoxyParamCaption}\item[{int}]{argc,  }\item[{char $\ast$}]{argv\mbox{[}$\,$\mbox{]} }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{248                                  \{}
\DoxyCodeLine{249     \textcolor{comment}{// Set up the program options}}
\DoxyCodeLine{250     po::options\_description desc(\textcolor{stringliteral}{"Allowed options"});}
\DoxyCodeLine{251 }
\DoxyCodeLine{252     \textcolor{comment}{// Add options}}
\DoxyCodeLine{253     desc.add\_options()(\textcolor{stringliteral}{"help,h"}, \textcolor{stringliteral}{"Give some help with the program's options"});}
\DoxyCodeLine{254     \mbox{\hyperlink{structtraccc_1_1common__options}{traccc::common\_options}} common\_opts(desc);}
\DoxyCodeLine{255     \mbox{\hyperlink{structtraccc_1_1detector__input__options}{traccc::detector\_input\_options}} det\_opts(desc);}
\DoxyCodeLine{256     \mbox{\hyperlink{structtraccc_1_1seeding__input__config}{traccc::seeding\_input\_config}} seeding\_input\_cfg(desc);}
\DoxyCodeLine{257     \mbox{\hyperlink{structtraccc_1_1finding__input__config}{traccc::finding\_input\_config}} finding\_input\_cfg(desc);}
\DoxyCodeLine{258     \mbox{\hyperlink{structtraccc_1_1propagation__options}{traccc::propagation\_options<traccc::scalar>}} propagation\_opts(desc);}
\DoxyCodeLine{259 }
\DoxyCodeLine{260     po::variables\_map vm;}
\DoxyCodeLine{261     po::store(po::parse\_command\_line(argc, argv, desc), vm);}
\DoxyCodeLine{262 }
\DoxyCodeLine{263     \textcolor{comment}{// Check errors}}
\DoxyCodeLine{264     \mbox{\hyperlink{namespacetraccc_a018e1f5ae8dbab3e118c08cfb905be01}{traccc::handle\_argument\_errors}}(vm, desc);}
\DoxyCodeLine{265 }
\DoxyCodeLine{266     \textcolor{comment}{// Read options}}
\DoxyCodeLine{267     common\_opts.read(vm);}
\DoxyCodeLine{268     det\_opts.read(vm);}
\DoxyCodeLine{269     seeding\_input\_cfg.read(vm);}
\DoxyCodeLine{270     finding\_input\_cfg.read(vm);}
\DoxyCodeLine{271     propagation\_opts.read(vm);}
\DoxyCodeLine{272 }
\DoxyCodeLine{273     std::cout << \textcolor{stringliteral}{"Running "} << argv[0] << \textcolor{stringliteral}{" "} << det\_opts.detector\_file << \textcolor{stringliteral}{" "}}
\DoxyCodeLine{274               << common\_opts.input\_directory << \textcolor{stringliteral}{" "} << common\_opts.events}
\DoxyCodeLine{275               << std::endl;}
\DoxyCodeLine{276 }
\DoxyCodeLine{277     \textcolor{keywordflow}{return} \mbox{\hyperlink{seeding__example_8cpp_a477e0dd621ef51b7c68972a98892a569}{seq\_run}}(seeding\_input\_cfg, finding\_input\_cfg, propagation\_opts,}
\DoxyCodeLine{278                    common\_opts, det\_opts);}
\DoxyCodeLine{279 \}}

\end{DoxyCode}


References traccc\+::detector\+\_\+input\+\_\+options\+::detector\+\_\+file, traccc\+::common\+\_\+options\+::events, traccc\+::handle\+\_\+argument\+\_\+errors(), traccc\+::common\+\_\+options\+::input\+\_\+directory, traccc\+::seeding\+\_\+input\+\_\+config\+::read(), traccc\+::detector\+\_\+input\+\_\+options\+::read(), traccc\+::finding\+\_\+input\+\_\+config\+::read(), traccc\+::common\+\_\+options\+::read(), traccc\+::propagation\+\_\+options$<$ scalar\+\_\+t $>$\+::read(), and seq\+\_\+run().

\mbox{\Hypertarget{seeding__example_8cpp_a477e0dd621ef51b7c68972a98892a569}\label{seeding__example_8cpp_a477e0dd621ef51b7c68972a98892a569}} 
\index{seeding\_example.cpp@{seeding\_example.cpp}!seq\_run@{seq\_run}}
\index{seq\_run@{seq\_run}!seeding\_example.cpp@{seeding\_example.cpp}}
\doxysubsubsection{\texorpdfstring{seq\_run()}{seq\_run()}}
{\footnotesize\ttfamily int seq\+\_\+run (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{structtraccc_1_1seeding__input__config}{traccc\+::seeding\+\_\+input\+\_\+config}} \&}]{,  }\item[{const \mbox{\hyperlink{structtraccc_1_1finding__input__config}{traccc\+::finding\+\_\+input\+\_\+config}} \&}]{finding\+\_\+cfg,  }\item[{const \mbox{\hyperlink{structtraccc_1_1propagation__options}{traccc\+::propagation\+\_\+options}}$<$ \mbox{\hyperlink{namespacetraccc_aab82ddc5db54d9ad84b1215320482993}{traccc\+::scalar}} $>$ \&}]{propagation\+\_\+opts,  }\item[{const \mbox{\hyperlink{structtraccc_1_1common__options}{traccc\+::common\+\_\+options}} \&}]{common\+\_\+opts,  }\item[{const \mbox{\hyperlink{structtraccc_1_1detector__input__options}{traccc\+::detector\+\_\+input\+\_\+options}} \&}]{det\+\_\+opts }\end{DoxyParamCaption})}

Type declarations
\begin{DoxyCode}{0}
\DoxyCodeLine{59                                                           \{}
\DoxyCodeLine{60 }
\DoxyCodeLine{62     \textcolor{keyword}{using} host\_detector\_type = detray::detector<>;}
\DoxyCodeLine{63 }
\DoxyCodeLine{64     \textcolor{keyword}{using} b\_field\_t = covfie::field<detray::bfield::const\_bknd\_t>;}
\DoxyCodeLine{65     \textcolor{keyword}{using} rk\_stepper\_type =}
\DoxyCodeLine{66         detray::rk\_stepper<b\_field\_t::view\_t,}
\DoxyCodeLine{67                            \textcolor{keyword}{typename} \mbox{\hyperlink{namespacetraccc_a7d1f91ecd225f32ea85349bf0bc8adb8}{host\_detector\_type::transform3}},}
\DoxyCodeLine{68                            detray::constrained\_step<>>;}
\DoxyCodeLine{69     \textcolor{keyword}{using} host\_navigator\_type = detray::navigator<const host\_detector\_type>;}
\DoxyCodeLine{70     \textcolor{keyword}{using} host\_fitter\_type =}
\DoxyCodeLine{71         \mbox{\hyperlink{classtraccc_1_1kalman__fitter}{traccc::kalman\_fitter<rk\_stepper\_type, host\_navigator\_type>}};}
\DoxyCodeLine{72 }
\DoxyCodeLine{73     \textcolor{comment}{// Memory resource used by the EDM.}}
\DoxyCodeLine{74     vecmem::host\_memory\_resource host\_mr;}
\DoxyCodeLine{75 }
\DoxyCodeLine{76     \textcolor{comment}{// Performance writer}}
\DoxyCodeLine{77     \mbox{\hyperlink{classtraccc_1_1seeding__performance__writer}{traccc::seeding\_performance\_writer}} sd\_performance\_writer(}
\DoxyCodeLine{78         \mbox{\hyperlink{structtraccc_1_1seeding__performance__writer_1_1config}{traccc::seeding\_performance\_writer::config}}\{\});}
\DoxyCodeLine{79     \mbox{\hyperlink{classtraccc_1_1finding__performance__writer}{traccc::finding\_performance\_writer}} find\_performance\_writer(}
\DoxyCodeLine{80         \mbox{\hyperlink{structtraccc_1_1finding__performance__writer_1_1config}{traccc::finding\_performance\_writer::config}}\{\});}
\DoxyCodeLine{81     \mbox{\hyperlink{classtraccc_1_1fitting__performance__writer}{traccc::fitting\_performance\_writer}} fit\_performance\_writer(}
\DoxyCodeLine{82         \mbox{\hyperlink{structtraccc_1_1fitting__performance__writer_1_1config}{traccc::fitting\_performance\_writer::config}}\{\});}
\DoxyCodeLine{83 }
\DoxyCodeLine{84     \textcolor{comment}{// Output stats}}
\DoxyCodeLine{85     uint64\_t n\_spacepoints = 0;}
\DoxyCodeLine{86     uint64\_t n\_measurements = 0;}
\DoxyCodeLine{87     uint64\_t n\_seeds = 0;}
\DoxyCodeLine{88     uint64\_t n\_found\_tracks = 0;}
\DoxyCodeLine{89     uint64\_t n\_fitted\_tracks = 0;}
\DoxyCodeLine{90 }
\DoxyCodeLine{91 \textcolor{comment}{    /*****************************}}
\DoxyCodeLine{92 \textcolor{comment}{     * Build a geometry}}
\DoxyCodeLine{93 \textcolor{comment}{     *****************************/}}
\DoxyCodeLine{94 }
\DoxyCodeLine{95     \textcolor{comment}{// B field value and its type}}
\DoxyCodeLine{96     \textcolor{comment}{// @TODO: Set B field as argument}}
\DoxyCodeLine{97     \textcolor{keyword}{const} \mbox{\hyperlink{namespacetraccc_a3e92464c509aa7ac245244b6083357c2}{traccc::vector3}} B\{0, 0, 2 * detray::unit<traccc::scalar>::T\};}
\DoxyCodeLine{98     \textcolor{keyword}{auto} field = detray::bfield::create\_const\_field(B);}
\DoxyCodeLine{99 }
\DoxyCodeLine{100     \textcolor{comment}{// Read the detector}}
\DoxyCodeLine{101     detray::io::detector\_reader\_config reader\_cfg\{\};}
\DoxyCodeLine{102     reader\_cfg.add\_file(\mbox{\hyperlink{namespacetraccc_1_1io_adc4b3b42d06cb8ec657cdc35dec6a58f}{traccc::io::data\_directory}}() + det\_opts.\mbox{\hyperlink{structtraccc_1_1detector__input__options_a1121f57fa16a57c9d2cef56f94390bcb}{detector\_file}});}
\DoxyCodeLine{103     \textcolor{keywordflow}{if} (!det\_opts.\mbox{\hyperlink{structtraccc_1_1detector__input__options_ad25e9f5ede26a98836d89f0fe4592e01}{material\_file}}.empty()) \{}
\DoxyCodeLine{104         reader\_cfg.add\_file(\mbox{\hyperlink{namespacetraccc_1_1io_adc4b3b42d06cb8ec657cdc35dec6a58f}{traccc::io::data\_directory}}() +}
\DoxyCodeLine{105                             det\_opts.\mbox{\hyperlink{structtraccc_1_1detector__input__options_ad25e9f5ede26a98836d89f0fe4592e01}{material\_file}});}
\DoxyCodeLine{106     \}}
\DoxyCodeLine{107     \textcolor{keywordflow}{if} (!det\_opts.\mbox{\hyperlink{structtraccc_1_1detector__input__options_a5b7ddcb0ffd9af5e0bdd7f841c38d380}{grid\_file}}.empty()) \{}
\DoxyCodeLine{108         reader\_cfg.add\_file(\mbox{\hyperlink{namespacetraccc_1_1io_adc4b3b42d06cb8ec657cdc35dec6a58f}{traccc::io::data\_directory}}() + det\_opts.\mbox{\hyperlink{structtraccc_1_1detector__input__options_a5b7ddcb0ffd9af5e0bdd7f841c38d380}{grid\_file}});}
\DoxyCodeLine{109     \}}
\DoxyCodeLine{110     \textcolor{keyword}{auto} [host\_det, names] =}
\DoxyCodeLine{111         detray::io::read\_detector<host\_detector\_type>(host\_mr, reader\_cfg);}
\DoxyCodeLine{112 }
\DoxyCodeLine{113     \mbox{\hyperlink{classtraccc_1_1module__map}{traccc::geometry}} surface\_transforms =}
\DoxyCodeLine{114         \mbox{\hyperlink{namespacetraccc_1_1io_a34c4958e67d33997fa0d3c0082169822}{traccc::io::alt\_read\_geometry}}(host\_det);}
\DoxyCodeLine{115 }
\DoxyCodeLine{116     \textcolor{comment}{// Seeding algorithm}}
\DoxyCodeLine{117     \mbox{\hyperlink{structtraccc_1_1seedfinder__config}{traccc::seedfinder\_config}} finder\_config;}
\DoxyCodeLine{118     \mbox{\hyperlink{structtraccc_1_1spacepoint__grid__config}{traccc::spacepoint\_grid\_config}} grid\_config(finder\_config);}
\DoxyCodeLine{119     \mbox{\hyperlink{structtraccc_1_1seedfilter__config}{traccc::seedfilter\_config}} filter\_config;}
\DoxyCodeLine{120 }
\DoxyCodeLine{121     \mbox{\hyperlink{classtraccc_1_1seeding__algorithm}{traccc::seeding\_algorithm}} sa(finder\_config, grid\_config, filter\_config,}
\DoxyCodeLine{122                                  host\_mr);}
\DoxyCodeLine{123     \mbox{\hyperlink{classtraccc_1_1track__params__estimation}{traccc::track\_params\_estimation}} tp(host\_mr);}
\DoxyCodeLine{124 }
\DoxyCodeLine{125     \textcolor{comment}{// Finding algorithm configuration}}
\DoxyCodeLine{126     \textcolor{keyword}{typename} \mbox{\hyperlink{classtraccc_1_1finding__algorithm}{traccc::finding\_algorithm}}<rk\_stepper\_type,}
\DoxyCodeLine{127                                        host\_navigator\_type>::config\_type cfg;}
\DoxyCodeLine{128 }
\DoxyCodeLine{129     cfg.min\_track\_candidates\_per\_track = finding\_cfg.\mbox{\hyperlink{structtraccc_1_1finding__input__config_a24e62b30ce8ff203040556441f080f16}{track\_candidates\_range}}[0];}
\DoxyCodeLine{130     cfg.max\_track\_candidates\_per\_track = finding\_cfg.\mbox{\hyperlink{structtraccc_1_1finding__input__config_a24e62b30ce8ff203040556441f080f16}{track\_candidates\_range}}[1];}
\DoxyCodeLine{131     cfg.constrained\_step\_size = propagation\_opts.\mbox{\hyperlink{structtraccc_1_1propagation__options_a81f0edca06f98598f6be3deef96e07f0}{step\_constraint}};}
\DoxyCodeLine{132 }
\DoxyCodeLine{133     \mbox{\hyperlink{classtraccc_1_1finding__algorithm}{traccc::finding\_algorithm<rk\_stepper\_type, host\_navigator\_type>}}}
\DoxyCodeLine{134         host\_finding(cfg);}
\DoxyCodeLine{135 }
\DoxyCodeLine{136     \textcolor{comment}{// Fitting algorithm object}}
\DoxyCodeLine{137     \textcolor{keyword}{typename} \mbox{\hyperlink{classtraccc_1_1fitting__algorithm_acfb92fd90e59587020bacc978ebe275c}{traccc::fitting\_algorithm<host\_fitter\_type>::config\_type}} fit\_cfg;}
\DoxyCodeLine{138     fit\_cfg.step\_constraint = propagation\_opts.\mbox{\hyperlink{structtraccc_1_1propagation__options_a81f0edca06f98598f6be3deef96e07f0}{step\_constraint}};}
\DoxyCodeLine{139     \mbox{\hyperlink{classtraccc_1_1fitting__algorithm}{traccc::fitting\_algorithm<host\_fitter\_type>}} host\_fitting(fit\_cfg);}
\DoxyCodeLine{140 }
\DoxyCodeLine{141     \textcolor{comment}{// Loop over events}}
\DoxyCodeLine{142     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} \mbox{\hyperlink{test__mapper_8cpp_aa79e3eff1ed8e629ebc8e3268c4805f9}{event}} = common\_opts.\mbox{\hyperlink{structtraccc_1_1common__options_ac0477bdb9a07bf525e12b006e141e094}{skip}};}
\DoxyCodeLine{143          \mbox{\hyperlink{test__mapper_8cpp_aa79e3eff1ed8e629ebc8e3268c4805f9}{event}} < common\_opts.\mbox{\hyperlink{structtraccc_1_1common__options_adefc317cdc0b846c7be8db1e5f0c3ef2}{events}} + common\_opts.\mbox{\hyperlink{structtraccc_1_1common__options_ac0477bdb9a07bf525e12b006e141e094}{skip}}; ++\mbox{\hyperlink{test__mapper_8cpp_aa79e3eff1ed8e629ebc8e3268c4805f9}{event}}) \{}
\DoxyCodeLine{144 }
\DoxyCodeLine{145         \textcolor{comment}{// Read the hits from the relevant event file}}
\DoxyCodeLine{146         \mbox{\hyperlink{structtraccc_1_1io_1_1spacepoint__reader__output}{traccc::io::spacepoint\_reader\_output}} readOut(\&host\_mr);}
\DoxyCodeLine{147         \mbox{\hyperlink{namespacetraccc_1_1io_afe49060da2ab77f49cfcd82308122f84}{traccc::io::read\_spacepoints}}(}
\DoxyCodeLine{148             readOut, \mbox{\hyperlink{test__mapper_8cpp_aa79e3eff1ed8e629ebc8e3268c4805f9}{event}}, common\_opts.\mbox{\hyperlink{structtraccc_1_1common__options_aec17933699762e2feb58124cef53d6b2}{input\_directory}}, surface\_transforms,}
\DoxyCodeLine{149             common\_opts.\mbox{\hyperlink{structtraccc_1_1common__options_a290ad4675f5a976c73c2a05e35dd1b5c}{input\_data\_format}});}
\DoxyCodeLine{150         \mbox{\hyperlink{structtraccc_1_1collection__types_ab1b46d2f1f58a16bde873c1aa3f4557d}{traccc::spacepoint\_collection\_types::host}}\& spacepoints\_per\_event =}
\DoxyCodeLine{151             readOut.spacepoints;}
\DoxyCodeLine{152 }
\DoxyCodeLine{153         \textcolor{comment}{/*-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{154 \textcolor{comment}{             Seeding}}
\DoxyCodeLine{155 \textcolor{comment}{          -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/*/}}
\DoxyCodeLine{156 }
\DoxyCodeLine{157         \textcolor{keyword}{auto} seeds = sa(spacepoints\_per\_event);}
\DoxyCodeLine{158 }
\DoxyCodeLine{159         \textcolor{comment}{/*-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{160 \textcolor{comment}{           Track Parameter Estimation}}
\DoxyCodeLine{161 \textcolor{comment}{          -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/*/}}
\DoxyCodeLine{162 }
\DoxyCodeLine{163         \textcolor{keyword}{auto} params = tp(spacepoints\_per\_event, seeds,}
\DoxyCodeLine{164                          \{0.f, 0.f, finder\_config.\mbox{\hyperlink{structtraccc_1_1seedfinder__config_af3b9be46bd90bb968da94db6ac36bd45}{bFieldInZ}}\});}
\DoxyCodeLine{165 }
\DoxyCodeLine{166         \textcolor{comment}{// Run CKF and KF if we are using a detray geometry}}
\DoxyCodeLine{167         \mbox{\hyperlink{classtraccc_1_1host__container}{traccc::track\_candidate\_container\_types::host}} track\_candidates;}
\DoxyCodeLine{168         \mbox{\hyperlink{classtraccc_1_1host__container}{traccc::track\_state\_container\_types::host}} track\_states;}
\DoxyCodeLine{169 }
\DoxyCodeLine{170         \textcolor{comment}{// Read measurements}}
\DoxyCodeLine{171         \mbox{\hyperlink{structtraccc_1_1io_1_1measurement__reader__output}{traccc::io::measurement\_reader\_output}} meas\_read\_out(\&host\_mr);}
\DoxyCodeLine{172         \mbox{\hyperlink{namespacetraccc_1_1io_a84e36824b32d23770ed527b25f810307}{traccc::io::read\_measurements}}(meas\_read\_out, \mbox{\hyperlink{test__mapper_8cpp_aa79e3eff1ed8e629ebc8e3268c4805f9}{event}},}
\DoxyCodeLine{173                                       common\_opts.\mbox{\hyperlink{structtraccc_1_1common__options_aec17933699762e2feb58124cef53d6b2}{input\_directory}},}
\DoxyCodeLine{174                                       \mbox{\hyperlink{namespacetraccc_af412a9ab8cc2a30a664acd9f62bb83daaad4c20898046609aa6860e412b43c422}{traccc::data\_format::csv}});}
\DoxyCodeLine{175         \mbox{\hyperlink{structtraccc_1_1collection__types_ab1b46d2f1f58a16bde873c1aa3f4557d}{traccc::measurement\_collection\_types::host}}\& measurements\_per\_event =}
\DoxyCodeLine{176             meas\_read\_out.measurements;}
\DoxyCodeLine{177         n\_measurements += measurements\_per\_event.size();}
\DoxyCodeLine{178 }
\DoxyCodeLine{179         \textcolor{comment}{/*-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{180 \textcolor{comment}{           Track Finding with CKF}}
\DoxyCodeLine{181 \textcolor{comment}{          -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/*/}}
\DoxyCodeLine{182 }
\DoxyCodeLine{183         track\_candidates =}
\DoxyCodeLine{184             host\_finding(host\_det, field, measurements\_per\_event, params);}
\DoxyCodeLine{185         n\_found\_tracks += track\_candidates.size();}
\DoxyCodeLine{186 }
\DoxyCodeLine{187         \textcolor{comment}{/*-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{188 \textcolor{comment}{           Track Fitting with KF}}
\DoxyCodeLine{189 \textcolor{comment}{          -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/*/}}
\DoxyCodeLine{190 }
\DoxyCodeLine{191         track\_states = host\_fitting(host\_det, field, track\_candidates);}
\DoxyCodeLine{192         n\_fitted\_tracks += track\_states.\mbox{\hyperlink{classtraccc_1_1host__container_afb9ec4efd2a4fc601cafb57db9ebe30e}{size}}();}
\DoxyCodeLine{193 }
\DoxyCodeLine{194         \textcolor{comment}{/*-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{195 \textcolor{comment}{           Statistics}}
\DoxyCodeLine{196 \textcolor{comment}{          -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/*/}}
\DoxyCodeLine{197 }
\DoxyCodeLine{198         n\_spacepoints += spacepoints\_per\_event.size();}
\DoxyCodeLine{199         n\_seeds += seeds.size();}
\DoxyCodeLine{200 }
\DoxyCodeLine{201         \textcolor{comment}{/*-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{202 \textcolor{comment}{          Writer}}
\DoxyCodeLine{203 \textcolor{comment}{          -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/*/}}
\DoxyCodeLine{204 }
\DoxyCodeLine{205         \textcolor{keywordflow}{if} (common\_opts.\mbox{\hyperlink{structtraccc_1_1common__options_a06a875a852f866c6ad5abfaae82cb440}{check\_performance}}) \{}
\DoxyCodeLine{206 }
\DoxyCodeLine{207             \mbox{\hyperlink{structtraccc_1_1event__map2}{traccc::event\_map2}} evt\_map(\mbox{\hyperlink{test__mapper_8cpp_aa79e3eff1ed8e629ebc8e3268c4805f9}{event}}, common\_opts.\mbox{\hyperlink{structtraccc_1_1common__options_aec17933699762e2feb58124cef53d6b2}{input\_directory}},}
\DoxyCodeLine{208                                        common\_opts.\mbox{\hyperlink{structtraccc_1_1common__options_aec17933699762e2feb58124cef53d6b2}{input\_directory}},}
\DoxyCodeLine{209                                        common\_opts.\mbox{\hyperlink{structtraccc_1_1common__options_aec17933699762e2feb58124cef53d6b2}{input\_directory}});}
\DoxyCodeLine{210             sd\_performance\_writer.write(\mbox{\hyperlink{namespacetraccc_a503d2d50b981602cbc71693ad215b298}{vecmem::get\_data}}(seeds),}
\DoxyCodeLine{211                                         \mbox{\hyperlink{namespacetraccc_a503d2d50b981602cbc71693ad215b298}{vecmem::get\_data}}(spacepoints\_per\_event),}
\DoxyCodeLine{212                                         evt\_map);}
\DoxyCodeLine{213 }
\DoxyCodeLine{214             find\_performance\_writer.write(\mbox{\hyperlink{namespacetraccc_a503d2d50b981602cbc71693ad215b298}{traccc::get\_data}}(track\_candidates),}
\DoxyCodeLine{215                                           evt\_map);}
\DoxyCodeLine{216 }
\DoxyCodeLine{217             \textcolor{keywordflow}{for} (\textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} i = 0; i < track\_states.\mbox{\hyperlink{classtraccc_1_1host__container_afb9ec4efd2a4fc601cafb57db9ebe30e}{size}}(); i++) \{}
\DoxyCodeLine{218                 \textcolor{keyword}{const} \textcolor{keyword}{auto}\& trk\_states\_per\_track = track\_states.\mbox{\hyperlink{classtraccc_1_1host__container_a22f19b70178832415310bb4fd17b9d48}{at}}(i).\mbox{\hyperlink{structtraccc_1_1container__element_a7b11224d4a0d42c39758fb2b739014f2}{items}};}
\DoxyCodeLine{219 }
\DoxyCodeLine{220                 \textcolor{keyword}{const} \textcolor{keyword}{auto}\& fit\_info = track\_states[i].header;}
\DoxyCodeLine{221 }
\DoxyCodeLine{222                 fit\_performance\_writer.write(trk\_states\_per\_track, fit\_info,}
\DoxyCodeLine{223                                              host\_det, evt\_map);}
\DoxyCodeLine{224             \}}
\DoxyCodeLine{225         \}}
\DoxyCodeLine{226     \}}
\DoxyCodeLine{227 }
\DoxyCodeLine{228     \textcolor{keywordflow}{if} (common\_opts.\mbox{\hyperlink{structtraccc_1_1common__options_a06a875a852f866c6ad5abfaae82cb440}{check\_performance}}) \{}
\DoxyCodeLine{229         sd\_performance\_writer.finalize();}
\DoxyCodeLine{230         find\_performance\_writer.finalize();}
\DoxyCodeLine{231         fit\_performance\_writer.finalize();}
\DoxyCodeLine{232     \}}
\DoxyCodeLine{233 }
\DoxyCodeLine{234     std::cout << \textcolor{stringliteral}{"==> Statistics ... "} << std::endl;}
\DoxyCodeLine{235     std::cout << \textcolor{stringliteral}{"-\/ read    "} << n\_spacepoints << \textcolor{stringliteral}{" spacepoints"} << std::endl;}
\DoxyCodeLine{236     std::cout << \textcolor{stringliteral}{"-\/ read    "} << n\_measurements << \textcolor{stringliteral}{" measurements"} << std::endl;}
\DoxyCodeLine{237     std::cout << \textcolor{stringliteral}{"-\/ created (cpu)  "} << n\_seeds << \textcolor{stringliteral}{" seeds"} << std::endl;}
\DoxyCodeLine{238     std::cout << \textcolor{stringliteral}{"-\/ created (cpu)  "} << n\_found\_tracks << \textcolor{stringliteral}{" found tracks"}}
\DoxyCodeLine{239               << std::endl;}
\DoxyCodeLine{240     std::cout << \textcolor{stringliteral}{"-\/ created (cpu)  "} << n\_fitted\_tracks << \textcolor{stringliteral}{" fitted tracks"}}
\DoxyCodeLine{241               << std::endl;}
\DoxyCodeLine{242 }
\DoxyCodeLine{243     \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{244 \}}

\end{DoxyCode}


References traccc\+::io\+::alt\+\_\+read\+\_\+geometry(), traccc\+::host\+\_\+container$<$ header\+\_\+t, item\+\_\+t $>$\+::at(), traccc\+::seedfinder\+\_\+config\+::b\+Field\+InZ, traccc\+::common\+\_\+options\+::check\+\_\+performance, traccc\+::csv, traccc\+::io\+::data\+\_\+directory(), traccc\+::detector\+\_\+input\+\_\+options\+::detector\+\_\+file, event, traccc\+::common\+\_\+options\+::events, traccc\+::get\+\_\+data(), traccc\+::detector\+\_\+input\+\_\+options\+::grid\+\_\+file, traccc\+::common\+\_\+options\+::input\+\_\+data\+\_\+format, traccc\+::common\+\_\+options\+::input\+\_\+directory, traccc\+::container\+\_\+element$<$ header\+\_\+reference\+\_\+t, vector\+\_\+reference\+\_\+t $>$\+::items, traccc\+::detector\+\_\+input\+\_\+options\+::material\+\_\+file, traccc\+::io\+::measurement\+\_\+reader\+\_\+output\+::measurements, traccc\+::io\+::read\+\_\+measurements(), traccc\+::io\+::read\+\_\+spacepoints(), traccc\+::host\+\_\+container$<$ header\+\_\+t, item\+\_\+t $>$\+::size(), traccc\+::common\+\_\+options\+::skip, traccc\+::io\+::spacepoint\+\_\+reader\+\_\+output\+::spacepoints, traccc\+::propagation\+\_\+options$<$ scalar\+\_\+t $>$\+::step\+\_\+constraint, and traccc\+::finding\+\_\+input\+\_\+config\+::track\+\_\+candidates\+\_\+range.



Referenced by main().

