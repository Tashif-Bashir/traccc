\hypertarget{create__binaries_8cpp}{}\doxysection{examples/io/create\+\_\+binaries.cpp File Reference}
\label{create__binaries_8cpp}\index{examples/io/create\_binaries.cpp@{examples/io/create\_binaries.cpp}}
{\ttfamily \#include \char`\"{}traccc/io/read\+\_\+cells.\+hpp\char`\"{}}\newline
{\ttfamily \#include \char`\"{}traccc/io/read\+\_\+digitization\+\_\+config.\+hpp\char`\"{}}\newline
{\ttfamily \#include \char`\"{}traccc/io/read\+\_\+geometry.\+hpp\char`\"{}}\newline
{\ttfamily \#include \char`\"{}traccc/io/read\+\_\+measurements.\+hpp\char`\"{}}\newline
{\ttfamily \#include \char`\"{}traccc/io/read\+\_\+spacepoints.\+hpp\char`\"{}}\newline
{\ttfamily \#include \char`\"{}traccc/io/write.\+hpp\char`\"{}}\newline
{\ttfamily \#include \char`\"{}traccc/options/common\+\_\+options.\+hpp\char`\"{}}\newline
{\ttfamily \#include \char`\"{}traccc/options/handle\+\_\+argument\+\_\+errors.\+hpp\char`\"{}}\newline
{\ttfamily \#include $<$vecmem/memory/host\+\_\+memory\+\_\+resource.\+hpp$>$}\newline
Include dependency graph for create\+\_\+binaries.\+cpp\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{d5/df8/create__binaries_8cpp__incl}
\end{center}
\end{figure}
\doxysubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
int \mbox{\hyperlink{create__binaries_8cpp_a025638a76068fe62e68a0f53db173672}{create\+\_\+binaries}} (const std\+::string \&\mbox{\hyperlink{test__mapper_8cpp_a902d72422a60bd9a079e899a54f552c1}{detector\+\_\+file}}, const std\+::string \&\mbox{\hyperlink{test__mapper_8cpp_a5a453e9bf94f17c28f4cd86724b542a3}{digi\+\_\+config\+\_\+file}}, const \mbox{\hyperlink{structtraccc_1_1common__options}{traccc\+::common\+\_\+options}} \&common\+\_\+opts)
\item 
int \mbox{\hyperlink{create__binaries_8cpp_a0ddf1224851353fc92bfbff6f499fa97}{main}} (int argc, char $\ast$argv\mbox{[}$\,$\mbox{]})
\end{DoxyCompactItemize}


\doxysubsection{Function Documentation}
\mbox{\Hypertarget{create__binaries_8cpp_a025638a76068fe62e68a0f53db173672}\label{create__binaries_8cpp_a025638a76068fe62e68a0f53db173672}} 
\index{create\_binaries.cpp@{create\_binaries.cpp}!create\_binaries@{create\_binaries}}
\index{create\_binaries@{create\_binaries}!create\_binaries.cpp@{create\_binaries.cpp}}
\doxysubsubsection{\texorpdfstring{create\_binaries()}{create\_binaries()}}
{\footnotesize\ttfamily int create\+\_\+binaries (\begin{DoxyParamCaption}\item[{const std\+::string \&}]{detector\+\_\+file,  }\item[{const std\+::string \&}]{digi\+\_\+config\+\_\+file,  }\item[{const \mbox{\hyperlink{structtraccc_1_1common__options}{traccc\+::common\+\_\+options}} \&}]{common\+\_\+opts }\end{DoxyParamCaption})}

T\+R\+A\+C\+CC library, part of the A\+C\+TS project (R\&D line)

(c) 2022 C\+E\+RN for the benefit of the A\+C\+TS project

Mozilla Public License Version 2.\+0 
\begin{DoxyCode}{0}
\DoxyCodeLine{25                                                              \{}
\DoxyCodeLine{26 }
\DoxyCodeLine{27     \textcolor{comment}{// Read the surface transforms}}
\DoxyCodeLine{28     \textcolor{keyword}{auto} surface\_transforms = \mbox{\hyperlink{namespacetraccc_1_1io_a5a6c904c086473a05b85a0bf060bfa8d}{traccc::io::read\_geometry}}(\mbox{\hyperlink{test__mapper_8cpp_a902d72422a60bd9a079e899a54f552c1}{detector\_file}});}
\DoxyCodeLine{29 }
\DoxyCodeLine{30     \textcolor{comment}{// Read the digitization configuration file}}
\DoxyCodeLine{31     \textcolor{keyword}{auto} digi\_cfg = \mbox{\hyperlink{namespacetraccc_1_1io_aa6519a2968b73b699f1aee456d80c190}{traccc::io::read\_digitization\_config}}(\mbox{\hyperlink{test__mapper_8cpp_a5a453e9bf94f17c28f4cd86724b542a3}{digi\_config\_file}});}
\DoxyCodeLine{32 }
\DoxyCodeLine{33     \textcolor{comment}{// Memory resource used by the EDM.}}
\DoxyCodeLine{34     vecmem::host\_memory\_resource host\_mr;}
\DoxyCodeLine{35 }
\DoxyCodeLine{36     \textcolor{comment}{// Loop over events}}
\DoxyCodeLine{37     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} \mbox{\hyperlink{test__mapper_8cpp_aa79e3eff1ed8e629ebc8e3268c4805f9}{event}} = common\_opts.\mbox{\hyperlink{structtraccc_1_1common__options_ac0477bdb9a07bf525e12b006e141e094}{skip}};}
\DoxyCodeLine{38          \mbox{\hyperlink{test__mapper_8cpp_aa79e3eff1ed8e629ebc8e3268c4805f9}{event}} < common\_opts.\mbox{\hyperlink{structtraccc_1_1common__options_adefc317cdc0b846c7be8db1e5f0c3ef2}{events}} + common\_opts.\mbox{\hyperlink{structtraccc_1_1common__options_ac0477bdb9a07bf525e12b006e141e094}{skip}}; ++\mbox{\hyperlink{test__mapper_8cpp_aa79e3eff1ed8e629ebc8e3268c4805f9}{event}}) \{}
\DoxyCodeLine{39 }
\DoxyCodeLine{40         \textcolor{comment}{// Read the cells from the relevant event file}}
\DoxyCodeLine{41         \mbox{\hyperlink{structtraccc_1_1io_1_1cell__reader__output}{traccc::io::cell\_reader\_output}} cells\_csv(\&host\_mr);}
\DoxyCodeLine{42         \mbox{\hyperlink{namespacetraccc_1_1io_a4141a99f877738d68d63f85ed5642462}{traccc::io::read\_cells}}(cells\_csv, \mbox{\hyperlink{test__mapper_8cpp_aa79e3eff1ed8e629ebc8e3268c4805f9}{event}}, common\_opts.\mbox{\hyperlink{structtraccc_1_1common__options_aec17933699762e2feb58124cef53d6b2}{input\_directory}},}
\DoxyCodeLine{43                                common\_opts.\mbox{\hyperlink{structtraccc_1_1common__options_a290ad4675f5a976c73c2a05e35dd1b5c}{input\_data\_format}},}
\DoxyCodeLine{44                                \&surface\_transforms, \&digi\_cfg);}
\DoxyCodeLine{45 }
\DoxyCodeLine{46         \textcolor{comment}{// Write binary file}}
\DoxyCodeLine{47         \mbox{\hyperlink{namespacetraccc_1_1io_ac5ecbcf7382458f8a937e4b93d27c5fe}{traccc::io::write}}(\mbox{\hyperlink{test__mapper_8cpp_aa79e3eff1ed8e629ebc8e3268c4805f9}{event}}, common\_opts.\mbox{\hyperlink{structtraccc_1_1common__options_aec17933699762e2feb58124cef53d6b2}{input\_directory}},}
\DoxyCodeLine{48                           \mbox{\hyperlink{namespacetraccc_af412a9ab8cc2a30a664acd9f62bb83daab5442023e55597c0c524502feb4da989}{traccc::data\_format::binary}},}
\DoxyCodeLine{49                           \mbox{\hyperlink{namespacetraccc_a503d2d50b981602cbc71693ad215b298}{vecmem::get\_data}}(cells\_csv.cells),}
\DoxyCodeLine{50                           \mbox{\hyperlink{namespacetraccc_a503d2d50b981602cbc71693ad215b298}{vecmem::get\_data}}(cells\_csv.modules));}
\DoxyCodeLine{51 }
\DoxyCodeLine{52         \textcolor{comment}{// Read the hits from the relevant event file}}
\DoxyCodeLine{53         \mbox{\hyperlink{structtraccc_1_1io_1_1spacepoint__reader__output}{traccc::io::spacepoint\_reader\_output}} spacepoints\_csv(\&host\_mr);}
\DoxyCodeLine{54         \mbox{\hyperlink{namespacetraccc_1_1io_afe49060da2ab77f49cfcd82308122f84}{traccc::io::read\_spacepoints}}(}
\DoxyCodeLine{55             spacepoints\_csv, \mbox{\hyperlink{test__mapper_8cpp_aa79e3eff1ed8e629ebc8e3268c4805f9}{event}}, common\_opts.\mbox{\hyperlink{structtraccc_1_1common__options_aec17933699762e2feb58124cef53d6b2}{input\_directory}},}
\DoxyCodeLine{56             surface\_transforms, common\_opts.\mbox{\hyperlink{structtraccc_1_1common__options_a290ad4675f5a976c73c2a05e35dd1b5c}{input\_data\_format}});}
\DoxyCodeLine{57 }
\DoxyCodeLine{58         \textcolor{comment}{// Write binary file}}
\DoxyCodeLine{59         \mbox{\hyperlink{namespacetraccc_1_1io_ac5ecbcf7382458f8a937e4b93d27c5fe}{traccc::io::write}}(\mbox{\hyperlink{test__mapper_8cpp_aa79e3eff1ed8e629ebc8e3268c4805f9}{event}}, common\_opts.\mbox{\hyperlink{structtraccc_1_1common__options_aec17933699762e2feb58124cef53d6b2}{input\_directory}},}
\DoxyCodeLine{60                           \mbox{\hyperlink{namespacetraccc_af412a9ab8cc2a30a664acd9f62bb83daab5442023e55597c0c524502feb4da989}{traccc::data\_format::binary}},}
\DoxyCodeLine{61                           \mbox{\hyperlink{namespacetraccc_a503d2d50b981602cbc71693ad215b298}{vecmem::get\_data}}(spacepoints\_csv.spacepoints),}
\DoxyCodeLine{62                           \mbox{\hyperlink{namespacetraccc_a503d2d50b981602cbc71693ad215b298}{vecmem::get\_data}}(spacepoints\_csv.modules));}
\DoxyCodeLine{63 }
\DoxyCodeLine{64         \textcolor{comment}{// Read the measurements from the relevant event file}}
\DoxyCodeLine{65         \mbox{\hyperlink{structtraccc_1_1io_1_1measurement__reader__output}{traccc::io::measurement\_reader\_output}} measurements\_csv(\&host\_mr);}
\DoxyCodeLine{66         \mbox{\hyperlink{namespacetraccc_1_1io_a84e36824b32d23770ed527b25f810307}{traccc::io::read\_measurements}}(measurements\_csv, \mbox{\hyperlink{test__mapper_8cpp_aa79e3eff1ed8e629ebc8e3268c4805f9}{event}},}
\DoxyCodeLine{67                                       common\_opts.\mbox{\hyperlink{structtraccc_1_1common__options_aec17933699762e2feb58124cef53d6b2}{input\_directory}},}
\DoxyCodeLine{68                                       common\_opts.\mbox{\hyperlink{structtraccc_1_1common__options_a290ad4675f5a976c73c2a05e35dd1b5c}{input\_data\_format}});}
\DoxyCodeLine{69 }
\DoxyCodeLine{70         \textcolor{comment}{// Write binary file}}
\DoxyCodeLine{71         \mbox{\hyperlink{namespacetraccc_1_1io_ac5ecbcf7382458f8a937e4b93d27c5fe}{traccc::io::write}}(\mbox{\hyperlink{test__mapper_8cpp_aa79e3eff1ed8e629ebc8e3268c4805f9}{event}}, common\_opts.\mbox{\hyperlink{structtraccc_1_1common__options_aec17933699762e2feb58124cef53d6b2}{input\_directory}},}
\DoxyCodeLine{72                           \mbox{\hyperlink{namespacetraccc_af412a9ab8cc2a30a664acd9f62bb83daab5442023e55597c0c524502feb4da989}{traccc::data\_format::binary}},}
\DoxyCodeLine{73                           \mbox{\hyperlink{namespacetraccc_a503d2d50b981602cbc71693ad215b298}{vecmem::get\_data}}(measurements\_csv.measurements),}
\DoxyCodeLine{74                           \mbox{\hyperlink{namespacetraccc_a503d2d50b981602cbc71693ad215b298}{vecmem::get\_data}}(measurements\_csv.modules));}
\DoxyCodeLine{75     \}}
\DoxyCodeLine{76 }
\DoxyCodeLine{77     \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{78 \}}

\end{DoxyCode}


References traccc\+::binary, traccc\+::io\+::cell\+\_\+reader\+\_\+output\+::cells, detector\+\_\+file, digi\+\_\+config\+\_\+file, event, traccc\+::common\+\_\+options\+::events, traccc\+::get\+\_\+data(), traccc\+::common\+\_\+options\+::input\+\_\+data\+\_\+format, traccc\+::common\+\_\+options\+::input\+\_\+directory, traccc\+::io\+::measurement\+\_\+reader\+\_\+output\+::measurements, traccc\+::io\+::cell\+\_\+reader\+\_\+output\+::modules, traccc\+::io\+::measurement\+\_\+reader\+\_\+output\+::modules, traccc\+::io\+::spacepoint\+\_\+reader\+\_\+output\+::modules, traccc\+::io\+::read\+\_\+cells(), traccc\+::io\+::read\+\_\+digitization\+\_\+config(), traccc\+::io\+::read\+\_\+geometry(), traccc\+::io\+::read\+\_\+measurements(), traccc\+::io\+::read\+\_\+spacepoints(), traccc\+::common\+\_\+options\+::skip, traccc\+::io\+::spacepoint\+\_\+reader\+\_\+output\+::spacepoints, and traccc\+::io\+::write().



Referenced by main().

\mbox{\Hypertarget{create__binaries_8cpp_a0ddf1224851353fc92bfbff6f499fa97}\label{create__binaries_8cpp_a0ddf1224851353fc92bfbff6f499fa97}} 
\index{create\_binaries.cpp@{create\_binaries.cpp}!main@{main}}
\index{main@{main}!create\_binaries.cpp@{create\_binaries.cpp}}
\doxysubsubsection{\texorpdfstring{main()}{main()}}
{\footnotesize\ttfamily int main (\begin{DoxyParamCaption}\item[{int}]{argc,  }\item[{char $\ast$}]{argv\mbox{[}$\,$\mbox{]} }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{82                                  \{}
\DoxyCodeLine{83     \textcolor{comment}{// Set up the program options}}
\DoxyCodeLine{84     po::options\_description desc(\textcolor{stringliteral}{"Allowed options"});}
\DoxyCodeLine{85 }
\DoxyCodeLine{86     \textcolor{comment}{// Add options}}
\DoxyCodeLine{87     desc.add\_options()(\textcolor{stringliteral}{"help,h"}, \textcolor{stringliteral}{"Give some help with the program's options"});}
\DoxyCodeLine{88     desc.add\_options()(\textcolor{stringliteral}{"detector\_file"}, po::value<std::string>()-\/>required(),}
\DoxyCodeLine{89                        \textcolor{stringliteral}{"specify detector file"});}
\DoxyCodeLine{90     desc.add\_options()(\textcolor{stringliteral}{"digitization\_config\_file"},}
\DoxyCodeLine{91                        po::value<std::string>()-\/>required(),}
\DoxyCodeLine{92                        \textcolor{stringliteral}{"specify digitization configuration file"});}
\DoxyCodeLine{93     \mbox{\hyperlink{structtraccc_1_1common__options}{traccc::common\_options}} common\_opts(desc);}
\DoxyCodeLine{94 }
\DoxyCodeLine{95     po::variables\_map vm;}
\DoxyCodeLine{96     po::store(po::parse\_command\_line(argc, argv, desc), vm);}
\DoxyCodeLine{97 }
\DoxyCodeLine{98     \textcolor{comment}{// Check errors}}
\DoxyCodeLine{99     \mbox{\hyperlink{namespacetraccc_a018e1f5ae8dbab3e118c08cfb905be01}{traccc::handle\_argument\_errors}}(vm, desc);}
\DoxyCodeLine{100 }
\DoxyCodeLine{101     \textcolor{comment}{// Read options}}
\DoxyCodeLine{102     \textcolor{keyword}{auto} \mbox{\hyperlink{test__mapper_8cpp_a902d72422a60bd9a079e899a54f552c1}{detector\_file}} = vm[\textcolor{stringliteral}{"detector\_file"}].as<std::string>();}
\DoxyCodeLine{103     \textcolor{keyword}{auto} \mbox{\hyperlink{test__mapper_8cpp_a5a453e9bf94f17c28f4cd86724b542a3}{digi\_config\_file}} = vm[\textcolor{stringliteral}{"digitization\_config\_file"}].as<std::string>();}
\DoxyCodeLine{104     common\_opts.read(vm);}
\DoxyCodeLine{105 }
\DoxyCodeLine{106     \textcolor{keywordflow}{return} \mbox{\hyperlink{create__binaries_8cpp_a025638a76068fe62e68a0f53db173672}{create\_binaries}}(\mbox{\hyperlink{test__mapper_8cpp_a902d72422a60bd9a079e899a54f552c1}{detector\_file}}, \mbox{\hyperlink{test__mapper_8cpp_a5a453e9bf94f17c28f4cd86724b542a3}{digi\_config\_file}}, common\_opts);}
\DoxyCodeLine{107 \}}

\end{DoxyCode}


References create\+\_\+binaries(), detector\+\_\+file, digi\+\_\+config\+\_\+file, traccc\+::handle\+\_\+argument\+\_\+errors(), and traccc\+::common\+\_\+options\+::read().

