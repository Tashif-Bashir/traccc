<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.18"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>traccc: traccc::cuda::details::select_device Class Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">traccc
   &#160;<span id="projectnumber">02</span>
   </div>
   <div id="projectbrief">&#39;tracccisapartofactsprojectatcern.Itisfocusedtowardsthetrackreconstructionoftheparticles&#39;</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.18 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="../../d7/d7b/namespacetraccc.html">traccc</a></li><li class="navelem"><a class="el" href="../../db/dca/namespacetraccc_1_1cuda.html">cuda</a></li><li class="navelem"><a class="el" href="../../d2/d53/namespacetraccc_1_1cuda_1_1details.html">details</a></li><li class="navelem"><a class="el" href="../../d1/d9c/classtraccc_1_1cuda_1_1details_1_1select__device.html">select_device</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a> &#124;
<a href="../../d2/d5b/classtraccc_1_1cuda_1_1details_1_1select__device-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">traccc::cuda::details::select_device Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;<a class="el" href="../../db/d15/device_2cuda_2src_2utils_2utils_8hpp_source.html">utils.hpp</a>&gt;</code></p>
<div class="dynheader">
Collaboration diagram for traccc::cuda::details::select_device:</div>
<div class="dyncontent">
<div class="center"><img src="../../d9/d1a/classtraccc_1_1cuda_1_1details_1_1select__device__coll__graph.png" border="0" usemap="#traccc_1_1cuda_1_1details_1_1select__device_coll__map" alt="Collaboration graph"/></div>
<map name="traccc_1_1cuda_1_1details_1_1select__device_coll__map" id="traccc_1_1cuda_1_1details_1_1select__device_coll__map">
<area shape="rect" title=" " alt="" coords="5,5,157,127"/>
</map>
</div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a7db25d37719f1db1aa6b3258b899d7c6"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/d9c/classtraccc_1_1cuda_1_1details_1_1select__device.html#a7db25d37719f1db1aa6b3258b899d7c6">select_device</a> (int <a class="el" href="../../d1/d9c/classtraccc_1_1cuda_1_1details_1_1select__device.html#a113fabf401e551d1355462584c64b8c8">device</a>)</td></tr>
<tr class="separator:a7db25d37719f1db1aa6b3258b899d7c6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6f86df3ed545a4f7d14d679248fa25b1"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/d9c/classtraccc_1_1cuda_1_1details_1_1select__device.html#a6f86df3ed545a4f7d14d679248fa25b1">~select_device</a> ()</td></tr>
<tr class="separator:a6f86df3ed545a4f7d14d679248fa25b1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a113fabf401e551d1355462584c64b8c8"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/d9c/classtraccc_1_1cuda_1_1details_1_1select__device.html#a113fabf401e551d1355462584c64b8c8">device</a> () const</td></tr>
<tr class="memdesc:a113fabf401e551d1355462584c64b8c8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return the identifier for the device being seleced.  <a href="../../d1/d9c/classtraccc_1_1cuda_1_1details_1_1select__device.html#a113fabf401e551d1355462584c64b8c8">More...</a><br /></td></tr>
<tr class="separator:a113fabf401e551d1355462584c64b8c8"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:a6f635a8540da36618b07a885f702fb23"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/d9c/classtraccc_1_1cuda_1_1details_1_1select__device.html#a6f635a8540da36618b07a885f702fb23">m_device</a></td></tr>
<tr class="separator:a6f635a8540da36618b07a885f702fb23"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Class with RAII mechanism for selecting a CUDA device.</p>
<p>This class can be used to select CUDA devices in a modern C++ way, with scope safety. When an object of this class is constructed, it will switch the thread-local device selector to the device number specified in the constructor argument. When this object goes out of scope or gets destructed in any other way, it will restore the device that was set before the object was constructed. This allows us to easily write methods with few side-effects.</p>
<dl class="section warning"><dt>Warning</dt><dd>The behaviour of this class is not well-defined if you construct more than one in the same scope. </dd></dl>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a7db25d37719f1db1aa6b3258b899d7c6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7db25d37719f1db1aa6b3258b899d7c6">&#9670;&nbsp;</a></span>select_device()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">traccc::cuda::details::select_device::select_device </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>device</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Constructs the object, switching the current CUDA device to the requested number.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">device</td><td>The CUDA device number to switch to. </td></tr>
  </table>
  </dd>
</dl>
<div class="fragment"><div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;                                       {</div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;    <span class="comment">/*</span></div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="comment">     * When the object is constructed, grab the current device number and</span></div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="comment">     * store it as a member variable. Then set the device to whatever was</span></div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;<span class="comment">     * specified.</span></div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;<span class="comment">     */</span></div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;    <a class="code" href="../../d0/dc1/cuda_2include_2traccc_2cuda_2utils_2definitions_8hpp.html#a924e9e2dee296776f46a6c0814e27eda">CUDA_ERROR_CHECK</a>(cudaGetDevice(&amp;<a class="code" href="../../d1/d9c/classtraccc_1_1cuda_1_1details_1_1select__device.html#a6f635a8540da36618b07a885f702fb23">m_device</a>));</div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;    <a class="code" href="../../d0/dc1/cuda_2include_2traccc_2cuda_2utils_2definitions_8hpp.html#a924e9e2dee296776f46a6c0814e27eda">CUDA_ERROR_CHECK</a>(cudaSetDevice(<a class="code" href="../../d1/d9c/classtraccc_1_1cuda_1_1details_1_1select__device.html#a113fabf401e551d1355462584c64b8c8">device</a>));</div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d0/dc1/cuda_2include_2traccc_2cuda_2utils_2definitions_8hpp.html#a924e9e2dee296776f46a6c0814e27eda">CUDA_ERROR_CHECK</a>, <a class="el" href="../../d1/d9c/classtraccc_1_1cuda_1_1details_1_1select__device.html#a113fabf401e551d1355462584c64b8c8">device()</a>, and <a class="el" href="../../d1/d9c/classtraccc_1_1cuda_1_1details_1_1select__device.html#a6f635a8540da36618b07a885f702fb23">m_device</a>.</p>

</div>
</div>
<a id="a6f86df3ed545a4f7d14d679248fa25b1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6f86df3ed545a4f7d14d679248fa25b1">&#9670;&nbsp;</a></span>~select_device()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">traccc::cuda::details::select_device::~select_device </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Deconstructs the object, returning to the device that was selected before constructing this object. </p>
<div class="fragment"><div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;                              {</div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;    <span class="comment">/*</span></div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;<span class="comment">     * On destruction, reset the device number to whatever it was before the</span></div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;<span class="comment">     * object was constructed.</span></div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;<span class="comment">     */</span></div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;    <a class="code" href="../../d0/dc1/cuda_2include_2traccc_2cuda_2utils_2definitions_8hpp.html#a924e9e2dee296776f46a6c0814e27eda">CUDA_ERROR_CHECK</a>(cudaSetDevice(<a class="code" href="../../d1/d9c/classtraccc_1_1cuda_1_1details_1_1select__device.html#a6f635a8540da36618b07a885f702fb23">m_device</a>));</div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d0/dc1/cuda_2include_2traccc_2cuda_2utils_2definitions_8hpp.html#a924e9e2dee296776f46a6c0814e27eda">CUDA_ERROR_CHECK</a>, and <a class="el" href="../../d1/d9c/classtraccc_1_1cuda_1_1details_1_1select__device.html#a6f635a8540da36618b07a885f702fb23">m_device</a>.</p>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a113fabf401e551d1355462584c64b8c8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a113fabf401e551d1355462584c64b8c8">&#9670;&nbsp;</a></span>device()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int traccc::cuda::details::select_device::device </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Return the identifier for the device being seleced. </p>
<div class="fragment"><div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;                                {</div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160; </div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../d1/d9c/classtraccc_1_1cuda_1_1details_1_1select__device.html#a6f635a8540da36618b07a885f702fb23">m_device</a>;</div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d1/d9c/classtraccc_1_1cuda_1_1details_1_1select__device.html#a6f635a8540da36618b07a885f702fb23">m_device</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d1/d9c/classtraccc_1_1cuda_1_1details_1_1select__device.html#a7db25d37719f1db1aa6b3258b899d7c6">select_device()</a>.</p>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="a6f635a8540da36618b07a885f702fb23"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6f635a8540da36618b07a885f702fb23">&#9670;&nbsp;</a></span>m_device</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int traccc::cuda::details::select_device::m_device</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>The old device number, this is what we restore when the object goes out of scope. </p>

<p class="reference">Referenced by <a class="el" href="../../d1/d9c/classtraccc_1_1cuda_1_1details_1_1select__device.html#a113fabf401e551d1355462584c64b8c8">device()</a>, <a class="el" href="../../d1/d9c/classtraccc_1_1cuda_1_1details_1_1select__device.html#a7db25d37719f1db1aa6b3258b899d7c6">select_device()</a>, and <a class="el" href="../../d1/d9c/classtraccc_1_1cuda_1_1details_1_1select__device.html#a6f86df3ed545a4f7d14d679248fa25b1">~select_device()</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>device/cuda/src/utils/<a class="el" href="../../db/d15/device_2cuda_2src_2utils_2utils_8hpp_source.html">utils.hpp</a></li>
<li>device/cuda/src/utils/<a class="el" href="../../d3/d8d/device_2cuda_2src_2utils_2utils_8cpp.html">utils.cpp</a></li>
</ul>
</div><!-- contents -->
<div class="ttc" id="acuda_2include_2traccc_2cuda_2utils_2definitions_8hpp_html_a924e9e2dee296776f46a6c0814e27eda"><div class="ttname"><a href="../../d0/dc1/cuda_2include_2traccc_2cuda_2utils_2definitions_8hpp.html#a924e9e2dee296776f46a6c0814e27eda">CUDA_ERROR_CHECK</a></div><div class="ttdeci">#define CUDA_ERROR_CHECK(ans)</div><div class="ttdoc">Helper macro used for checking cudaError_t type return values.</div><div class="ttdef"><b>Definition:</b> definitions.hpp:19</div></div>
<div class="ttc" id="aclasstraccc_1_1cuda_1_1details_1_1select__device_html_a6f635a8540da36618b07a885f702fb23"><div class="ttname"><a href="../../d1/d9c/classtraccc_1_1cuda_1_1details_1_1select__device.html#a6f635a8540da36618b07a885f702fb23">traccc::cuda::details::select_device::m_device</a></div><div class="ttdeci">int m_device</div><div class="ttdef"><b>Definition:</b> utils.hpp:64</div></div>
<div class="ttc" id="aclasstraccc_1_1cuda_1_1details_1_1select__device_html_a113fabf401e551d1355462584c64b8c8"><div class="ttname"><a href="../../d1/d9c/classtraccc_1_1cuda_1_1details_1_1select__device.html#a113fabf401e551d1355462584c64b8c8">traccc::cuda::details::select_device::device</a></div><div class="ttdeci">int device() const</div><div class="ttdoc">Return the identifier for the device being seleced.</div><div class="ttdef"><b>Definition:</b> utils.cpp:45</div></div>
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="../../doxygen.png" alt="doxygen"/>
</a> 1.8.18
</small></address>
</body>
</html>
